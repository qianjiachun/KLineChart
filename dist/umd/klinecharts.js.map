{"version":3,"file":"klinecharts.js","sources":["../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.5_rollup@4.7.0_tslib@2.5.0_typescript@4.8.3/node_modules/tslib/tslib.es6.js","../../src/common/Styles.ts","../../src/common/utils/logger.ts","../../src/common/utils/typeChecks.ts","../../src/common/utils/format.ts","../../src/common/utils/canvas.ts","../../src/common/Action.ts","../../src/component/Indicator.ts","../../src/component/Overlay.ts","../../src/Options.ts","../../src/common/utils/id.ts","../../src/common/utils/dom.ts","../../src/common/utils/number.ts","../../src/common/VisibleRange.ts","../../src/store/TimeScaleStore.ts","../../src/extension/indicator/averagePrice.ts","../../src/extension/indicator/awesomeOscillator.ts","../../src/extension/indicator/bias.ts","../../src/extension/indicator/bollingerBands.ts","../../src/extension/indicator/brar.ts","../../src/extension/indicator/bullAndBearIndex.ts","../../src/extension/indicator/commodityChannelIndex.ts","../../src/extension/indicator/currentRatio.ts","../../src/extension/indicator/differentOfMovingAverage.ts","../../src/extension/indicator/directionalMovementIndex.ts","../../src/extension/indicator/easeOfMovementValue.ts","../../src/extension/indicator/exponentialMovingAverage.ts","../../src/extension/indicator/momentum.ts","../../src/extension/indicator/movingAverage.ts","../../src/extension/indicator/movingAverageConvergenceDivergence.ts","../../src/extension/indicator/onBalanceVolume.ts","../../src/extension/indicator/priceAndVolumeTrend.ts","../../src/extension/indicator/psychologicalLine.ts","../../src/extension/indicator/rateOfChange.ts","../../src/extension/indicator/relativeStrengthIndex.ts","../../src/extension/indicator/simpleMovingAverage.ts","../../src/extension/indicator/stoch.ts","../../src/extension/indicator/stopAndReverse.ts","../../src/extension/indicator/tripleExponentiallySmoothedAverage.ts","../../src/extension/indicator/volume.ts","../../src/extension/indicator/volumeRatio.ts","../../src/extension/indicator/williamsR.ts","../../src/extension/indicator/index.ts","../../src/store/IndicatorStore.ts","../../src/store/TooltipStore.ts","../../src/extension/overlay/fibonacciLine.ts","../../src/extension/overlay/horizontalRayLine.ts","../../src/extension/overlay/horizontalSegment.ts","../../src/extension/overlay/horizontalStraightLine.ts","../../src/common/Eventful.ts","../../src/component/Figure.ts","../../src/extension/figure/line.ts","../../src/extension/overlay/parallelStraightLine.ts","../../src/extension/overlay/priceChannelLine.ts","../../src/extension/overlay/priceLine.ts","../../src/extension/overlay/rayLine.ts","../../src/extension/overlay/segment.ts","../../src/extension/overlay/straightLine.ts","../../src/extension/overlay/verticalRayLine.ts","../../src/extension/overlay/verticalSegment.ts","../../src/extension/overlay/verticalStraightLine.ts","../../src/extension/overlay/simpleAnnotation.ts","../../src/extension/overlay/simpleTag.ts","../../src/extension/overlay/index.ts","../../src/pane/types.ts","../../src/store/OverlayStore.ts","../../src/store/ActionStore.ts","../../src/extension/styles/light.ts","../../src/extension/styles/dark.ts","../../src/extension/styles/index.ts","../../src/store/ChartStore.ts","../../src/widget/types.ts","../../src/common/Bounding.ts","../../src/widget/Widget.ts","../../src/common/utils/compatible.ts","../../src/widget/DrawWidget.ts","../../src/common/utils/color.ts","../../src/extension/figure/circle.ts","../../src/extension/figure/polygon.ts","../../src/extension/figure/rect.ts","../../src/extension/figure/text.ts","../../src/extension/figure/rectText.ts","../../src/common/Coordinate.ts","../../src/extension/figure/arc.ts","../../src/extension/figure/index.ts","../../src/view/View.ts","../../src/view/GridView.ts","../../src/common/utils/performance.ts","../../src/view/ChildrenView.ts","../../src/view/CandleBarView.ts","../../src/view/IndicatorView.ts","../../src/view/CrosshairLineView.ts","../../src/view/IndicatorTooltipView.ts","../../src/view/OverlayView.ts","../../src/widget/IndicatorWidget.ts","../../src/view/CandleAreaView.ts","../../src/view/CandleHighLowPriceView.ts","../../src/view/CandleLastPriceLineView.ts","../../src/extension/i18n/zh-CN.ts","../../src/extension/i18n/en-US.ts","../../src/extension/i18n/index.ts","../../src/view/CandleTooltipView.ts","../../src/widget/CandleWidget.ts","../../src/view/AxisView.ts","../../src/view/YAxisView.ts","../../src/view/CandleLastPriceLabelView.ts","../../src/view/IndicatorLastValueView.ts","../../src/view/OverlayYAxisView.ts","../../src/view/CrosshairHorizontalLabelView.ts","../../src/widget/YAxisWidget.ts","../../src/component/Axis.ts","../../src/component/YAxis.ts","../../src/pane/Pane.ts","../../src/pane/DrawPane.ts","../../src/pane/IndicatorPane.ts","../../src/pane/CandlePane.ts","../../src/view/XAxisView.ts","../../src/view/OverlayXAxisView.ts","../../src/view/CrosshairVerticalLabelView.ts","../../src/widget/XAxisWidget.ts","../../src/component/XAxis.ts","../../src/pane/XAxisPane.ts","../../src/widget/SeparatorWidget.ts","../../src/pane/SeparatorPane.ts","../../src/common/utils/platform.ts","../../src/common/SyntheticEvent.ts","../../src/Event.ts","../../src/Chart.ts","../../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from './Nullable'\r\nimport KLineData from './KLineData'\r\n\r\nexport interface Margin {\r\n  marginLeft: number\r\n  marginTop: number\r\n  marginRight: number\r\n  marginBottom: number\r\n}\r\n\r\nexport interface Padding {\r\n  paddingLeft: number\r\n  paddingTop: number\r\n  paddingRight: number\r\n  paddingBottom: number\r\n}\r\n\r\n/**\r\n * line type\r\n */\r\nexport enum LineType {\r\n  Dashed = 'dashed',\r\n  Solid = 'solid'\r\n}\r\n\r\nexport interface LineStyle {\r\n  style: LineType\r\n  size: number\r\n  color: string\r\n  dashedValue: number[]\r\n}\r\n\r\nexport interface SmoothLineStyle extends LineStyle {\r\n  smooth: boolean\r\n}\r\n\r\nexport interface StateLineStyle extends LineStyle {\r\n  show: boolean\r\n}\r\n\r\nexport enum PolygonType {\r\n  Stroke = 'stroke',\r\n  Fill = 'fill',\r\n  StrokeFill = 'stroke_fill'\r\n}\r\n\r\nexport interface PolygonStyle {\r\n  style: PolygonType\r\n  color: string | CanvasGradient\r\n  borderColor: string\r\n  borderSize: number\r\n  borderStyle: LineType\r\n  borderDashedValue: number[]\r\n}\r\n\r\nexport interface RectStyle extends PolygonStyle {\r\n  borderRadius: number\r\n}\r\n\r\nexport interface TextStyle extends Padding {\r\n  style: PolygonType\r\n  color: string\r\n  size: number\r\n  family: string\r\n  weight: number | string\r\n  borderStyle: LineType\r\n  borderDashedValue: number[]\r\n  borderSize: number\r\n  borderColor: string\r\n  borderRadius: number\r\n  backgroundColor: string | CanvasGradient\r\n}\r\n\r\n/**\r\n * @deprecated\r\n * Starting from v10, it will be deleted\r\n */\r\nexport type RectTextStyle = TextStyle\r\n\r\nexport interface StateTextStyle extends TextStyle {\r\n  show: boolean\r\n}\r\n\r\n/**\r\n * @deprecated\r\n * Starting from v10, it will be deleted\r\n */\r\nexport type StateRectTextStyle = StateTextStyle\r\n\r\nexport type LastValueMarkTextStyle = Omit<StateTextStyle, 'backgroundColor'>\r\n\r\nexport enum TooltipShowRule {\r\n  Always = 'always',\r\n  FollowCross = 'follow_cross',\r\n  None = 'none'\r\n}\r\n\r\nexport enum TooltipShowType {\r\n  Standard = 'standard',\r\n  Rect = 'rect'\r\n}\r\n\r\nexport interface ChangeColor {\r\n  upColor: string\r\n  downColor: string\r\n  noChangeColor: string\r\n}\r\n\r\nexport interface GradientColor {\r\n  offset: number\r\n  color: string\r\n}\r\n\r\nexport interface GridStyle {\r\n  show: boolean\r\n  horizontal: StateLineStyle\r\n  vertical: StateLineStyle\r\n}\r\n\r\nexport type TooltipTextStyle = Pick<TextStyle, 'color' | 'size' | 'family' | 'weight'> & Margin\r\n\r\nexport interface TooltipDataChild {\r\n  text: string\r\n  color: string\r\n}\r\n\r\nexport interface TooltipData {\r\n  title: string | TooltipDataChild\r\n  value: string | TooltipDataChild\r\n}\r\n\r\nexport enum TooltipIconPosition {\r\n  Left = 'left',\r\n  Middle = 'middle',\r\n  Right = 'right'\r\n}\r\nexport interface TooltipIconStyle extends Padding, Margin {\r\n  id: string\r\n  position: TooltipIconPosition\r\n  color: string\r\n  activeColor: string\r\n  size: number\r\n  fontFamily: string\r\n  icon: string\r\n  backgroundColor: string\r\n  activeBackgroundColor: string\r\n}\r\n\r\nexport interface TooltipStyle {\r\n  showRule: TooltipShowRule\r\n  showType: TooltipShowType\r\n  defaultValue: string\r\n  text: TooltipTextStyle\r\n  icons: TooltipIconStyle[]\r\n}\r\n\r\nexport interface CandleAreaStyle {\r\n  lineSize: number\r\n  lineColor: string\r\n  value: string\r\n  backgroundColor: string | GradientColor[]\r\n}\r\n\r\nexport interface CandleHighLowPriceMarkStyle {\r\n  show: boolean\r\n  color: string\r\n  textOffset: number\r\n  textSize: number\r\n  textFamily: string\r\n  textWeight: string\r\n}\r\n\r\nexport type CandleLastPriceMarkLineStyle = Omit<StateLineStyle, 'color'>\r\nexport interface CandleLastPriceMarkStyle extends ChangeColor {\r\n  show: boolean\r\n  line: CandleLastPriceMarkLineStyle\r\n  text: LastValueMarkTextStyle\r\n}\r\n\r\nexport interface CandlePriceMarkStyle {\r\n  show: boolean\r\n  high: CandleHighLowPriceMarkStyle\r\n  low: CandleHighLowPriceMarkStyle\r\n  last: CandleLastPriceMarkStyle\r\n}\r\n\r\nexport enum CandleTooltipRectPosition {\r\n  Fixed = 'fixed',\r\n  Pointer = 'pointer'\r\n}\r\n\r\nexport interface CandleTooltipRectStyle extends Omit<RectStyle, 'style' | 'borderDashedValue' | 'borderStyle'>, Padding {\r\n  position: CandleTooltipRectPosition\r\n  offsetLeft: number\r\n  offsetTop: number\r\n  offsetRight: number\r\n  offsetBottom: number\r\n}\r\n\r\nexport interface CandleTooltipCustomCallbackData {\r\n  prev: Nullable<KLineData>\r\n  current: KLineData\r\n  next: Nullable<KLineData>\r\n}\r\n\r\nexport type CandleTooltipCustomCallback = (data: CandleTooltipCustomCallbackData, styles: CandleStyle) => TooltipData[]\r\n\r\nexport interface CandleTooltipStyle extends TooltipStyle {\r\n  custom: Nullable<CandleTooltipCustomCallback> | Nullable<TooltipData[]>\r\n  rect: CandleTooltipRectStyle\r\n}\r\n\r\nexport enum CandleType {\r\n  CandleSolid = 'candle_solid',\r\n  CandleStroke = 'candle_stroke',\r\n  CandleUpStroke = 'candle_up_stroke',\r\n  CandleDownStroke = 'candle_down_stroke',\r\n  Ohlc = 'ohlc',\r\n  Area = 'area'\r\n}\r\n\r\nexport interface CandleBarColor extends ChangeColor {\r\n  upBorderColor: string\r\n  downBorderColor: string\r\n  noChangeBorderColor: string\r\n  upWickColor: string\r\n  downWickColor: string\r\n  noChangeWickColor: string\r\n}\r\n\r\nexport interface CandleStyle {\r\n  type: CandleType\r\n  bar: CandleBarColor\r\n  area: CandleAreaStyle\r\n  priceMark: CandlePriceMarkStyle\r\n  tooltip: CandleTooltipStyle\r\n}\r\n\r\nexport type IndicatorPolygonStyle = Omit<PolygonStyle, 'color' | 'borderColor'> & ChangeColor\r\n\r\nexport interface IndicatorLastValueMarkStyle {\r\n  show: boolean\r\n  text: LastValueMarkTextStyle\r\n}\r\n\r\nexport interface IndicatorTooltipStyle extends TooltipStyle {\r\n  showName: boolean\r\n  showParams: boolean\r\n}\r\n\r\nexport interface IndicatorStyle {\r\n  ohlc: ChangeColor\r\n  bars: IndicatorPolygonStyle[]\r\n  lines: SmoothLineStyle[]\r\n  circles: IndicatorPolygonStyle[]\r\n  lastValueMark: IndicatorLastValueMarkStyle\r\n  tooltip: IndicatorTooltipStyle\r\n  [key: string]: any\r\n}\r\n\r\nexport type AxisLineStyle = Omit<StateLineStyle, 'style' | 'dashedValue'>\r\n\r\nexport interface AxisTickLineStyle extends AxisLineStyle {\r\n  length: number\r\n}\r\n\r\nexport interface AxisTickTextStyle extends Pick<StateTextStyle, 'show' | 'color' | 'weight' | 'family' | 'size'> {\r\n  marginStart: number\r\n  marginEnd: number\r\n}\r\n\r\nexport interface AxisStyle {\r\n  show: boolean\r\n  size: number | 'auto'\r\n  axisLine: AxisLineStyle\r\n  tickLine: AxisTickLineStyle\r\n  tickText: AxisTickTextStyle\r\n}\r\n\r\nexport type XAxisStyle = AxisStyle\r\n\r\nexport enum YAxisPosition {\r\n  Left = 'left',\r\n  Right = 'right'\r\n}\r\n\r\nexport enum YAxisType {\r\n  Normal = 'normal',\r\n  Percentage = 'percentage',\r\n  Log = 'log'\r\n}\r\n\r\nexport interface YAxisStyle extends AxisStyle {\r\n  type: YAxisType\r\n  position: YAxisPosition\r\n  inside: boolean\r\n  reverse: boolean\r\n}\r\n\r\nexport interface CrosshairDirectionStyle {\r\n  show: boolean\r\n  line: StateLineStyle\r\n  text: StateTextStyle\r\n}\r\n\r\nexport interface CrosshairStyle {\r\n  show: boolean\r\n  horizontal: CrosshairDirectionStyle\r\n  vertical: CrosshairDirectionStyle\r\n}\r\n\r\nexport interface OverlayPointStyle {\r\n  color: string\r\n  borderColor: string\r\n  borderSize: number\r\n  radius: number\r\n  activeColor: string\r\n  activeBorderColor: string\r\n  activeBorderSize: number\r\n  activeRadius: number\r\n}\r\n\r\nexport interface OverlayStyle {\r\n  point: OverlayPointStyle\r\n  line: SmoothLineStyle\r\n  rect: RectStyle\r\n  polygon: PolygonStyle\r\n  circle: PolygonStyle\r\n  arc: LineStyle\r\n  text: TextStyle\r\n  /**\r\n   * @deprecated\r\n   * Starting from v10, it will be deleted\r\n   */\r\n  rectText: TextStyle\r\n  [key: string]: any\r\n}\r\n\r\nexport interface SeparatorStyle {\r\n  size: number\r\n  color: string\r\n  fill: boolean\r\n  activeBackgroundColor: string\r\n}\r\n\r\nexport interface Styles {\r\n  grid: GridStyle\r\n  candle: CandleStyle\r\n  indicator: IndicatorStyle\r\n  xAxis: XAxisStyle\r\n  yAxis: YAxisStyle\r\n  separator: SeparatorStyle\r\n  crosshair: CrosshairStyle\r\n  overlay: OverlayStyle\r\n}\r\n\r\nconst red = '#F92855'\r\nconst alphaRed = 'rgba(249, 40, 85, .7)'\r\nconst green = '#2DC08E'\r\nconst alphaGreen = 'rgba(45, 192, 142, .7)'\r\nconst grey = '#888888'\r\nconst white = '#FFFFFF'\r\nconst blue = '#1677FF'\r\nconst textColor = '#76808F'\r\nconst axisLineColor = '#DDDDDD'\r\n\r\nfunction getAlphaBlue (alpha: number): string {\r\n  return `rgba(22, 119, 255, ${alpha})`\r\n}\r\n\r\nfunction getDefaultGridStyle (): GridStyle {\r\n  function item (): StateLineStyle {\r\n    return {\r\n      show: true,\r\n      size: 1,\r\n      color: '#EDEDED',\r\n      style: LineType.Dashed,\r\n      dashedValue: [2, 2]\r\n    }\r\n  }\r\n  return {\r\n    show: true,\r\n    horizontal: item(),\r\n    vertical: item()\r\n  }\r\n}\r\n\r\n/**\r\n * Get default candle style\r\n * @type {{area: {backgroundColor: [{offset: number, color: string}, {offset: number, color: string}], lineColor: string, lineSize: number, value: string}, bar: {noChangeColor: string, upColor: string, downColor: string}, tooltip: {rect: {offsetTop: number, fillColor: string, borderColor: string, paddingBottom: number, borderRadius: number, paddingRight: number, borderSize: number, offsetLeft: number, paddingTop: number, paddingLeft: number, offsetRight: number}, showRule: string, values: null, showType: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, labels: string[]}, type: string, priceMark: {high: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, last: {noChangeColor: string, upColor: string, line: {dashValue: number[], size: number, show: boolean, style: string}, show: boolean, text: {paddingBottom: number, size: number, color: string, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}, downColor: string}, low: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, show: boolean}}}\r\n */\r\nfunction getDefaultCandleStyle (): CandleStyle {\r\n  const highLow = {\r\n    show: true,\r\n    color: textColor,\r\n    textOffset: 5,\r\n    textSize: 10,\r\n    textFamily: 'Helvetica Neue',\r\n    textWeight: 'normal'\r\n  }\r\n  return {\r\n    type: CandleType.CandleSolid,\r\n    bar: {\r\n      upColor: green,\r\n      downColor: red,\r\n      noChangeColor: grey,\r\n      upBorderColor: green,\r\n      downBorderColor: red,\r\n      noChangeBorderColor: grey,\r\n      upWickColor: green,\r\n      downWickColor: red,\r\n      noChangeWickColor: grey\r\n    },\r\n    area: {\r\n      lineSize: 2,\r\n      lineColor: blue,\r\n      value: 'close',\r\n      backgroundColor: [{\r\n        offset: 0,\r\n        color: getAlphaBlue(0.01)\r\n      }, {\r\n        offset: 1,\r\n        color: getAlphaBlue(0.2)\r\n      }]\r\n    },\r\n    priceMark: {\r\n      show: true,\r\n      high: { ...highLow },\r\n      low: { ...highLow },\r\n      last: {\r\n        show: true,\r\n        upColor: green,\r\n        downColor: red,\r\n        noChangeColor: grey,\r\n        line: {\r\n          show: true,\r\n          style: LineType.Dashed,\r\n          dashedValue: [4, 4],\r\n          size: 1\r\n        },\r\n        text: {\r\n          show: true,\r\n          style: PolygonType.Fill,\r\n          size: 12,\r\n          paddingLeft: 4,\r\n          paddingTop: 4,\r\n          paddingRight: 4,\r\n          paddingBottom: 4,\r\n          borderColor: 'transparent',\r\n          borderStyle: LineType.Solid,\r\n          borderSize: 0,\r\n          borderDashedValue: [2, 2],\r\n          color: white,\r\n          family: 'Helvetica Neue',\r\n          weight: 'normal',\r\n          borderRadius: 2\r\n        }\r\n      }\r\n    },\r\n    tooltip: {\r\n      showRule: TooltipShowRule.Always,\r\n      showType: TooltipShowType.Standard,\r\n      custom: null,\r\n      defaultValue: 'n/a',\r\n      rect: {\r\n        position: CandleTooltipRectPosition.Fixed,\r\n        paddingLeft: 0,\r\n        paddingRight: 0,\r\n        paddingTop: 0,\r\n        paddingBottom: 8,\r\n        offsetLeft: 10,\r\n        offsetTop: 8,\r\n        offsetRight: 10,\r\n        offsetBottom: 8,\r\n        borderRadius: 4,\r\n        borderSize: 1,\r\n        borderColor: '#F2F3F5',\r\n        color: '#FEFEFE'\r\n      },\r\n      text: {\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: textColor,\r\n        marginLeft: 10,\r\n        marginTop: 8,\r\n        marginRight: 6,\r\n        marginBottom: 0\r\n      },\r\n      icons: []\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Get default indicator style\r\n */\r\nfunction getDefaultIndicatorStyle (): IndicatorStyle {\r\n  const lines = ['#FF9600', '#935EBD', blue, '#E11D74', '#01C5C4'].map(color => ({\r\n    style: LineType.Solid,\r\n    smooth: false,\r\n    size: 1,\r\n    dashedValue: [2, 2],\r\n    color\r\n  }))\r\n\r\n  return {\r\n    ohlc: {\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: grey\r\n    },\r\n    bars: [{\r\n      style: PolygonType.Fill,\r\n      borderStyle: LineType.Solid,\r\n      borderSize: 1,\r\n      borderDashedValue: [2, 2],\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: grey\r\n    }],\r\n    lines,\r\n    circles: [{\r\n      style: PolygonType.Fill,\r\n      borderStyle: LineType.Solid,\r\n      borderSize: 1,\r\n      borderDashedValue: [2, 2],\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: grey\r\n    }],\r\n    lastValueMark: {\r\n      show: false,\r\n      text: {\r\n        show: false,\r\n        style: PolygonType.Fill,\r\n        color: white,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        borderStyle: LineType.Solid,\r\n        borderColor: 'transparent',\r\n        borderSize: 0,\r\n        borderDashedValue: [2, 2],\r\n        paddingLeft: 4,\r\n        paddingTop: 4,\r\n        paddingRight: 4,\r\n        paddingBottom: 4,\r\n        borderRadius: 2\r\n      }\r\n    },\r\n    tooltip: {\r\n      showRule: TooltipShowRule.Always,\r\n      showType: TooltipShowType.Standard,\r\n      showName: true,\r\n      showParams: true,\r\n      defaultValue: 'n/a',\r\n      text: {\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: textColor,\r\n        marginLeft: 10,\r\n        marginTop: 8,\r\n        marginRight: 6,\r\n        marginBottom: 0\r\n      },\r\n      icons: []\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDefaultXAxisStyle (): XAxisStyle {\r\n  return {\r\n    show: true,\r\n    size: 'auto',\r\n    axisLine: {\r\n      show: true,\r\n      color: axisLineColor,\r\n      size: 1\r\n    },\r\n    tickText: {\r\n      show: true,\r\n      color: textColor,\r\n      size: 12,\r\n      family: 'Helvetica Neue',\r\n      weight: 'normal',\r\n      marginStart: 4,\r\n      marginEnd: 4\r\n    },\r\n    tickLine: {\r\n      show: true,\r\n      size: 1,\r\n      length: 3,\r\n      color: axisLineColor\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDefaultYAxisStyle (): YAxisStyle {\r\n  const style = getDefaultXAxisStyle() as YAxisStyle\r\n  style.type = YAxisType.Normal\r\n  style.position = YAxisPosition.Right\r\n  style.inside = false\r\n  style.reverse = false\r\n  return style\r\n}\r\n\r\nfunction getDefaultCrosshairStyle (): CrosshairStyle {\r\n  function item (): CrosshairDirectionStyle {\r\n    return {\r\n      show: true,\r\n      line: {\r\n        show: true,\r\n        style: LineType.Dashed,\r\n        dashedValue: [4, 2],\r\n        size: 1,\r\n        color: textColor\r\n      },\r\n      text: {\r\n        show: true,\r\n        style: PolygonType.Fill,\r\n        color: white,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        borderStyle: LineType.Solid,\r\n        borderDashedValue: [2, 2],\r\n        borderSize: 1,\r\n        borderColor: textColor,\r\n        borderRadius: 2,\r\n        paddingLeft: 4,\r\n        paddingRight: 4,\r\n        paddingTop: 4,\r\n        paddingBottom: 4,\r\n        backgroundColor: textColor\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    show: true,\r\n    horizontal: item(),\r\n    vertical: item()\r\n  }\r\n}\r\n\r\nfunction getDefaultOverlayStyle (): OverlayStyle {\r\n  const pointBorderColor = getAlphaBlue(0.35)\r\n  const alphaBg = getAlphaBlue(0.25)\r\n  function text (): TextStyle {\r\n    return {\r\n      style: PolygonType.Fill,\r\n      color: white,\r\n      size: 12,\r\n      family: 'Helvetica Neue',\r\n      weight: 'normal',\r\n      borderStyle: LineType.Solid,\r\n      borderDashedValue: [2, 2],\r\n      borderSize: 1,\r\n      borderRadius: 2,\r\n      borderColor: blue,\r\n      paddingLeft: 4,\r\n      paddingRight: 4,\r\n      paddingTop: 4,\r\n      paddingBottom: 4,\r\n      backgroundColor: blue\r\n    }\r\n  }\r\n  return {\r\n    point: {\r\n      color: blue,\r\n      borderColor: pointBorderColor,\r\n      borderSize: 1,\r\n      radius: 5,\r\n      activeColor: blue,\r\n      activeBorderColor: pointBorderColor,\r\n      activeBorderSize: 3,\r\n      activeRadius: 5\r\n    },\r\n    line: {\r\n      style: LineType.Solid,\r\n      smooth: false,\r\n      color: blue,\r\n      size: 1,\r\n      dashedValue: [2, 2]\r\n    },\r\n    rect: {\r\n      style: PolygonType.Fill,\r\n      color: alphaBg,\r\n      borderColor: blue,\r\n      borderSize: 1,\r\n      borderRadius: 0,\r\n      borderStyle: LineType.Solid,\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    polygon: {\r\n      style: PolygonType.Fill,\r\n      color: blue,\r\n      borderColor: blue,\r\n      borderSize: 1,\r\n      borderStyle: LineType.Solid,\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    circle: {\r\n      style: PolygonType.Fill,\r\n      color: alphaBg,\r\n      borderColor: blue,\r\n      borderSize: 1,\r\n      borderStyle: LineType.Solid,\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    arc: {\r\n      style: LineType.Solid,\r\n      color: blue,\r\n      size: 1,\r\n      dashedValue: [2, 2]\r\n    },\r\n    text: text(),\r\n    rectText: text()\r\n  }\r\n}\r\n\r\nfunction getDefaultSeparatorStyle (): SeparatorStyle {\r\n  return {\r\n    size: 1,\r\n    color: axisLineColor,\r\n    fill: true,\r\n    activeBackgroundColor: getAlphaBlue(0.08)\r\n  }\r\n}\r\n\r\nexport function getDefaultStyles (): Styles {\r\n  return {\r\n    grid: getDefaultGridStyle(),\r\n    candle: getDefaultCandleStyle(),\r\n    indicator: getDefaultIndicatorStyle(),\r\n    xAxis: getDefaultXAxisStyle(),\r\n    yAxis: getDefaultYAxisStyle(),\r\n    separator: getDefaultSeparatorStyle(),\r\n    crosshair: getDefaultCrosshairStyle(),\r\n    overlay: getDefaultOverlayStyle()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst DEV = process.env.NODE_ENV === 'development'\r\n\r\nfunction log (templateText: string, tagStyle: string, messageStyle: string, api: string, invalidParam: string, append: string): void {\r\n  if (DEV) {\r\n    const apiStr = api !== '' ? `Call api ${api}${invalidParam !== '' || append !== '' ? ', ' : '.'}` : ''\r\n    const invalidParamStr = invalidParam !== '' ? `invalid parameter ${invalidParam}${append !== '' ? ', ' : '.'}` : ''\r\n    const appendStr = append !== '' ? append : ''\r\n    console.log(templateText, tagStyle, messageStyle, apiStr, invalidParamStr, appendStr)\r\n  }\r\n}\r\n\r\nexport function logWarn (api: string, invalidParam: string, append?: string): void {\r\n  log(\r\n    '%cüòë klinecharts warning%c %s%s%s',\r\n    'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#FF9600',\r\n    'color:#FF9600',\r\n    api, invalidParam, append ?? ''\r\n  )\r\n}\r\n\r\nexport function logError (api: string, invalidParam: string, append?: string): void {\r\n  log(\r\n    '%cüòü klinecharts error%c %s%s%s',\r\n    'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#F92855;',\r\n    'color:#F92855;',\r\n    api, invalidParam, append ?? ''\r\n  )\r\n}\r\n\r\nexport function logTag (): void {\r\n  log(\r\n    '%c‚ù§Ô∏è Welcome to klinecharts. Version is __VERSION__',\r\n    'border-radius:4px;border:dashed 1px #1677FF;line-height:70px;padding:0 20px;margin:16px 0;font-size:14px;color:#1677FF;',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n  )\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport function merge (target: any, source: any): void {\r\n  if ((!isObject(target) && !isObject(source))) {\r\n    return\r\n  }\r\n  for (const key in source) {\r\n    if (Object.prototype.hasOwnProperty.call(source, key) as boolean) {\r\n      const targetProp = target[key]\r\n      const sourceProp = source[key]\r\n      if (\r\n        isObject(sourceProp) &&\r\n        isObject(targetProp)\r\n      ) {\r\n        merge(targetProp, sourceProp)\r\n      } else {\r\n        if (isValid(source[key])) {\r\n          target[key] = clone(source[key])\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function clone<T> (target: T): T {\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n\r\n  let copy\r\n  if (isArray(target)) {\r\n    copy = []\r\n  } else {\r\n    copy = {}\r\n  }\r\n  for (const key in target) {\r\n    if (Object.prototype.hasOwnProperty.call(target, key) as boolean) {\r\n      const v = target[key]\r\n      if (isObject(v)) {\r\n        copy[key] = clone(v)\r\n      } else {\r\n        copy[key] = v\r\n      }\r\n    }\r\n  }\r\n  return copy\r\n}\r\n\r\nexport function isArray<T = any> (value: any): value is T[] {\r\n  return Object.prototype.toString.call(value) === '[object Array]'\r\n}\r\n\r\nexport function isFunction<T = (...args: any) => any> (value: any): value is T {\r\n  return typeof value === 'function'\r\n}\r\n\r\nexport function isObject (value: any): value is object {\r\n  return (typeof value === 'object') && isValid(value)\r\n}\r\n\r\nexport function isNumber (value: any): value is number {\r\n  return typeof value === 'number' && !isNaN(value)\r\n}\r\n\r\nexport function isValid<T> (value: T | null | undefined): value is T {\r\n  return value !== null && value !== undefined\r\n}\r\n\r\nexport function isBoolean (value: any): value is boolean {\r\n  return typeof value === 'boolean'\r\n}\r\n\r\nexport function isString (value: any): value is string {\r\n  return typeof value === 'string'\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isNumber, isValid } from './typeChecks'\r\n\r\nconst reEscapeChar = /\\\\(\\\\)?/g\r\nconst rePropName = RegExp(\r\n  '[^.[\\\\]]+' + '|' +\r\n  '\\\\[(?:' +\r\n    '([^\"\\'][^[]*)' + '|' +\r\n    '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' +\r\n  ')\\\\]' + '|' +\r\n  '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))'\r\n  , 'g')\r\n\r\nexport function formatValue (data: unknown, key: string, defaultValue?: unknown): unknown {\r\n  if (isValid(data)) {\r\n    const path: string[] = []\r\n    key.replace(rePropName, (subString: string, ...args: any[]) => {\r\n      let k = subString\r\n      if (isValid(args[1])) {\r\n        k = args[2].replace(reEscapeChar, '$1')\r\n      } else if (isValid(args[0])) {\r\n        k = args[0].trim()\r\n      }\r\n      path.push(k)\r\n      return ''\r\n    })\r\n    let value = data\r\n    let index = 0\r\n    const length = path.length\r\n    while (isValid(value) && index < length) {\r\n      value = value?.[path[index++]]\r\n    }\r\n    return isValid(value) ? value : (defaultValue ?? '--')\r\n  }\r\n  return defaultValue ?? '--'\r\n}\r\n\r\nexport function formatDate (dateTimeFormat: Intl.DateTimeFormat, timestamp: number, format: string): string {\r\n  const dateTimeString = dateTimeFormat.format(new Date(timestamp))\r\n  const dateTimeStringArray = dateTimeString.split(', ')\r\n  const dateStringArray = dateTimeStringArray[0].split('/')\r\n  const timeStringArray = dateTimeStringArray[1].split(':')\r\n  const date = {\r\n    YYYY: dateStringArray[2],\r\n    MM: dateStringArray[0],\r\n    DD: dateStringArray[1],\r\n    HH: timeStringArray[0] === '24' ? '00' : timeStringArray[0],\r\n    mm: timeStringArray[1],\r\n    ss: timeStringArray[2]\r\n  }\r\n  return format.replace(/YYYY|MM|DD|HH|mm|ss/g, key => date[key])\r\n}\r\n\r\nexport function formatPrecision (value: string | number, precision?: number): string {\r\n  const v = +value\r\n  if (isNumber(v)) {\r\n    return v.toFixed(precision ?? 2)\r\n  }\r\n  return `${value}`\r\n}\r\n\r\nexport function formatBigNumber (value: string | number): string {\r\n  const v = +value\r\n  if (isNumber(v)) {\r\n    if (v > 1000000000) {\r\n      return `${+((v / 1000000000).toFixed(3))}B`\r\n    }\r\n    if (v > 1000000) {\r\n      return `${+((v / 1000000).toFixed(3))}M`\r\n    }\r\n    if (v > 1000) {\r\n      return `${+((v / 1000).toFixed(3))}K`\r\n    }\r\n  }\r\n  return `${value}`\r\n}\r\n\r\nexport function formatThousands (value: string | number, sign: string): string {\r\n  const vl = `${value}`\r\n  if (sign.length === 0) {\r\n    return vl\r\n  }\r\n  if (vl.includes('.')) {\r\n    const arr = vl.split('.')\r\n    return `${arr[0].replace(/(\\d)(?=(\\d{3})+$)/g, $1 => `${$1}${sign}`)}.${arr[1]}`\r\n  }\r\n  return vl.replace(/(\\d)(?=(\\d{3})+$)/g, $1 => `${$1}${sign}`)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from './typeChecks'\r\n\r\nlet measureCtx: CanvasRenderingContext2D\r\n\r\n/**\r\n * Get pixel ratio\r\n * @param canvas\r\n * @returns {number}\r\n */\r\nexport function getPixelRatio (canvas: HTMLCanvasElement): number {\r\n  return Math.ceil(canvas.ownerDocument?.defaultView?.devicePixelRatio ?? 2)\r\n}\r\n\r\nexport function createFont (size?: number, weight?: string | number, family?: string): string {\r\n  return `${weight ?? 'normal'} ${size ?? 12}px ${family ?? 'Helvetica Neue'}`\r\n}\r\n\r\n/**\r\n * Measure the width of text\r\n * @param text\r\n * @returns {number}\r\n */\r\nexport function calcTextWidth (text: string, size?: number, weight?: string | number, family?: string): number {\r\n  if (!isValid(measureCtx)) {\r\n    const canvas = document.createElement('canvas')\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    measureCtx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n    measureCtx.scale(pixelRatio, pixelRatio)\r\n  }\r\n  measureCtx.font = createFont(size, weight, family)\r\n  return Math.round(measureCtx.measureText(text).width)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isFunction } from './utils/typeChecks'\r\n\r\nexport type ActionCallback = (data?: any) => void\r\n\r\nexport enum ActionType {\r\n  OnZoom = 'onZoom',\r\n  OnScroll = 'onScroll',\r\n  OnVisibleRangeChange = 'onVisibleRangeChange',\r\n  OnTooltipIconClick = 'onTooltipIconClick',\r\n  OnCrosshairChange = 'onCrosshairChange',\r\n  OnCandleBarClick = 'onCandleBarClick',\r\n  OnPaneDrag = 'onPaneDrag'\r\n}\r\n\r\nexport default class Delegate {\r\n  private _callbacks: ActionCallback[] = []\r\n\r\n  subscribe (callback: ActionCallback): void {\r\n    const index = this._callbacks.indexOf(callback) ?? -1\r\n    if (index < 0) {\r\n      this._callbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  unsubscribe (callback?: ActionCallback): void {\r\n    if (isFunction(callback)) {\r\n      const index = this._callbacks.indexOf(callback) ?? -1\r\n      if (index > -1) {\r\n        this._callbacks.splice(index, 1)\r\n      }\r\n    } else {\r\n      this._callbacks = []\r\n    }\r\n  }\r\n\r\n  execute (data?: any): void {\r\n    this._callbacks.forEach(callback => {\r\n      callback(data)\r\n    })\r\n  }\r\n\r\n  isEmpty (): boolean {\r\n    return this._callbacks.length === 0\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport ExcludePickPartial from '../common/ExcludePickPartial'\r\nimport KLineData from '../common/KLineData'\r\nimport Bounding from '../common/Bounding'\r\nimport VisibleRange from '../common/VisibleRange'\r\nimport BarSpace from '../common/BarSpace'\r\nimport Crosshair from '../common/Crosshair'\r\nimport { IndicatorStyle, IndicatorPolygonStyle, SmoothLineStyle, RectStyle, TextStyle, TooltipData, TooltipIconStyle, LineStyle, LineType, PolygonType } from '../common/Styles'\r\n\r\nimport { XAxis } from './XAxis'\r\nimport { YAxis } from './YAxis'\r\n\r\nimport { formatValue } from '../common/utils/format'\r\nimport { isValid, merge, clone } from '../common/utils/typeChecks'\r\n\r\nimport { ArcAttrs } from '../extension/figure/arc'\r\nimport { RectAttrs } from '../extension/figure/rect'\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nexport enum IndicatorSeries {\r\n  Normal = 'normal',\r\n  Price = 'price',\r\n  Volume = 'volume'\r\n}\r\n\r\nexport type IndicatorFigureStyle = Partial<Omit<SmoothLineStyle, 'style'>> & Partial<Omit<RectStyle, 'style'>> & Partial<TextStyle> & Partial<{ style: LineType[keyof LineType] | PolygonType[keyof PolygonType] }> & {[key: string]: any }\r\n\r\nexport type IndicatorFigureAttrs = Partial<ArcAttrs> & Partial<LineStyle> & Partial<RectAttrs> & Partial<TextAttrs> & { [key: string]: any }\r\n\r\nexport interface IndicatorFigureCallbackBrother<PCN> {\r\n  prev: PCN\r\n  current: PCN\r\n  next: PCN\r\n}\r\n\r\nexport type IndicatorFigureAttrsCallbackCoordinate<D> = IndicatorFigureCallbackBrother<Record<keyof D, number> & { x: number }>\r\n\r\nexport interface IndicatorFigureAttrsCallbackParams<D> {\r\n  coordinate: IndicatorFigureAttrsCallbackCoordinate<D>\r\n  bounding: Bounding\r\n  barSpace: BarSpace\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport interface IndicatorFigureStylesCallbackDataChild<D> {\r\n  kLineData?: KLineData\r\n  indicatorData?: D\r\n}\r\n\r\nexport type IndicatorFigureStylesCallbackData<D> = IndicatorFigureCallbackBrother<IndicatorFigureStylesCallbackDataChild<D>>\r\n\r\nexport type IndicatorFigureAttrsCallback<D> = (params: IndicatorFigureAttrsCallbackParams<D>) => IndicatorFigureAttrs\r\nexport type IndicatorFigureStylesCallback<D> = (data: IndicatorFigureStylesCallbackData<D>, indicator: Indicator<D>, defaultStyles: IndicatorStyle) => IndicatorFigureStyle\r\n\r\nexport interface IndicatorFigure<D = any> {\r\n  key: string\r\n  title?: string\r\n  type?: string\r\n  baseValue?: number\r\n  attrs?: IndicatorFigureAttrsCallback<D>\r\n  styles?: IndicatorFigureStylesCallback<D>\r\n}\r\n\r\nexport type IndicatorRegenerateFiguresCallback<D = any> = (calcParams: any[]) => Array<IndicatorFigure<D>>\r\n\r\nexport interface IndicatorTooltipData {\r\n  name: string\r\n  calcParamsText: string\r\n  icons: TooltipIconStyle[]\r\n  values: TooltipData[]\r\n}\r\n\r\nexport interface IndicatorCreateTooltipDataSourceParams<D = any> {\r\n  kLineDataList: KLineData[]\r\n  indicator: Indicator<D>\r\n  visibleRange: VisibleRange\r\n  bounding: Bounding\r\n  crosshair: Crosshair\r\n  defaultStyles: IndicatorStyle\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport type IndicatorCreateTooltipDataSourceCallback<D = any> = (params: IndicatorCreateTooltipDataSourceParams<D>) => IndicatorTooltipData\r\n\r\nexport interface IndicatorDrawParams<D = any> {\r\n  ctx: CanvasRenderingContext2D\r\n  kLineDataList: KLineData[]\r\n  indicator: Indicator<D>\r\n  visibleRange: VisibleRange\r\n  bounding: Bounding\r\n  barSpace: BarSpace\r\n  defaultStyles: IndicatorStyle\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport type IndicatorDrawCallback<D = any> = (params: IndicatorDrawParams<D>) => boolean\r\nexport type IndicatorCalcCallback<D> = (dataList: KLineData[], indicator: Indicator<D>) => Promise<D[]> | D[]\r\n\r\nexport interface Indicator<D = any> {\r\n  /**\r\n   * Indicator name\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * Short name, for display\r\n   */\r\n  shortName: string\r\n\r\n  /**\r\n   * Precision\r\n   */\r\n  precision: number\r\n\r\n  /**\r\n   * Calculation parameters\r\n   */\r\n  calcParams: any[]\r\n\r\n  /**\r\n   * Whether ohlc column is required\r\n   */\r\n  shouldOhlc: boolean\r\n\r\n  /**\r\n   * Whether large data values need to be formatted, starting from 1000, for example, whether 100000 needs to be formatted with 100K\r\n   */\r\n  shouldFormatBigNumber: boolean\r\n\r\n  /**\r\n   * Whether the indicator is visible\r\n   */\r\n  visible: boolean\r\n\r\n  /**\r\n   * Z index\r\n   */\r\n  zLevel: number\r\n\r\n  /**\r\n   * Extend data\r\n   */\r\n  extendData: any\r\n\r\n  /**\r\n   * Indicator series\r\n   */\r\n  series: IndicatorSeries\r\n\r\n  /**\r\n   * Figure configuration information\r\n   */\r\n  figures: Array<IndicatorFigure<D>>\r\n\r\n  /**\r\n   * Specified minimum value\r\n   */\r\n  minValue: Nullable<number>\r\n\r\n  /**\r\n   * Specified maximum value\r\n   */\r\n  maxValue: Nullable<number>\r\n\r\n  /**\r\n   * Style configuration\r\n   */\r\n  styles: Nullable<Partial<IndicatorStyle>>\r\n\r\n  /**\r\n   * Indicator calculation\r\n   */\r\n  calc: IndicatorCalcCallback<D>\r\n\r\n  /**\r\n   * Regenerate figure configuration\r\n   */\r\n  regenerateFigures: Nullable<IndicatorRegenerateFiguresCallback<D>>\r\n\r\n  /**\r\n   * Create custom tooltip text\r\n   */\r\n  createTooltipDataSource: Nullable<IndicatorCreateTooltipDataSourceCallback>\r\n\r\n  /**\r\n   * Custom draw\r\n   */\r\n  draw: Nullable<IndicatorDrawCallback<D>>\r\n\r\n  /**\r\n   * Calculation result\r\n   */\r\n  result: D[]\r\n}\r\n\r\nexport type IndicatorTemplate<D = any> = ExcludePickPartial<Omit<Indicator<D>, 'result'>, 'name' | 'calc'>\r\n\r\nexport type IndicatorCreate<D = any> = ExcludePickPartial<Omit<Indicator<D>, 'result'>, 'name'>\r\n\r\nexport type IndicatorConstructor<D = any> = new () => IndicatorImp<D>\r\n\r\nexport type EachFigureCallback = (figure: IndicatorFigure, figureStyles: IndicatorFigureStyle) => void\r\n\r\nexport function eachFigures<D> (\r\n  kLineDataList: KLineData[],\r\n  indicator: Indicator<D>,\r\n  dataIndex: number,\r\n  defaultStyles: IndicatorStyle,\r\n  eachFigureCallback: EachFigureCallback\r\n): void {\r\n  const result = indicator.result\r\n  const figures = indicator.figures\r\n  const styles = indicator.styles\r\n\r\n  const circleStyles = formatValue(styles, 'circles', defaultStyles.circles) as IndicatorPolygonStyle[]\r\n  const circleStyleCount = circleStyles.length\r\n\r\n  const barStyles = formatValue(styles, 'bars', defaultStyles.bars) as IndicatorPolygonStyle[]\r\n  const barStyleCount = barStyles.length\r\n\r\n  const lineStyles = formatValue(styles, 'lines', defaultStyles.lines) as SmoothLineStyle[]\r\n  const lineStyleCount = lineStyles.length\r\n\r\n  let circleCount = 0\r\n  let barCount = 0\r\n  let lineCount = 0\r\n\r\n  let defaultFigureStyles\r\n  figures.forEach(figure => {\r\n    switch (figure.type) {\r\n      case 'circle': {\r\n        const styles = circleStyles[circleCount % circleStyleCount]\r\n        defaultFigureStyles = { ...styles, color: styles.noChangeColor }\r\n        circleCount++\r\n        break\r\n      }\r\n      case 'bar': {\r\n        const styles = barStyles[barCount % barStyleCount]\r\n        defaultFigureStyles = { ...styles, color: styles.noChangeColor }\r\n        barCount++\r\n        break\r\n      }\r\n      case 'line': {\r\n        defaultFigureStyles = lineStyles[lineCount % lineStyleCount]\r\n        lineCount++\r\n        break\r\n      }\r\n      default: { break }\r\n    }\r\n    if (isValid(defaultFigureStyles)) {\r\n      const cbData = {\r\n        prev: { kLineData: kLineDataList[dataIndex - 1], indicatorData: result[dataIndex - 1] },\r\n        current: { kLineData: kLineDataList[dataIndex], indicatorData: result[dataIndex] },\r\n        next: { kLineData: kLineDataList[dataIndex + 1], indicatorData: result[dataIndex + 1] }\r\n      }\r\n      const ss = figure.styles?.(cbData, indicator, defaultStyles)\r\n      eachFigureCallback(figure, { ...defaultFigureStyles, ...ss })\r\n    }\r\n  })\r\n}\r\n\r\nexport default abstract class IndicatorImp<D = any> implements Indicator<D> {\r\n  name: string\r\n  shortName: string\r\n  precision: number\r\n  calcParams: any[]\r\n  shouldOhlc: boolean\r\n  shouldFormatBigNumber: boolean\r\n  visible: boolean\r\n  zLevel: number\r\n  extendData: any\r\n  series: IndicatorSeries\r\n  figures: Array<IndicatorFigure<D>>\r\n  minValue: Nullable<number>\r\n  maxValue: Nullable<number>\r\n  styles: Nullable<Partial<IndicatorStyle>>\r\n  regenerateFigures: Nullable<IndicatorRegenerateFiguresCallback<D>>\r\n  createTooltipDataSource: Nullable<IndicatorCreateTooltipDataSourceCallback>\r\n  draw: Nullable<IndicatorDrawCallback<D>>\r\n\r\n  result: D[] = []\r\n\r\n  private _precisionFlag: boolean = false\r\n\r\n  constructor (indicator: IndicatorTemplate) {\r\n    const {\r\n      name, shortName, series, calcParams, figures, precision,\r\n      shouldOhlc, shouldFormatBigNumber, visible, zLevel,\r\n      minValue, maxValue, styles, extendData,\r\n      regenerateFigures, createTooltipDataSource, draw\r\n    } = indicator\r\n    this.name = name\r\n    this.shortName = shortName ?? name\r\n    this.series = series ?? IndicatorSeries.Normal\r\n    this.precision = precision ?? 4\r\n    this.calcParams = calcParams ?? []\r\n    this.figures = figures ?? []\r\n    this.shouldOhlc = shouldOhlc ?? false\r\n    this.shouldFormatBigNumber = shouldFormatBigNumber ?? false\r\n    this.visible = visible ?? true\r\n    this.zLevel = zLevel ?? 0\r\n    this.minValue = minValue ?? null\r\n    this.maxValue = maxValue ?? null\r\n    this.styles = clone(styles ?? {})\r\n    this.extendData = extendData\r\n    this.regenerateFigures = regenerateFigures ?? null\r\n    this.createTooltipDataSource = createTooltipDataSource ?? null\r\n    this.draw = draw ?? null\r\n  }\r\n\r\n  setShortName (shortName: string): boolean {\r\n    if (this.shortName !== shortName) {\r\n      this.shortName = shortName\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setSeries (series: IndicatorSeries): boolean {\r\n    if (this.series !== series) {\r\n      this.series = series\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setPrecision (precision: number, flag?: boolean): boolean {\r\n    const f = flag ?? false\r\n    const optimalPrecision = Math.floor(precision)\r\n    if (optimalPrecision !== this.precision && precision >= 0 && (!f || (f && !this._precisionFlag))) {\r\n      this.precision = optimalPrecision\r\n      if (!f) {\r\n        this._precisionFlag = true\r\n      }\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setCalcParams (params: any[]): boolean {\r\n    this.calcParams = params\r\n    this.figures = this.regenerateFigures?.(params) ?? this.figures\r\n    return true\r\n  }\r\n\r\n  setShouldOhlc (shouldOhlc: boolean): boolean {\r\n    if (this.shouldOhlc !== shouldOhlc) {\r\n      this.shouldOhlc = shouldOhlc\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setShouldFormatBigNumber (shouldFormatBigNumber: boolean): boolean {\r\n    if (this.shouldFormatBigNumber !== shouldFormatBigNumber) {\r\n      this.shouldFormatBigNumber = shouldFormatBigNumber\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setVisible (visible: boolean): boolean {\r\n    if (this.visible !== visible) {\r\n      this.visible = visible\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setZLevel (zLevel: number): boolean {\r\n    if (this.zLevel !== zLevel) {\r\n      this.zLevel = zLevel\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setStyles (styles: Partial<IndicatorStyle>): boolean {\r\n    merge(this.styles, styles)\r\n    return true\r\n  }\r\n\r\n  setExtendData (extendData: any): boolean {\r\n    if (this.extendData !== extendData) {\r\n      this.extendData = extendData\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setFigures (figures: IndicatorFigure[]): boolean {\r\n    if (this.figures !== figures) {\r\n      this.figures = figures\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setMinValue (value: Nullable<number>): boolean {\r\n    if (this.minValue !== value) {\r\n      this.minValue = value\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setMaxValue (value: Nullable<number>): boolean {\r\n    if (this.maxValue !== value) {\r\n      this.maxValue = value\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setRegenerateFigures (callback: Nullable<IndicatorRegenerateFiguresCallback>): boolean {\r\n    if (this.regenerateFigures !== callback) {\r\n      this.regenerateFigures = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setCreateTooltipDataSource (callback: Nullable<IndicatorCreateTooltipDataSourceCallback>): boolean {\r\n    if (this.createTooltipDataSource !== callback) {\r\n      this.createTooltipDataSource = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setDraw (callback: Nullable<IndicatorDrawCallback>): boolean {\r\n    if (this.draw !== callback) {\r\n      this.draw = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  async calcIndicator (dataList: KLineData[]): Promise<boolean> {\r\n    try {\r\n      const result = await this.calc(dataList, this)\r\n      this.result = result\r\n      return true\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  abstract calc (dataList: KLineData[], indicator: Indicator<D>): D[] | Promise<D[]>\r\n\r\n  static extend<D> (template: IndicatorTemplate): IndicatorConstructor<D> {\r\n    class Custom extends IndicatorImp<D> {\r\n      constructor () {\r\n        super(template)\r\n      }\r\n\r\n      calc (dataList: KLineData[], indicator: Indicator<D>): D[] | Promise<D[]> {\r\n        return template.calc(dataList, indicator)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport DeepPartial from '../common/DeepPartial'\r\nimport ExcludePickPartial from '../common/ExcludePickPartial'\r\nimport Point from '../common/Point'\r\nimport Coordinate from '../common/Coordinate'\r\nimport Bounding from '../common/Bounding'\r\nimport BarSpace from '../common/BarSpace'\r\nimport Precision from '../common/Precision'\r\nimport { OverlayStyle } from '../common/Styles'\r\nimport { MouseTouchEvent } from '../common/SyntheticEvent'\r\nimport { clone, isNumber, isString, merge } from '../common/utils/typeChecks'\r\n\r\nimport TimeScaleStore from '../store/TimeScaleStore'\r\n\r\nimport { XAxis } from './XAxis'\r\nimport { YAxis } from './YAxis'\r\n\r\nexport enum OverlayMode {\r\n  Normal = 'normal',\r\n  WeakMagnet = 'weak_magnet',\r\n  StrongMagnet = 'strong_magnet'\r\n}\r\n\r\nexport interface OverlayPerformEventParams {\r\n  currentStep: number\r\n  mode: OverlayMode\r\n  points: Array<Partial<Point>>\r\n  performPointIndex: number\r\n  performPoint: Partial<Point>\r\n}\r\n\r\nexport type OverlayFigureIgnoreEventType = 'mouseClickEvent' | 'mouseRightClickEvent' | 'tapEvent' | 'doubleTapEvent' | 'mouseDownEvent' | 'touchStartEvent' | 'mouseMoveEvent' | 'touchMoveEvent' | 'mouseDoubleClickEvent'\r\n\r\nexport function getAllOverlayFigureIgnoreEventTypes (): OverlayFigureIgnoreEventType[] {\r\n  return [\r\n    'mouseClickEvent',\r\n    'mouseDoubleClickEvent',\r\n    'mouseRightClickEvent',\r\n    'tapEvent',\r\n    'doubleTapEvent',\r\n    'mouseDownEvent',\r\n    'touchStartEvent',\r\n    'mouseMoveEvent',\r\n    'touchMoveEvent'\r\n  ]\r\n}\r\n\r\nexport interface OverlayFigure {\r\n  key?: string\r\n  type: string\r\n  attrs: any\r\n  styles?: any\r\n  ignoreEvent?: boolean | OverlayFigureIgnoreEventType[]\r\n}\r\n\r\nexport interface OverlayCreateFiguresCallbackParams {\r\n  overlay: Overlay\r\n  coordinates: Coordinate[]\r\n  bounding: Bounding\r\n  barSpace: BarSpace\r\n  precision: Precision\r\n  thousandsSeparator: string\r\n  dateTimeFormat: Intl.DateTimeFormat\r\n  defaultStyles: OverlayStyle\r\n  xAxis: Nullable<XAxis>\r\n  yAxis: Nullable<YAxis>\r\n}\r\n\r\nexport interface OverlayEvent extends Partial<MouseTouchEvent> {\r\n  figureKey?: string\r\n  figureIndex?: number\r\n  overlay: Overlay\r\n}\r\n\r\nexport type OverlayEventCallback = (event: OverlayEvent) => boolean\r\n\r\nexport type OverlayCreateFiguresCallback = (params: OverlayCreateFiguresCallbackParams) => OverlayFigure | OverlayFigure[]\r\n\r\nexport interface Overlay {\r\n  /**\r\n   * Unique identification\r\n   */\r\n  id: string\r\n\r\n  /**\r\n   * Group id\r\n   */\r\n  groupId: string\r\n\r\n  /**\r\n   * Pane id\r\n   */\r\n  paneId: string\r\n\r\n  /**\r\n   * Name\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * Total number of steps required to complete mouse operation\r\n   */\r\n  totalStep: number\r\n\r\n  /**\r\n   * Current step\r\n   */\r\n  currentStep: number\r\n\r\n  /**\r\n   * Whether it is locked. When it is true, it will not respond to events\r\n   */\r\n  lock: boolean\r\n\r\n  /**\r\n   * Whether the overlay is visible\r\n   */\r\n  visible: boolean\r\n\r\n  /**\r\n   * Draw level\r\n   */\r\n  zLevel: number\r\n\r\n  /**\r\n   * Whether the default figure corresponding to the point is required\r\n   */\r\n  needDefaultPointFigure: boolean\r\n\r\n  /**\r\n   * Whether the default figure on the Y axis is required\r\n   */\r\n  needDefaultXAxisFigure: boolean\r\n\r\n  /**\r\n   * Whether the default figure on the X axis is required\r\n   */\r\n  needDefaultYAxisFigure: boolean\r\n\r\n  /**\r\n   * Mode\r\n   */\r\n  mode: OverlayMode\r\n\r\n  /**\r\n   * When mode is weak_magnet is the response distance\r\n   */\r\n  modeSensitivity: number\r\n\r\n  /**\r\n   * Time and value information\r\n   */\r\n  points: Array<Partial<Point>>\r\n\r\n  /**\r\n   * Extended Data\r\n   */\r\n  extendData: any\r\n\r\n  /**\r\n   * The style information and format are consistent with the overlay in the unified configuration\r\n   */\r\n  styles: Nullable<DeepPartial<OverlayStyle>>\r\n\r\n  /**\r\n   * Create figures corresponding to points\r\n   */\r\n  createPointFigures: Nullable<OverlayCreateFiguresCallback>\r\n\r\n  /**\r\n   * Create figures on the Y axis\r\n   */\r\n  createXAxisFigures: Nullable<OverlayCreateFiguresCallback>\r\n\r\n  /**\r\n   * Create figures on the X axis\r\n   */\r\n  createYAxisFigures: Nullable<OverlayCreateFiguresCallback>\r\n\r\n  /**\r\n   * Special handling callbacks when pressing events\r\n   */\r\n  performEventPressedMove: Nullable<(params: OverlayPerformEventParams) => void>\r\n\r\n  /**\r\n   * In drawing, special handling callback when moving events\r\n   */\r\n  performEventMoveForDrawing: Nullable<(params: OverlayPerformEventParams) => void>\r\n\r\n  /**\r\n   * Start drawing event\r\n   */\r\n  onDrawStart: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * In drawing event\r\n   */\r\n  onDrawing: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Draw End Event\r\n   */\r\n  onDrawEnd: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Click event\r\n   */\r\n  onClick: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Double Click event\r\n   */\r\n  onDoubleClick: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Right click event\r\n   */\r\n  onRightClick: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Pressed move start event\r\n   */\r\n  onPressedMoveStart: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Pressed moving event\r\n   */\r\n  onPressedMoving: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Pressed move end event\r\n   */\r\n  onPressedMoveEnd: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Mouse enter event\r\n   */\r\n  onMouseEnter: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Mouse leave event\r\n   */\r\n  onMouseLeave: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Removed event\r\n   */\r\n  onRemoved: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Selected event\r\n   */\r\n  onSelected: Nullable<OverlayEventCallback>\r\n\r\n  /**\r\n   * Deselected event\r\n   */\r\n  onDeselected: Nullable<OverlayEventCallback>\r\n}\r\n\r\nexport type OverlayTemplate = ExcludePickPartial<Omit<Overlay, 'id' | 'groupId' | 'paneId' | 'points' | 'currentStep'>, 'name'>\r\nexport type OverlayCreate = ExcludePickPartial<Omit<Overlay, 'paneId' | 'currentStep' | 'totalStep' | 'createPointFigures' | 'createXAxisFigures' | 'createYAxisFigures' | 'performEventPressedMove' | 'performEventMoveForDrawing'>, 'name'>\r\nexport type OverlayRemove = Partial<Pick<Overlay, 'id' | 'groupId' | 'name'>>\r\nexport type OverlayInnerConstructor = new () => OverlayImp\r\nexport type OverlayConstructor = new () => Overlay\r\n\r\nconst OVERLAY_DRAW_STEP_START = 1\r\nconst OVERLAY_DRAW_STEP_FINISHED = -1\r\n\r\nexport const OVERLAY_ID_PREFIX = 'overlay_'\r\n\r\nexport const OVERLAY_FIGURE_KEY_PREFIX = 'overlay_figure_'\r\n\r\nexport const OVERLAY_ACTIVE_Z_LEVEL = Number.MAX_SAFE_INTEGER\r\n\r\nexport default abstract class OverlayImp implements Overlay {\r\n  id: string\r\n  groupId: string\r\n  paneId: string\r\n  name: string\r\n  totalStep: number\r\n  currentStep: number = OVERLAY_DRAW_STEP_START\r\n  needDefaultPointFigure: boolean\r\n  needDefaultXAxisFigure: boolean\r\n  needDefaultYAxisFigure: boolean\r\n  lock: boolean\r\n  visible: boolean\r\n  zLevel: number\r\n  mode: OverlayMode\r\n  modeSensitivity: number\r\n  points: Array<Partial<Point>> = []\r\n  extendData: any\r\n  styles: Nullable<DeepPartial<OverlayStyle>>\r\n  createPointFigures: Nullable<OverlayCreateFiguresCallback>\r\n  createXAxisFigures: Nullable<OverlayCreateFiguresCallback>\r\n  createYAxisFigures: Nullable<OverlayCreateFiguresCallback>\r\n  performEventPressedMove: Nullable<(params: OverlayPerformEventParams) => void>\r\n  performEventMoveForDrawing: Nullable<(params: OverlayPerformEventParams) => void>\r\n  onDrawStart: Nullable<OverlayEventCallback>\r\n  onDrawing: Nullable<OverlayEventCallback>\r\n  onDrawEnd: Nullable<OverlayEventCallback>\r\n  onClick: Nullable<OverlayEventCallback>\r\n  onDoubleClick: Nullable<OverlayEventCallback>\r\n  onRightClick: Nullable<OverlayEventCallback>\r\n  onPressedMoveStart: Nullable<OverlayEventCallback>\r\n  onPressedMoving: Nullable<OverlayEventCallback>\r\n  onPressedMoveEnd: Nullable<OverlayEventCallback>\r\n  onMouseEnter: Nullable<OverlayEventCallback>\r\n  onMouseLeave: Nullable<OverlayEventCallback>\r\n  onRemoved: Nullable<OverlayEventCallback>\r\n  onSelected: Nullable<OverlayEventCallback>\r\n  onDeselected: Nullable<OverlayEventCallback>\r\n\r\n  private _prevPressedPoint: Nullable<Partial<Point>> = null\r\n  private _prevPressedPoints: Array<Partial<Point>> = []\r\n\r\n  constructor (overlay: OverlayTemplate) {\r\n    const {\r\n      mode, modeSensitivity, extendData, styles,\r\n      name, totalStep, lock, visible, zLevel,\r\n      needDefaultPointFigure, needDefaultXAxisFigure, needDefaultYAxisFigure,\r\n      createPointFigures, createXAxisFigures, createYAxisFigures,\r\n      performEventPressedMove, performEventMoveForDrawing,\r\n      onDrawStart, onDrawing, onDrawEnd,\r\n      onClick, onDoubleClick, onRightClick,\r\n      onPressedMoveStart, onPressedMoving, onPressedMoveEnd,\r\n      onMouseEnter, onMouseLeave, onRemoved,\r\n      onSelected, onDeselected\r\n    } = overlay\r\n    this.name = name\r\n    this.totalStep = (!isNumber(totalStep) || totalStep < 2) ? 1 : totalStep\r\n    this.lock = lock ?? false\r\n    this.visible = visible ?? true\r\n    this.zLevel = zLevel ?? 0\r\n    this.needDefaultPointFigure = needDefaultPointFigure ?? false\r\n    this.needDefaultXAxisFigure = needDefaultXAxisFigure ?? false\r\n    this.needDefaultYAxisFigure = needDefaultYAxisFigure ?? false\r\n    this.mode = mode ?? OverlayMode.Normal\r\n    this.modeSensitivity = modeSensitivity ?? 8\r\n    this.extendData = extendData\r\n    this.styles = clone(styles ?? {})\r\n    this.createPointFigures = createPointFigures ?? null\r\n    this.createXAxisFigures = createXAxisFigures ?? null\r\n    this.createYAxisFigures = createYAxisFigures ?? null\r\n    this.performEventPressedMove = performEventPressedMove ?? null\r\n    this.performEventMoveForDrawing = performEventMoveForDrawing ?? null\r\n    this.onDrawStart = onDrawStart ?? null\r\n    this.onDrawing = onDrawing ?? null\r\n    this.onDrawEnd = onDrawEnd ?? null\r\n    this.onClick = onClick ?? null\r\n    this.onDoubleClick = onDoubleClick ?? null\r\n    this.onRightClick = onRightClick ?? null\r\n    this.onPressedMoveStart = onPressedMoveStart ?? null\r\n    this.onPressedMoving = onPressedMoving ?? null\r\n    this.onPressedMoveEnd = onPressedMoveEnd ?? null\r\n    this.onMouseEnter = onMouseEnter ?? null\r\n    this.onMouseLeave = onMouseLeave ?? null\r\n    this.onRemoved = onRemoved ?? null\r\n    this.onSelected = onSelected ?? null\r\n    this.onDeselected = onDeselected ?? null\r\n  }\r\n\r\n  setId (id: string): boolean {\r\n    if (!isString(this.id)) {\r\n      this.id = id\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setGroupId (groupId: string): boolean {\r\n    if (!isString(this.groupId)) {\r\n      this.groupId = groupId\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setPaneId (paneId: string): void {\r\n    this.paneId = paneId\r\n  }\r\n\r\n  setExtendData (extendData: any): boolean {\r\n    if (extendData !== this.extendData) {\r\n      this.extendData = extendData\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setStyles (styles: DeepPartial<OverlayStyle>): boolean {\r\n    merge(this.styles, styles)\r\n    return true\r\n  }\r\n\r\n  setPoints (points: Array<Partial<Point>>): boolean {\r\n    if (points.length > 0) {\r\n      let repeatTotalStep: number\r\n      this.points = [...points]\r\n      if (points.length >= this.totalStep - 1) {\r\n        this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n        repeatTotalStep = this.totalStep - 1\r\n      } else {\r\n        this.currentStep = points.length + 1\r\n        repeatTotalStep = points.length\r\n      }\r\n      // Prevent wrong drawing due to wrong points\r\n      if (this.performEventMoveForDrawing !== null) {\r\n        for (let i = 0; i < repeatTotalStep; i++) {\r\n          this.performEventMoveForDrawing({\r\n            currentStep: i + 2,\r\n            mode: this.mode,\r\n            points: this.points,\r\n            performPointIndex: i,\r\n            performPoint: this.points[i]\r\n          })\r\n        }\r\n      }\r\n      if (this.currentStep === OVERLAY_DRAW_STEP_FINISHED && this.performEventPressedMove !== null) {\r\n        this.performEventPressedMove({\r\n          currentStep: this.currentStep,\r\n          mode: this.mode,\r\n          points: this.points,\r\n          performPointIndex: this.points.length - 1,\r\n          performPoint: this.points[this.points.length - 1]\r\n        })\r\n      }\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setLock (lock: boolean): boolean {\r\n    if (this.lock !== lock) {\r\n      this.lock = lock\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setVisible (visible: boolean): boolean {\r\n    if (this.visible !== visible) {\r\n      this.visible = visible\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setZLevel (zLevel: number): boolean {\r\n    if (this.zLevel !== zLevel) {\r\n      this.zLevel = zLevel\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setMode (mode: OverlayMode): boolean {\r\n    if (this.mode !== mode) {\r\n      this.mode = mode\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setModeSensitivity (modeSensitivity: number): boolean {\r\n    if (this.modeSensitivity !== modeSensitivity) {\r\n      this.modeSensitivity = modeSensitivity\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnDrawStartCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onDrawStart !== callback) {\r\n      this.onDrawStart = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnDrawingCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onDrawing !== callback) {\r\n      this.onDrawing = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnDrawEndCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onDrawEnd !== callback) {\r\n      this.onDrawEnd = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnClickCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onClick !== callback) {\r\n      this.onClick = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnDoubleClickCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onDoubleClick !== callback) {\r\n      this.onDoubleClick = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnRightClickCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onRightClick !== callback) {\r\n      this.onRightClick = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnPressedMoveStartCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onPressedMoveStart !== callback) {\r\n      this.onPressedMoveStart = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnPressedMovingCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onPressedMoving !== callback) {\r\n      this.onPressedMoving = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnPressedMoveEndCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onPressedMoveEnd !== callback) {\r\n      this.onPressedMoveEnd = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnMouseEnterCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onMouseEnter !== callback) {\r\n      this.onMouseEnter = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnMouseLeaveCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onMouseLeave !== callback) {\r\n      this.onMouseLeave = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnRemovedCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onRemoved !== callback) {\r\n      this.onRemoved = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnSelectedCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onSelected !== callback) {\r\n      this.onSelected = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setOnDeselectedCallback (callback: Nullable<OverlayEventCallback>): boolean {\r\n    if (this.onDeselected !== callback) {\r\n      this.onDeselected = callback\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  nextStep (): void {\r\n    if (this.currentStep === this.totalStep - 1) {\r\n      this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n    } else {\r\n      this.currentStep++\r\n    }\r\n  }\r\n\r\n  forceComplete (): void {\r\n    this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n  }\r\n\r\n  isDrawing (): boolean {\r\n    return this.currentStep !== OVERLAY_DRAW_STEP_FINISHED\r\n  }\r\n\r\n  isStart (): boolean {\r\n    return this.currentStep === OVERLAY_DRAW_STEP_START\r\n  }\r\n\r\n  eventMoveForDrawing (point: Partial<Point>): void {\r\n    const pointIndex = this.currentStep - 1\r\n    const newPoint: Partial<Point> = {}\r\n    if (isNumber(point.timestamp)) {\r\n      newPoint.timestamp = point.timestamp\r\n    }\r\n    if (isNumber(point.dataIndex)) {\r\n      newPoint.dataIndex = point.dataIndex\r\n    }\r\n    if (isNumber(point.value)) {\r\n      newPoint.value = point.value\r\n    }\r\n    this.points[pointIndex] = newPoint\r\n    this.performEventMoveForDrawing?.({\r\n      currentStep: this.currentStep,\r\n      mode: this.mode,\r\n      points: this.points,\r\n      performPointIndex: pointIndex,\r\n      performPoint: newPoint\r\n    })\r\n  }\r\n\r\n  eventPressedPointMove (point: Partial<Point>, pointIndex: number): void {\r\n    if (isNumber(point.dataIndex)) {\r\n      this.points[pointIndex].dataIndex = point.dataIndex\r\n      this.points[pointIndex].timestamp = point.timestamp\r\n    }\r\n    if (isNumber(point.value)) {\r\n      this.points[pointIndex].value = point.value\r\n    }\r\n    this.performEventPressedMove?.({\r\n      currentStep: this.currentStep,\r\n      points: this.points,\r\n      mode: this.mode,\r\n      performPointIndex: pointIndex,\r\n      performPoint: this.points[pointIndex]\r\n    })\r\n  }\r\n\r\n  startPressedMove (point: Partial<Point>): void {\r\n    this._prevPressedPoint = { ...point }\r\n    this._prevPressedPoints = clone(this.points)\r\n  }\r\n\r\n  eventPressedOtherMove (point: Partial<Point>, timeScaleStore: TimeScaleStore): void {\r\n    if (this._prevPressedPoint !== null) {\r\n      let difDataIndex: number\r\n      if (isNumber(point.dataIndex) && isNumber(this._prevPressedPoint.dataIndex)) {\r\n        difDataIndex = point.dataIndex - this._prevPressedPoint.dataIndex\r\n      }\r\n      let difValue: number\r\n      if (isNumber(point.value) && isNumber(this._prevPressedPoint.value)) {\r\n        difValue = point.value - this._prevPressedPoint.value\r\n      }\r\n      this.points = this._prevPressedPoints.map(p => {\r\n        if (isNumber(p.dataIndex) && isNumber(p.timestamp)) {\r\n          p.dataIndex = timeScaleStore.timestampToDataIndex(p.timestamp)\r\n        }\r\n        const newPoint = { ...p }\r\n        if (isNumber(difDataIndex) && isNumber(p.dataIndex)) {\r\n          newPoint.dataIndex = p.dataIndex + difDataIndex\r\n          newPoint.timestamp = timeScaleStore.dataIndexToTimestamp(newPoint.dataIndex) ?? undefined\r\n        }\r\n        if (isNumber(difValue) && isNumber(p.value)) {\r\n          newPoint.value = p.value + difValue\r\n        }\r\n        return newPoint\r\n      })\r\n    }\r\n  }\r\n\r\n  static extend (template: OverlayTemplate): OverlayInnerConstructor {\r\n    class Custom extends OverlayImp {\r\n      constructor () {\r\n        super(template)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DeepPartial from './common/DeepPartial'\r\nimport { Styles } from './common/Styles'\r\nimport { formatDate, formatBigNumber } from './common/utils/format'\r\n\r\nimport { IndicatorCreate } from './component/Indicator'\r\nimport { PaneOptions } from './pane/types'\r\n\r\nexport enum FormatDateType {\r\n  Tooltip,\r\n  Crosshair,\r\n  XAxis\r\n}\r\n\r\nexport type FormatDate = (dateTimeFormat: Intl.DateTimeFormat, timestamp: number, format: string, type: FormatDateType) => string\r\n\r\nexport type FormatBigNumber = (value: string | number) => string\r\n\r\nexport interface CustomApi {\r\n  formatDate: FormatDate\r\n  formatBigNumber: FormatBigNumber\r\n}\r\n\r\nexport function getDefaultCustomApi (): CustomApi {\r\n  return {\r\n    formatDate,\r\n    formatBigNumber\r\n  }\r\n}\r\n\r\nexport const defaultLocale = 'en-US'\r\n\r\nexport interface Locales {\r\n  time: string\r\n  open: string\r\n  high: string\r\n  low: string\r\n  close: string\r\n  volume: string\r\n  change: string\r\n  turnover: string\r\n  [key: string]: string\r\n}\r\n\r\nexport const enum LayoutChildType {\r\n  Candle = 'candle',\r\n  Indicator = 'indicator',\r\n  XAxis = 'xAxis'\r\n}\r\n\r\nexport interface LayoutChild {\r\n  type: LayoutChildType\r\n  content?: Array<string | IndicatorCreate>\r\n  options?: PaneOptions\r\n}\r\n\r\nexport interface Options {\r\n  layout?: LayoutChild[]\r\n  locale?: string\r\n  timezone?: string\r\n  styles?: string | DeepPartial<Styles>\r\n  customApi?: Partial<CustomApi>\r\n  thousandsSeparator?: string\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nlet baseId = 1\r\nlet prevIdTimestamp = new Date().getTime()\r\n\r\nexport function createId (prefix?: string): string {\r\n  const timestamp = new Date().getTime()\r\n  if (timestamp === prevIdTimestamp) {\r\n    ++baseId\r\n  } else {\r\n    baseId = 1\r\n  }\r\n  prevIdTimestamp = timestamp\r\n  return `${prefix ?? ''}${timestamp}_${baseId}`\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * Create dom\r\n * @param tagName\r\n * @param styles\r\n * @return {*}\r\n */\r\nexport function createDom<K extends keyof HTMLElementTagNameMap> (tagName: K, styles?: Partial<CSSStyleDeclaration>): HTMLElementTagNameMap[K] {\r\n  const dom = document.createElement(tagName)\r\n  const s = styles ?? {}\r\n  for (const key in s) {\r\n    (dom.style)[key] = s[key] ?? ''\r\n  }\r\n  return dom\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * Binary search for the nearest result\r\n * @param dataList\r\n * @param valueKey\r\n * @param targetValue\r\n * @return {number}\r\n */\r\nexport function binarySearchNearest (dataList: any[], valueKey: string, targetValue: any): number {\r\n  let left = 0\r\n  let right = 0\r\n  for (right = dataList.length - 1; left !== right;) {\r\n    const midIndex = Math.floor((right + left) / 2)\r\n    const mid = right - left\r\n    const midValue = dataList[midIndex][valueKey]\r\n    if (targetValue === dataList[left][valueKey]) {\r\n      return left\r\n    }\r\n    if (targetValue === dataList[right][valueKey]) {\r\n      return right\r\n    }\r\n    if (targetValue === midValue) {\r\n      return midIndex\r\n    }\r\n\r\n    if (targetValue > midValue) {\r\n      left = midIndex\r\n    } else {\r\n      right = midIndex\r\n    }\r\n\r\n    if (mid <= 2) {\r\n      break\r\n    }\r\n  }\r\n  return left\r\n}\r\n\r\n/**\r\n * ‰ºòÂåñÊï∞Â≠ó\r\n * @param value\r\n * @return {number|number}\r\n */\r\nexport function nice (value: number): number {\r\n  const exponent = Math.floor(log10(value))\r\n  const exp10 = index10(exponent)\r\n  const f = value / exp10 // 1 <= f < 10\r\n  let nf = 0\r\n  if (f < 1.5) {\r\n    nf = 1\r\n  } else if (f < 2.5) {\r\n    nf = 2\r\n  } else if (f < 3.5) {\r\n    nf = 3\r\n  } else if (f < 4.5) {\r\n    nf = 4\r\n  } else if (f < 5.5) {\r\n    nf = 5\r\n  } else if (f < 6.5) {\r\n    nf = 6\r\n  } else {\r\n    nf = 8\r\n  }\r\n  value = nf * exp10\r\n  return exponent >= -20 ? +value.toFixed(exponent < 0 ? -exponent : 0) : value\r\n}\r\n\r\n/**\r\n * ÂõõËàç‰∫îÂÖ•\r\n * @param value\r\n * @param precision\r\n * @return {number}\r\n */\r\nexport function round (value: number, precision: number): number {\r\n  if (precision == null) {\r\n    precision = 10\r\n  }\r\n  precision = Math.min(Math.max(0, precision), 20)\r\n  const v = (+value).toFixed(precision)\r\n  return +v\r\n}\r\n\r\n/**\r\n * Ëé∑ÂèñÂ∞èÊï∞‰ΩçÊï∞\r\n * @param value\r\n * @return {number|number}\r\n */\r\nexport function getPrecision (value: number): number {\r\n  const str = value.toString()\r\n  const eIndex = str.indexOf('e')\r\n  if (eIndex > 0) {\r\n    const precision = +str.slice(eIndex + 1)\r\n    return precision < 0 ? -precision : 0\r\n  } else {\r\n    const dotIndex = str.indexOf('.')\r\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex\r\n  }\r\n}\r\n\r\nexport function getMaxMin<D> (dataList: D[], maxKey: string, minKey: string): number[] {\r\n  const maxMin = [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER]\r\n  dataList.forEach(data => {\r\n    maxMin[0] = Math.max(data[maxKey] ?? data, maxMin[0])\r\n    maxMin[1] = Math.min(data[minKey] ?? data, maxMin[1])\r\n  })\r\n  return maxMin\r\n}\r\n\r\n/**\r\n * 10‰∏∫Â∫ïÁöÑÂØπÊï∞ÂáΩÊï∞\r\n * @param value\r\n * @return {number}\r\n */\r\nexport function log10 (value: number): number {\r\n  return Math.log(value) / Math.log(10)\r\n}\r\n\r\n/**\r\n * 10ÁöÑÊåáÊï∞ÂáΩÊï∞\r\n * @param value\r\n * @return {number}\r\n */\r\nexport function index10 (value: number): number {\r\n  return Math.pow(10, value)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default interface VisibleRange {\r\n  readonly from: number\r\n  readonly to: number\r\n  readonly realFrom: number\r\n  readonly realTo: number\r\n}\r\n\r\nexport function getDefaultVisibleRange (): VisibleRange {\r\n  return { from: 0, to: 0, realFrom: 0, realTo: 0 }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Coordinate from '../common/Coordinate'\r\nimport KLineData from '../common/KLineData'\r\nimport BarSpace from '../common/BarSpace'\r\nimport VisibleRange, { getDefaultVisibleRange } from '../common/VisibleRange'\r\nimport LoadMoreCallback from '../common/LoadMoreCallback'\r\nimport { ActionType } from '../common/Action'\r\n\r\nimport { logWarn } from '../common/utils/logger'\r\nimport { binarySearchNearest } from '../common/utils/number'\r\nimport { isNumber, isString } from '../common/utils/typeChecks'\r\n\r\nimport ChartStore from './ChartStore'\r\n\r\ninterface LeftRightSide {\r\n  left: number\r\n  right: number\r\n}\r\n\r\nconst BarSpaceLimitConstants = {\r\n  MIN: 1,\r\n  MAX: 50\r\n}\r\n\r\nconst enum ScrollLimitRole {\r\n  BarCount,\r\n  Distance\r\n}\r\n\r\nconst DEFAULT_BAR_SPACE = 6\r\n\r\nconst DEFAULT_OFFSET_RIGHT_DISTANCE = 50\r\n\r\nexport default class TimeScaleStore {\r\n  /**\r\n   * Root store\r\n   */\r\n  private readonly _chartStore: ChartStore\r\n\r\n  /**\r\n   * Time format\r\n   */\r\n  private _dateTimeFormat: Intl.DateTimeFormat = this._buildDateTimeFormat() as Intl.DateTimeFormat\r\n\r\n  /**\r\n   * Scale enabled flag\r\n   */\r\n  private _zoomEnabled: boolean = true\r\n\r\n  /**\r\n   * Scroll enabled flag\r\n   */\r\n  private _scrollEnabled: boolean = true\r\n\r\n  /**\r\n   * Is loading data flag\r\n   */\r\n  private _loading: boolean = true\r\n\r\n  /**\r\n   * Load more data callback\r\n   */\r\n  private _loadMoreCallback: Nullable<LoadMoreCallback> = null\r\n\r\n  /**\r\n   * Whether there are more flag\r\n   */\r\n  private _more: boolean = true\r\n\r\n  /**\r\n   * Total space of drawing area\r\n   */\r\n  private _totalBarSpace: number = 0\r\n\r\n  /**\r\n   * Space occupied by a single piece of data\r\n   */\r\n  private _barSpace: number = DEFAULT_BAR_SPACE\r\n\r\n  /**\r\n   * The space of the draw bar\r\n   */\r\n  private _gapBarSpace: number\r\n\r\n  /**\r\n   * Distance from the last data to the right of the drawing area\r\n   */\r\n  private _offsetRightDistance = DEFAULT_OFFSET_RIGHT_DISTANCE\r\n\r\n  /**\r\n   * The number of bar calculated from the distance of the last data to the right of the drawing area\r\n   */\r\n  private _lastBarRightSideDiffBarCount: number\r\n\r\n  /**\r\n   * The number of bar to the right of the drawing area from the last data when scrolling starts\r\n   */\r\n  private _startLastBarRightSideDiffBarCount = 0\r\n\r\n  /**\r\n   * Scroll limit role\r\n   */\r\n  private _scrollLimitRole: ScrollLimitRole = ScrollLimitRole.BarCount\r\n\r\n  /**\r\n   * Scroll to the leftmost and rightmost visible bar\r\n   */\r\n  private readonly _minVisibleBarCount: LeftRightSide = { left: 2, right: 2 }\r\n\r\n  /**\r\n   * Scroll to the leftmost and rightmost distance\r\n   */\r\n  private readonly _maxOffsetDistance: LeftRightSide = { left: 50, right: 50 }\r\n\r\n  /**\r\n   * Start and end points of visible area data index\r\n   */\r\n  private _visibleRange: VisibleRange = getDefaultVisibleRange()\r\n\r\n  constructor (chartStore: ChartStore) {\r\n    this._chartStore = chartStore\r\n    this._gapBarSpace = this._calcGapBarSpace()\r\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace\r\n  }\r\n\r\n  private _calcGapBarSpace (): number {\r\n    const rateSpace = Math.floor(this._barSpace * 0.82)\r\n    const floorSpace = Math.floor(this._barSpace)\r\n    const optimalSpace = Math.min(rateSpace, floorSpace - 1)\r\n    return Math.max(1, optimalSpace)\r\n  }\r\n\r\n  /**\r\n   * adjust visible range\r\n   */\r\n  adjustVisibleRange (): void {\r\n    const dataList = this._chartStore.getDataList()\r\n    const dataCount = dataList.length\r\n    const barCount = this._totalBarSpace / this._barSpace\r\n\r\n    let leftMinVisibleBarCount: number\r\n    let rightMinVisibleBarCount: number\r\n\r\n    if (this._scrollLimitRole === ScrollLimitRole.Distance) {\r\n      leftMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.right) / this._barSpace\r\n      rightMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.left) / this._barSpace\r\n    } else {\r\n      leftMinVisibleBarCount = this._minVisibleBarCount.left\r\n      rightMinVisibleBarCount = this._minVisibleBarCount.right\r\n    }\r\n\r\n    leftMinVisibleBarCount = Math.max(0, leftMinVisibleBarCount)\r\n    rightMinVisibleBarCount = Math.max(0, rightMinVisibleBarCount)\r\n\r\n    const maxRightOffsetBarCount = barCount - Math.min(leftMinVisibleBarCount, dataCount)\r\n    if (this._lastBarRightSideDiffBarCount > maxRightOffsetBarCount) {\r\n      this._lastBarRightSideDiffBarCount = maxRightOffsetBarCount\r\n    }\r\n\r\n    const minRightOffsetBarCount = -dataCount + Math.min(rightMinVisibleBarCount, dataCount)\r\n    if (this._lastBarRightSideDiffBarCount < minRightOffsetBarCount) {\r\n      this._lastBarRightSideDiffBarCount = minRightOffsetBarCount\r\n    }\r\n\r\n    let to = Math.round(this._lastBarRightSideDiffBarCount + dataCount + 0.5)\r\n    if (to > dataCount) {\r\n      to = dataCount\r\n    }\r\n    let from = Math.round(to - barCount) - 1\r\n    if (from < 0) {\r\n      from = 0\r\n    }\r\n    const realFrom = this._lastBarRightSideDiffBarCount > 0 ? Math.round(dataCount + this._lastBarRightSideDiffBarCount - barCount) - 1 : from\r\n    this._visibleRange = { from, to, realFrom, realTo: to }\r\n    this._chartStore.getActionStore().execute(ActionType.OnVisibleRangeChange, this._visibleRange)\r\n    this._chartStore.adjustVisibleDataList()\r\n    // More processing and loading, more loading if there are callback methods and no data is being loaded\r\n    if (from === 0 && this._more && !this._loading && this._loadMoreCallback !== null) {\r\n      this._loading = true\r\n      const firstData = dataList[0]\r\n      this._loadMoreCallback(firstData?.timestamp ?? null)\r\n    }\r\n  }\r\n\r\n  setMore (more: boolean): TimeScaleStore {\r\n    this._more = more\r\n    return this\r\n  }\r\n\r\n  setLoading (loading: boolean): TimeScaleStore {\r\n    this._loading = loading\r\n    return this\r\n  }\r\n\r\n  getDateTimeFormat (): Intl.DateTimeFormat {\r\n    return this._dateTimeFormat\r\n  }\r\n\r\n  _buildDateTimeFormat (timezone?: string): Nullable<Intl.DateTimeFormat> {\r\n    const options: Intl.DateTimeFormatOptions = {\r\n      hour12: false,\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    }\r\n    if (isString(timezone)) {\r\n      options.timeZone = timezone\r\n    }\r\n    let dateTimeFormat: Nullable<Intl.DateTimeFormat> = null\r\n    try {\r\n      dateTimeFormat = new Intl.DateTimeFormat('en', options)\r\n    } catch (e) {\r\n      logWarn('', '', 'Timezone is error!!!')\r\n    }\r\n    return dateTimeFormat\r\n  }\r\n\r\n  setTimezone (timezone: string): void {\r\n    const dateTimeFormat: Nullable<Intl.DateTimeFormat> = this._buildDateTimeFormat(timezone)\r\n    if (dateTimeFormat !== null) {\r\n      this._dateTimeFormat = dateTimeFormat\r\n    }\r\n  }\r\n\r\n  getTimezone (): string {\r\n    return this._dateTimeFormat.resolvedOptions().timeZone\r\n  }\r\n\r\n  getBarSpace (): BarSpace {\r\n    return {\r\n      bar: this._barSpace,\r\n      halfBar: this._barSpace / 2,\r\n      gapBar: this._gapBarSpace,\r\n      halfGapBar: this._gapBarSpace / 2\r\n    }\r\n  }\r\n\r\n  setBarSpace (barSpace: number, adjustBeforeFunc?: () => void): void {\r\n    if (barSpace < BarSpaceLimitConstants.MIN || barSpace > BarSpaceLimitConstants.MAX || this._barSpace === barSpace) {\r\n      return\r\n    }\r\n    this._barSpace = barSpace\r\n    this._gapBarSpace = this._calcGapBarSpace()\r\n    adjustBeforeFunc?.()\r\n    this.adjustVisibleRange()\r\n    this._chartStore.getTooltipStore().recalculateCrosshair(true)\r\n    this._chartStore.getChart().adjustPaneViewport(false, true, true, true)\r\n  }\r\n\r\n  setTotalBarSpace (totalSpace: number): TimeScaleStore {\r\n    if (this._totalBarSpace !== totalSpace) {\r\n      this._totalBarSpace = totalSpace\r\n      this.adjustVisibleRange()\r\n      this._chartStore.getTooltipStore().recalculateCrosshair(true)\r\n    }\r\n    return this\r\n  }\r\n\r\n  setOffsetRightDistance (distance: number, isUpdate?: boolean): TimeScaleStore {\r\n    this._offsetRightDistance = this._scrollLimitRole === ScrollLimitRole.Distance ? Math.min(this._maxOffsetDistance.right, distance) : distance\r\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace\r\n    if (isUpdate ?? false) {\r\n      this.adjustVisibleRange()\r\n      this._chartStore.getTooltipStore().recalculateCrosshair(true)\r\n      this._chartStore.getChart().adjustPaneViewport(false, true, true, true)\r\n    }\r\n    return this\r\n  }\r\n\r\n  resetOffsetRightDistance (): void {\r\n    this.setOffsetRightDistance(this._offsetRightDistance)\r\n  }\r\n\r\n  getInitialOffsetRightDistance (): number {\r\n    return this._offsetRightDistance\r\n  }\r\n\r\n  getOffsetRightDistance (): number {\r\n    return Math.max(0, this._lastBarRightSideDiffBarCount * this._barSpace)\r\n  }\r\n\r\n  getLastBarRightSideDiffBarCount (): number {\r\n    return this._lastBarRightSideDiffBarCount\r\n  }\r\n\r\n  setLastBarRightSideDiffBarCount (barCount: number): TimeScaleStore {\r\n    this._lastBarRightSideDiffBarCount = barCount\r\n    return this\r\n  }\r\n\r\n  setMaxOffsetLeftDistance (distance: number): TimeScaleStore {\r\n    this._scrollLimitRole = ScrollLimitRole.Distance\r\n    this._maxOffsetDistance.left = distance\r\n    return this\r\n  }\r\n\r\n  setMaxOffsetRightDistance (distance: number): TimeScaleStore {\r\n    this._scrollLimitRole = ScrollLimitRole.Distance\r\n    this._maxOffsetDistance.right = distance\r\n    return this\r\n  }\r\n\r\n  setLeftMinVisibleBarCount (barCount: number): TimeScaleStore {\r\n    this._scrollLimitRole = ScrollLimitRole.BarCount\r\n    this._minVisibleBarCount.left = barCount\r\n    return this\r\n  }\r\n\r\n  setRightMinVisibleBarCount (barCount: number): TimeScaleStore {\r\n    this._scrollLimitRole = ScrollLimitRole.BarCount\r\n    this._minVisibleBarCount.right = barCount\r\n    return this\r\n  }\r\n\r\n  getVisibleRange (): VisibleRange {\r\n    return this._visibleRange\r\n  }\r\n\r\n  startScroll (): void {\r\n    this._startLastBarRightSideDiffBarCount = this._lastBarRightSideDiffBarCount\r\n  }\r\n\r\n  scroll (distance: number): void {\r\n    if (!this._scrollEnabled) {\r\n      return\r\n    }\r\n    const distanceBarCount = distance / this._barSpace\r\n    this._chartStore.getActionStore().execute(ActionType.OnScroll)\r\n    this._lastBarRightSideDiffBarCount = this._startLastBarRightSideDiffBarCount - distanceBarCount\r\n    this.adjustVisibleRange()\r\n    this._chartStore.getTooltipStore().recalculateCrosshair(true)\r\n    this._chartStore.getChart().adjustPaneViewport(false, true, true, true)\r\n  }\r\n\r\n  getDataByDataIndex (dataIndex: number): Nullable<KLineData> {\r\n    return this._chartStore.getDataList()[dataIndex] ?? null\r\n  }\r\n\r\n  coordinateToFloatIndex (x: number): number {\r\n    const dataCount = this._chartStore.getDataList().length\r\n    const deltaFromRight = (this._totalBarSpace - x) / this._barSpace\r\n    const index = dataCount + this._lastBarRightSideDiffBarCount - deltaFromRight\r\n    return Math.round(index * 1000000) / 1000000\r\n  }\r\n\r\n  dataIndexToTimestamp (dataIndex: number): Nullable<number> {\r\n    const data = this.getDataByDataIndex(dataIndex)\r\n    return data?.timestamp ?? null\r\n  }\r\n\r\n  timestampToDataIndex (timestamp: number): number {\r\n    const dataList = this._chartStore.getDataList()\r\n    if (dataList.length === 0) {\r\n      return 0\r\n    }\r\n    return binarySearchNearest(dataList, 'timestamp', timestamp)\r\n  }\r\n\r\n  dataIndexToCoordinate (dataIndex: number): number {\r\n    const dataCount = this._chartStore.getDataList().length\r\n    const deltaFromRight = dataCount + this._lastBarRightSideDiffBarCount - dataIndex\r\n    return Math.floor(this._totalBarSpace - (deltaFromRight - 0.5) * this._barSpace) - 0.5\r\n  }\r\n\r\n  coordinateToDataIndex (x: number): number {\r\n    return Math.ceil(this.coordinateToFloatIndex(x)) - 1\r\n  }\r\n\r\n  zoom (scale: number, coordinate?: Partial<Coordinate>): void {\r\n    if (!this._zoomEnabled) {\r\n      return\r\n    }\r\n    if (!isNumber(coordinate?.x)) {\r\n      const crosshair = this._chartStore.getTooltipStore().getCrosshair()\r\n      coordinate = { x: crosshair?.x ?? this._totalBarSpace / 2 }\r\n    }\r\n    this._chartStore.getActionStore().execute(ActionType.OnZoom)\r\n    const floatIndex = this.coordinateToFloatIndex(coordinate?.x as number)\r\n    const barSpace = this._barSpace + scale * (this._barSpace / 10)\r\n    this.setBarSpace(barSpace, () => {\r\n      this._lastBarRightSideDiffBarCount += (floatIndex - this.coordinateToFloatIndex(coordinate?.x as number))\r\n    })\r\n  }\r\n\r\n  setZoomEnabled (enabled: boolean): TimeScaleStore {\r\n    this._zoomEnabled = enabled\r\n    return this\r\n  }\r\n\r\n  getZoomEnabled (): boolean {\r\n    return this._zoomEnabled\r\n  }\r\n\r\n  setScrollEnabled (enabled: boolean): TimeScaleStore {\r\n    this._scrollEnabled = enabled\r\n    return this\r\n  }\r\n\r\n  getScrollEnabled (): boolean {\r\n    return this._scrollEnabled\r\n  }\r\n\r\n  setLoadMoreCallback (callback: LoadMoreCallback): TimeScaleStore {\r\n    this._loadMoreCallback = callback\r\n    return this\r\n  }\r\n\r\n  clear (): void {\r\n    this._more = true\r\n    this._loading = true\r\n    this._visibleRange = getDefaultVisibleRange()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\r\n\r\ninterface Avp {\r\n  avp?: number\r\n}\r\n\r\n/**\r\n * average price\r\n */\r\nconst averagePrice: IndicatorTemplate<Avp> = {\r\n  name: 'AVP',\r\n  shortName: 'AVP',\r\n  series: IndicatorSeries.Price,\r\n  precision: 2,\r\n  figures: [\r\n    { key: 'avp', title: 'AVP: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[]) => {\r\n    let totalTurnover = 0\r\n    let totalVolume = 0\r\n    return dataList.map((kLineData: KLineData) => {\r\n      const avp: Avp = {}\r\n      const turnover = kLineData?.turnover ?? 0\r\n      const volume = kLineData?.volume ?? 0\r\n      totalTurnover += turnover\r\n      totalVolume += volume\r\n      if (totalVolume !== 0) {\r\n        avp.avp = totalTurnover / totalVolume\r\n      }\r\n      return avp\r\n    })\r\n  }\r\n}\r\n\r\nexport default averagePrice\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorStyle, PolygonType } from '../../common/Styles'\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport { Indicator, IndicatorTemplate, IndicatorFigureStylesCallbackData } from '../../component/Indicator'\r\n\r\ninterface Ao {\r\n  ao?: number\r\n}\r\n\r\nconst awesomeOscillator: IndicatorTemplate<Ao> = {\r\n  name: 'AO',\r\n  shortName: 'AO',\r\n  calcParams: [5, 34],\r\n  figures: [{\r\n    key: 'ao',\r\n    title: 'AO: ',\r\n    type: 'bar',\r\n    baseValue: 0,\r\n    styles: (data: IndicatorFigureStylesCallbackData<Ao>, indicator: Indicator<Ao>, defaultStyles: IndicatorStyle) => {\r\n      const { prev, current } = data\r\n      const prevAo = prev.indicatorData?.ao ?? Number.MIN_SAFE_INTEGER\r\n      const currentAo = current.indicatorData?.ao ?? Number.MIN_SAFE_INTEGER\r\n      let color: string\r\n      if (currentAo > prevAo) {\r\n        color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor) as string\r\n      } else {\r\n        color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor) as string\r\n      }\r\n      const style = currentAo > prevAo ? PolygonType.Stroke : PolygonType.Fill\r\n      return { color, style, borderColor: color }\r\n    }\r\n  }],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Ao>) => {\r\n    const params = indicator.calcParams\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    let shortSum = 0\r\n    let longSum = 0\r\n    let short = 0\r\n    let long = 0\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const ao: Ao = {}\r\n      const middle = (kLineData.low + kLineData.high) / 2\r\n      shortSum += middle\r\n      longSum += middle\r\n      if (i >= params[0] - 1) {\r\n        short = shortSum / params[0]\r\n        const agoKLineData = dataList[i - (params[0] - 1)]\r\n        shortSum -= ((agoKLineData.low + agoKLineData.high) / 2)\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        long = longSum / params[1]\r\n        const agoKLineData = dataList[i - (params[1] - 1)]\r\n        longSum -= ((agoKLineData.low + agoKLineData.high) / 2)\r\n      }\r\n      if (i >= maxPeriod - 1) {\r\n        ao.ao = short - long\r\n      }\r\n      return ao\r\n    })\r\n  }\r\n}\r\n\r\nexport default awesomeOscillator\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Bias {\r\n  bias1?: number\r\n  bias2?: number\r\n  bias3?: number\r\n}\r\n\r\n/**\r\n * BIAS\r\n * ‰πñÁ¶ªÁéá=[(ÂΩìÊó•Êî∂Áõò‰ª∑-NÊó•Âπ≥Âùá‰ª∑)/NÊó•Âπ≥Âùá‰ª∑]*100%\r\n */\r\nconst bias: IndicatorTemplate<Bias> = {\r\n  name: 'BIAS',\r\n  shortName: 'BIAS',\r\n  calcParams: [6, 12, 24],\r\n  figures: [\r\n    { key: 'bias1', title: 'BIAS6: ', type: 'line' },\r\n    { key: 'bias2', title: 'BIAS12: ', type: 'line' },\r\n    { key: 'bias3', title: 'BIAS24: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params: any[]) => {\r\n    return params.map((p: number, i: number) => {\r\n      return { key: `bias${i + 1}`, title: `BIAS${p}: `, type: 'line' }\r\n    })\r\n  },\r\n  calc: (dataList: KLineData[], indicator: Indicator<Bias>) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const closeSums: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const bias: Bias = {}\r\n      const close = kLineData.close\r\n      params.forEach((p, index) => {\r\n        closeSums[index] = (closeSums[index] ?? 0) + close\r\n        if (i >= p - 1) {\r\n          const mean = closeSums[index] / params[index]\r\n          bias[figures[index].key] = (close - mean) / mean * 100\r\n\r\n          closeSums[index] -= dataList[i - (p - 1)].close\r\n        }\r\n      })\r\n      return bias\r\n    })\r\n  }\r\n}\r\n\r\nexport default bias\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\r\n\r\ninterface Boll {\r\n  up?: number\r\n  mid?: number\r\n  dn?: number\r\n}\r\n\r\n/**\r\n * ËÆ°ÁÆóÂ∏ÉÊûóÊåáÊ†á‰∏≠ÁöÑÊ†áÂáÜÂ∑Æ\r\n * @param dataList\r\n * @param ma\r\n * @return {number}\r\n */\r\nfunction getBollMd (dataList: KLineData[], ma: number): number {\r\n  const dataSize = dataList.length\r\n  let sum = 0\r\n  dataList.forEach(data => {\r\n    const closeMa = data.close - ma\r\n    sum += closeMa * closeMa\r\n  })\r\n  sum = Math.abs(sum)\r\n  return Math.sqrt(sum / dataSize)\r\n}\r\n\r\n/**\r\n * BOLL\r\n */\r\nconst bollingerBands: IndicatorTemplate<Boll> = {\r\n  name: 'BOLL',\r\n  shortName: 'BOLL',\r\n  series: IndicatorSeries.Price,\r\n  calcParams: [20, 2],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'up', title: 'UP: ', type: 'line' },\r\n    { key: 'mid', title: 'MID: ', type: 'line' },\r\n    { key: 'dn', title: 'DN: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Boll>) => {\r\n    const params = indicator.calcParams\r\n    const p = params[0] - 1\r\n    let closeSum = 0\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const close = kLineData.close\r\n      const boll: Boll = {}\r\n      closeSum += close\r\n      if (i >= p) {\r\n        boll.mid = closeSum / params[0]\r\n        const md = getBollMd(dataList.slice(i - p, i + 1), boll.mid)\r\n        boll.up = boll.mid + params[1] * md\r\n        boll.dn = boll.mid - params[1] * md\r\n        closeSum -= dataList[i - p].close\r\n      }\r\n      return boll\r\n    })\r\n  }\r\n}\r\n\r\nexport default bollingerBands\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Brar {\r\n  br?: number\r\n  ar?: number\r\n}\r\n\r\n/**\r\n * BRAR\r\n * ÈªòËÆ§ÂèÇÊï∞ÊòØ26„ÄÇ\r\n * ÂÖ¨ÂºèNÊó•BR=NÊó•ÂÜÖÔºàHÔºçCYÔºâ‰πãÂíåÈô§‰ª•NÊó•ÂÜÖÔºàCYÔºçLÔºâ‰πãÂíå*100Ôºå\r\n * ÂÖ∂‰∏≠ÔºåH‰∏∫ÂΩìÊó•ÊúÄÈ´ò‰ª∑ÔºåL‰∏∫ÂΩìÊó•ÊúÄ‰Ωé‰ª∑ÔºåCY‰∏∫Ââç‰∏Ä‰∫§ÊòìÊó•ÁöÑÊî∂Áõò‰ª∑ÔºåN‰∏∫ËÆæÂÆöÁöÑÊó∂Èó¥ÂèÇÊï∞„ÄÇ\r\n * NÊó•AR=(NÊó•ÂÜÖÔºàHÔºçOÔºâ‰πãÂíåÈô§‰ª•NÊó•ÂÜÖÔºàOÔºçLÔºâ‰πãÂíå)*100Ôºå\r\n * ÂÖ∂‰∏≠ÔºåH‰∏∫ÂΩìÊó•ÊúÄÈ´ò‰ª∑ÔºåL‰∏∫ÂΩìÊó•ÊúÄ‰Ωé‰ª∑ÔºåO‰∏∫ÂΩìÊó•ÂºÄÁõò‰ª∑ÔºåN‰∏∫ËÆæÂÆöÁöÑÊó∂Èó¥ÂèÇÊï∞\r\n *\r\n */\r\nconst brar: IndicatorTemplate<Brar> = {\r\n  name: 'BRAR',\r\n  shortName: 'BRAR',\r\n  calcParams: [26],\r\n  figures: [\r\n    { key: 'br', title: 'BR: ', type: 'line' },\r\n    { key: 'ar', title: 'AR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Brar>) => {\r\n    const params = indicator.calcParams\r\n    let hcy = 0\r\n    let cyl = 0\r\n    let ho = 0\r\n    let ol = 0\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const brar: Brar = {}\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      const open = kLineData.open\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      ho += (high - open)\r\n      ol += (open - low)\r\n      hcy += (high - prevClose)\r\n      cyl += (prevClose - low)\r\n      if (i >= params[0] - 1) {\r\n        if (ol !== 0) {\r\n          brar.ar = ho / ol * 100\r\n        } else {\r\n          brar.ar = 0\r\n        }\r\n        if (cyl !== 0) {\r\n          brar.br = hcy / cyl * 100\r\n        } else {\r\n          brar.br = 0\r\n        }\r\n        const agoKLineData = dataList[i - (params[0] - 1)]\r\n        const agoHigh = agoKLineData.high\r\n        const agoLow = agoKLineData.low\r\n        const agoOpen = agoKLineData.open\r\n        const agoPreClose = (dataList[i - params[0]] ?? dataList[i - (params[0] - 1)]).close\r\n        hcy -= (agoHigh - agoPreClose)\r\n        cyl -= (agoPreClose - agoLow)\r\n        ho -= (agoHigh - agoOpen)\r\n        ol -= (agoOpen - agoLow)\r\n      }\r\n      return brar\r\n    })\r\n  }\r\n}\r\n\r\nexport default brar\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\r\n\r\ninterface Bbi {\r\n  bbi?: number\r\n}\r\n\r\n/**\r\n * Â§öÁ©∫ÊåáÊ†á\r\n * ÂÖ¨Âºè: BBI = (MA(CLOSE, M) + MA(CLOSE, N) + MA(CLOSE, O) + MA(CLOSE, P)) / 4\r\n *\r\n */\r\nconst bullAndBearIndex: IndicatorTemplate<Bbi> = {\r\n  name: 'BBI',\r\n  shortName: 'BBI',\r\n  series: IndicatorSeries.Price,\r\n  precision: 2,\r\n  calcParams: [3, 6, 12, 24],\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'bbi', title: 'BBI: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Bbi>) => {\r\n    const params = indicator.calcParams\r\n    const maxPeriod = Math.max(...params)\r\n    const closeSums: number[] = []\r\n    const mas: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const bbi: Bbi = {}\r\n      const close = kLineData.close\r\n      params.forEach((p: number, index: number) => {\r\n        closeSums[index] = (closeSums[index] ?? 0) + close\r\n        if (i >= p - 1) {\r\n          mas[index] = closeSums[index] / p\r\n          closeSums[index] -= dataList[i - (p - 1)].close\r\n        }\r\n      })\r\n      if (i >= maxPeriod - 1) {\r\n        let maSum = 0\r\n        mas.forEach(ma => {\r\n          maSum += ma\r\n        })\r\n        bbi.bbi = maSum / 4\r\n      }\r\n      return bbi\r\n    })\r\n  }\r\n}\r\n\r\nexport default bullAndBearIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Cci {\r\n  cci?: number\r\n}\r\n\r\n/**\r\n * CCI\r\n * CCIÔºàNÊó•Ôºâ=ÔºàTPÔºçMAÔºâ√∑MD√∑0.015\r\n * ÂÖ∂‰∏≠ÔºåTP=ÔºàÊúÄÈ´ò‰ª∑+ÊúÄ‰Ωé‰ª∑+Êî∂Áõò‰ª∑Ôºâ√∑3\r\n * MA=ËøëNÊó•TP‰ª∑ÁöÑÁ¥ØËÆ°‰πãÂíå√∑N\r\n * MD=ËøëNÊó•TP - ÂΩìÂâçMAÁªùÂØπÂÄºÁöÑÁ¥ØËÆ°‰πãÂíå√∑N\r\n *\r\n */\r\nconst commodityChannelIndex: IndicatorTemplate<Cci> = {\r\n  name: 'CCI',\r\n  shortName: 'CCI',\r\n  calcParams: [20],\r\n  figures: [\r\n    { key: 'cci', title: 'CCI: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Cci>) => {\r\n    const params = indicator.calcParams\r\n    const p = params[0] - 1\r\n    let tpSum = 0\r\n    const tpList: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const cci: Cci = {}\r\n      const tp = (kLineData.high + kLineData.low + kLineData.close) / 3\r\n      tpSum += tp\r\n      tpList.push(tp)\r\n      if (i >= p) {\r\n        const maTp = tpSum / params[0]\r\n        const sliceTpList = tpList.slice(i - p, i + 1)\r\n        let sum = 0\r\n        sliceTpList.forEach(tp => {\r\n          sum += Math.abs(tp - maTp)\r\n        })\r\n        const md = sum / params[0]\r\n        cci.cci = md !== 0 ? (tp - maTp) / md / 0.015 : 0\r\n        const agoTp = (dataList[i - p].high + dataList[i - p].low + dataList[i - p].close) / 3\r\n        tpSum -= agoTp\r\n      }\r\n      return cci\r\n    })\r\n  }\r\n}\r\n\r\nexport default commodityChannelIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http:*www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Cr {\r\n  cr?: number\r\n  ma1?: number\r\n  ma2?: number\r\n  ma3?: number\r\n  ma4?: number\r\n}\r\n\r\n/**\r\n * MID:=REF(HIGH+LOW,1)/2;\r\n * CR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\r\n * MA1:REF(MA(CR,M1),M1/2.5+1);\r\n * MA2:REF(MA(CR,M2),M2/2.5+1);\r\n * MA3:REF(MA(CR,M3),M3/2.5+1);\r\n * MA4:REF(MA(CR,M4),M4/2.5+1);\r\n * MIDËµãÂÄº:(Êò®Êó•ÊúÄÈ´ò‰ª∑+Êò®Êó•ÊúÄ‰Ωé‰ª∑)/2\r\n * ËæìÂá∫Â∏¶Áä∂ËÉΩÈáèÁ∫ø:0ÂíåÊúÄÈ´ò‰ª∑-MIDÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•Á¥ØÂíå/0ÂíåMID-ÊúÄ‰Ωé‰ª∑ÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•Á¥ØÂíå*100\r\n * ËæìÂá∫MA1:M1(5)/2.5+1Êó•ÂâçÁöÑCRÁöÑM1(5)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA2:M2(10)/2.5+1Êó•ÂâçÁöÑCRÁöÑM2(10)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA3:M3(20)/2.5+1Êó•ÂâçÁöÑCRÁöÑM3(20)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA4:M4/2.5+1Êó•ÂâçÁöÑCRÁöÑM4Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst currentRatio: IndicatorTemplate<Cr> = {\r\n  name: 'CR',\r\n  shortName: 'CR',\r\n  calcParams: [26, 10, 20, 40, 60],\r\n  figures: [\r\n    { key: 'cr', title: 'CR: ', type: 'line' },\r\n    { key: 'ma1', title: 'MA1: ', type: 'line' },\r\n    { key: 'ma2', title: 'MA2: ', type: 'line' },\r\n    { key: 'ma3', title: 'MA3: ', type: 'line' },\r\n    { key: 'ma4', title: 'MA4: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Cr>) => {\r\n    const params = indicator.calcParams as number[]\r\n\r\n    const ma1ForwardPeriod = Math.ceil(params[1] / 2.5 + 1)\r\n    const ma2ForwardPeriod = Math.ceil(params[2] / 2.5 + 1)\r\n    const ma3ForwardPeriod = Math.ceil(params[3] / 2.5 + 1)\r\n    const ma4ForwardPeriod = Math.ceil(params[4] / 2.5 + 1)\r\n    let ma1Sum = 0\r\n    const ma1List: number[] = []\r\n    let ma2Sum = 0\r\n    const ma2List: number[] = []\r\n    let ma3Sum = 0\r\n    const ma3List: number[] = []\r\n    let ma4Sum = 0\r\n    const ma4List: number[] = []\r\n    const result: Cr[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const cr: Cr = {}\r\n      const prevData = dataList[i - 1] ?? kLineData\r\n      const prevMid = (prevData.high + prevData.close + prevData.low + prevData.open) / 4\r\n\r\n      const highSubPreMid = Math.max(0, kLineData.high - prevMid)\r\n\r\n      const preMidSubLow = Math.max(0, prevMid - kLineData.low)\r\n\r\n      if (i >= params[0] - 1) {\r\n        if (preMidSubLow !== 0) {\r\n          cr.cr = highSubPreMid / preMidSubLow * 100\r\n        } else {\r\n          cr.cr = 0\r\n        }\r\n        ma1Sum += cr.cr\r\n        ma2Sum += cr.cr\r\n        ma3Sum += cr.cr\r\n        ma4Sum += cr.cr\r\n        if (i >= params[0] + params[1] - 2) {\r\n          ma1List.push(ma1Sum / params[1])\r\n          if (i >= params[0] + params[1] + ma1ForwardPeriod - 3) {\r\n            cr.ma1 = ma1List[ma1List.length - 1 - ma1ForwardPeriod]\r\n          }\r\n          ma1Sum -= (result[i - (params[1] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[2] - 2) {\r\n          ma2List.push(ma2Sum / params[2])\r\n          if (i >= params[0] + params[2] + ma2ForwardPeriod - 3) {\r\n            cr.ma2 = ma2List[ma2List.length - 1 - ma2ForwardPeriod]\r\n          }\r\n          ma2Sum -= (result[i - (params[2] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[3] - 2) {\r\n          ma3List.push(ma3Sum / params[3])\r\n          if (i >= params[0] + params[3] + ma3ForwardPeriod - 3) {\r\n            cr.ma3 = ma3List[ma3List.length - 1 - ma3ForwardPeriod]\r\n          }\r\n          ma3Sum -= (result[i - (params[3] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[4] - 2) {\r\n          ma4List.push(ma4Sum / params[4])\r\n          if (i >= params[0] + params[4] + ma4ForwardPeriod - 3) {\r\n            cr.ma4 = ma4List[ma4List.length - 1 - ma4ForwardPeriod]\r\n          }\r\n          ma4Sum -= (result[i - (params[4] - 1)].cr ?? 0)\r\n        }\r\n      }\r\n      result.push(cr)\r\n    })\r\n    return result\r\n  }\r\n}\r\nexport default currentRatio\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Dma {\r\n  dma?: number\r\n  ama?: number\r\n}\r\n\r\n/**\r\n * DMA\r\n * ÂÖ¨ÂºèÔºöDIF:MA(CLOSE,N1)-MA(CLOSE,N2);DIFMA:MA(DIF,M)\r\n */\r\nconst differentOfMovingAverage: IndicatorTemplate<Dma> = {\r\n  name: 'DMA',\r\n  shortName: 'DMA',\r\n  calcParams: [10, 50, 10],\r\n  figures: [\r\n    { key: 'dma', title: 'DMA: ', type: 'line' },\r\n    { key: 'ama', title: 'AMA: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Dma>) => {\r\n    const params = indicator.calcParams as number[]\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    let closeSum1 = 0\r\n    let closeSum2 = 0\r\n    let dmaSum = 0\r\n    const result: Dma[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const dma: Dma = {}\r\n      const close = kLineData.close\r\n      closeSum1 += close\r\n      closeSum2 += close\r\n      let ma1 = 0\r\n      let ma2 = 0\r\n      if (i >= params[0] - 1) {\r\n        ma1 = closeSum1 / params[0]\r\n        closeSum1 -= dataList[i - (params[0] - 1)].close\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        ma2 = closeSum2 / params[1]\r\n        closeSum2 -= dataList[i - (params[1] - 1)].close\r\n      }\r\n\r\n      if (i >= maxPeriod - 1) {\r\n        const dif = ma1 - ma2\r\n        dma.dma = dif\r\n        dmaSum += dif\r\n        if (i >= maxPeriod + params[2] - 2) {\r\n          dma.ama = dmaSum / params[2]\r\n          dmaSum -= (result[i - (params[2] - 1)].dma ?? 0)\r\n        }\r\n      }\r\n      result.push(dma)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default differentOfMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Dmi {\r\n  pdi?: number\r\n  mdi?: number\r\n  adx?: number\r\n  adxr?: number\r\n}\r\n\r\n/**\r\n * DMI\r\n *\r\n * MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N)\r\n * HD :=HIGH-REF(HIGH,1);\r\n * LD :=REF(LOW,1)-LOW;\r\n * DMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\r\n * DMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\r\n *\r\n * PDI: DMP*100/MTR;\r\n * MDI: DMM*100/MTR;\r\n * ADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\r\n * ADXR:EXPMEMA(ADX,MM);\r\n * ÂÖ¨ÂºèÂê´‰πâÔºö\r\n * MTRËµãÂÄº:ÊúÄÈ´ò‰ª∑-ÊúÄ‰Ωé‰ª∑ÂíåÊúÄÈ´ò‰ª∑-Êò®Êî∂ÁöÑÁªùÂØπÂÄºÁöÑËæÉÂ§ßÂÄºÂíåÊò®Êî∂-ÊúÄ‰Ωé‰ª∑ÁöÑÁªùÂØπÂÄºÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * HDËµãÂÄº:ÊúÄÈ´ò‰ª∑-Êò®Êó•ÊúÄÈ´ò‰ª∑\r\n * LDËµãÂÄº:Êò®Êó•ÊúÄ‰Ωé‰ª∑-ÊúÄ‰Ωé‰ª∑\r\n * DMPËµãÂÄº:Â¶ÇÊûúHD>0Âπ∂‰∏îHD>LD,ËøîÂõûHD,Âê¶ÂàôËøîÂõû0ÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * DMMËµãÂÄº:Â¶ÇÊûúLD>0Âπ∂‰∏îLD>HD,ËøîÂõûLD,Âê¶ÂàôËøîÂõû0ÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫PDI:DMP*100/MTR\r\n * ËæìÂá∫MDI:DMM*100/MTR\r\n * ËæìÂá∫ADX:MDI-PDIÁöÑÁªùÂØπÂÄº/(MDI+PDI)*100ÁöÑMMÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫ADXR:ADXÁöÑMMÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst directionalMovementIndex: IndicatorTemplate<Dmi> = {\r\n  name: 'DMI',\r\n  shortName: 'DMI',\r\n  calcParams: [14, 6],\r\n  figures: [\r\n    { key: 'pdi', title: 'PDI: ', type: 'line' },\r\n    { key: 'mdi', title: 'MDI: ', type: 'line' },\r\n    { key: 'adx', title: 'ADX: ', type: 'line' },\r\n    { key: 'adxr', title: 'ADXR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Dmi>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let trSum = 0\r\n    let hSum = 0\r\n    let lSum = 0\r\n    let mtr = 0\r\n    let dmp = 0\r\n    let dmm = 0\r\n    let dxSum = 0\r\n    let adx = 0\r\n    const result: Dmi[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const dmi: Dmi = {}\r\n      const prevKLineData = dataList[i - 1] ?? kLineData\r\n      const preClose = prevKLineData.close\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      const hl = high - low\r\n      const hcy = Math.abs(high - preClose)\r\n      const lcy = Math.abs(preClose - low)\r\n      const hhy = high - prevKLineData.high\r\n      const lyl = prevKLineData.low - low\r\n      const tr = Math.max(Math.max(hl, hcy), lcy)\r\n      const h = (hhy > 0 && hhy > lyl) ? hhy : 0\r\n      const l = (lyl > 0 && lyl > hhy) ? lyl : 0\r\n      trSum += tr\r\n      hSum += h\r\n      lSum += l\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          mtr = mtr - mtr / params[0] + tr\r\n          dmp = dmp - dmp / params[0] + h\r\n          dmm = dmm - dmm / params[0] + l\r\n        } else {\r\n          mtr = trSum\r\n          dmp = hSum\r\n          dmm = lSum\r\n        }\r\n        let pdi = 0\r\n        let mdi = 0\r\n        if (mtr !== 0) {\r\n          pdi = dmp * 100 / mtr\r\n          mdi = dmm * 100 / mtr\r\n        }\r\n        dmi.pdi = pdi\r\n        dmi.mdi = mdi\r\n        let dx = 0\r\n        if (mdi + pdi !== 0) {\r\n          dx = Math.abs((mdi - pdi)) / (mdi + pdi) * 100\r\n        }\r\n        dxSum += dx\r\n        if (i >= params[0] * 2 - 2) {\r\n          if (i > params[0] * 2 - 2) {\r\n            adx = (adx * (params[0] - 1) + dx) / params[0]\r\n          } else {\r\n            adx = dxSum / params[0]\r\n          }\r\n          dmi.adx = adx\r\n          if (i >= params[0] * 2 + params[1] - 3) {\r\n            dmi.adxr = ((result[i - (params[1] - 1)].adx ?? 0) + adx) / 2\r\n          }\r\n        }\r\n      }\r\n      result.push(dmi)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default directionalMovementIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Emv {\r\n  emv?: number\r\n  maEmv?: number\r\n}\r\n\r\n/**\r\n *\r\n * EMV ÁÆÄÊòìÊ≥¢Âä®ÊåáÊ†á\r\n * ÂÖ¨ÂºèÔºö\r\n * A=Ôºà‰ªäÊó•ÊúÄÈ´ò+‰ªäÊó•ÊúÄ‰ΩéÔºâ/2\r\n * B=ÔºàÂâçÊó•ÊúÄÈ´ò+ÂâçÊó•ÊúÄ‰ΩéÔºâ/2\r\n * C=‰ªäÊó•ÊúÄÈ´ò-‰ªäÊó•ÊúÄ‰Ωé\r\n * EM=ÔºàA-BÔºâ*C/‰ªäÊó•Êàê‰∫§È¢ù\r\n * EMV=NÊó•ÂÜÖEMÁöÑÁ¥ØÂíå\r\n * MAEMV=EMVÁöÑMÊó•ÁöÑÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst easeOfMovementValue: IndicatorTemplate<Emv> = {\r\n  name: 'EMV',\r\n  shortName: 'EMV',\r\n  calcParams: [14, 9],\r\n  figures: [\r\n    { key: 'emv', title: 'EMV: ', type: 'line' },\r\n    { key: 'maEmv', title: 'MAEMV: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Emv>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let emvValueSum = 0\r\n    const emvValueList: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const emv: Emv = {}\r\n      if (i > 0) {\r\n        const prevKLineData = dataList[i - 1]\r\n        const high = kLineData.high\r\n        const low = kLineData.low\r\n        const volume = kLineData.volume ?? 0\r\n        const distanceMoved = (high + low) / 2 - (prevKLineData.high + prevKLineData.low) / 2\r\n\r\n        if (volume === 0 || high - low === 0) {\r\n          emv.emv = 0\r\n        } else {\r\n          const ratio = volume / 100000000 / (high - low)\r\n          emv.emv = distanceMoved / ratio\r\n        }\r\n        emvValueSum += emv.emv\r\n        emvValueList.push(emv.emv)\r\n        if (i >= params[0]) {\r\n          emv.maEmv = emvValueSum / params[0]\r\n          emvValueSum -= emvValueList[i - params[0]]\r\n        }\r\n      }\r\n      return emv\r\n    })\r\n  }\r\n}\r\n\r\nexport default easeOfMovementValue\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\r\n\r\ninterface Ema {\r\n  ema1?: number\r\n  ema2?: number\r\n  ema3?: number\r\n}\r\n\r\n/**\r\n * EMA ÊåáÊï∞ÁßªÂä®Âπ≥Âùá\r\n */\r\nconst exponentialMovingAverage: IndicatorTemplate<Ema> = {\r\n  name: 'EMA',\r\n  shortName: 'EMA',\r\n  series: IndicatorSeries.Price,\r\n  calcParams: [6, 12, 20],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'ema1', title: 'EMA6: ', type: 'line' },\r\n    { key: 'ema2', title: 'EMA12: ', type: 'line' },\r\n    { key: 'ema3', title: 'EMA20: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params: any[]) => {\r\n    return params.map((p: number, i: number) => {\r\n      return { key: `ema${i + 1}`, title: `EMA${p}: `, type: 'line' }\r\n    })\r\n  },\r\n  calc: (dataList: KLineData[], indicator: Indicator<Ema>) => {\r\n    const { calcParams: params, figures } = indicator\r\n    let closeSum = 0\r\n    const emaValues: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const ema = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      params.forEach((p: number, index: number) => {\r\n        if (i >= p - 1) {\r\n          if (i > p - 1) {\r\n            emaValues[index] = (2 * close + (p - 1) * emaValues[index]) / (p + 1)\r\n          } else {\r\n            emaValues[index] = closeSum / p\r\n          }\r\n          ema[figures[index].key] = emaValues[index]\r\n        }\r\n      })\r\n      return ema\r\n    })\r\n  }\r\n}\r\n\r\nexport default exponentialMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Mtm {\r\n  mtm?: number\r\n  maMtm?: number\r\n}\r\n\r\n/**\r\n * mtm\r\n * ÂÖ¨Âºè MTMÔºàNÊó•Ôºâ=CÔºçCN\r\n */\r\nconst momentum: IndicatorTemplate<Mtm> = {\r\n  name: 'MTM',\r\n  shortName: 'MTM',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'mtm', title: 'MTM: ', type: 'line' },\r\n    { key: 'maMtm', title: 'MAMTM: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Mtm>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let mtmSum = 0\r\n    const result: Mtm[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const mtm: Mtm = {}\r\n      if (i >= params[0]) {\r\n        const close = kLineData.close\r\n        const agoClose = dataList[i - params[0]].close\r\n        mtm.mtm = close - agoClose\r\n        mtmSum += mtm.mtm\r\n        if (i >= params[0] + params[1] - 1) {\r\n          mtm.maMtm = mtmSum / params[1]\r\n          mtmSum -= (result[i - (params[1] - 1)].mtm ?? 0)\r\n        }\r\n      }\r\n      result.push(mtm)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default momentum\r\n","/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport KLineData from '../../common/KLineData'\nimport { Indicator, IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\n\ninterface Ma {\n  ma1?: number\n  ma2?: number\n  ma3?: number\n  ma4?: number\n}\n\n/**\n * MA ÁßªÂä®Âπ≥Âùá\n */\nconst movingAverage: IndicatorTemplate<Ma> = {\n  name: 'MA',\n  shortName: 'MA',\n  series: IndicatorSeries.Price,\n  calcParams: [7, 14, 21, 28],\n  precision: 2,\n  shouldOhlc: true,\n  figures: [\n    { key: 'ma7', title: 'MA7: ', type: 'line' },\n    { key: 'ma14', title: 'MA14: ', type: 'line' },\n    { key: 'ma21', title: 'MA21: ', type: 'line' },\n    { key: 'ma28', title: 'MA28: ', type: 'line' }\n  ],\n  regenerateFigures: (params: any[]) => {\n    return params.map((p: number, i: number) => {\n      return { key: `ma${i + 1}`, title: `MA${p}: `, type: 'line' }\n    })\n  },\n  calc: (dataList: KLineData[], indicator: Indicator<Ma>) => {\n    const { calcParams: params, figures } = indicator\n    const closeSums: number[] = []\n    return dataList.map((kLineData: KLineData, i: number) => {\n      const ma = {}\n      const close = kLineData.close\n      params.forEach((p: number, index: number) => {\n        closeSums[index] = (closeSums[index] ?? 0) + close\n        if (i >= p - 1) {\n          ma[figures[index].key] = closeSums[index] / p\n          closeSums[index] -= dataList[i - (p - 1)].close\n        }\n      })\n      return ma\n    })\n  }\n}\n\nexport default movingAverage\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorStyle, PolygonType } from '../../common/Styles'\r\n\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport { Indicator, IndicatorTemplate, IndicatorFigureStylesCallbackData } from '../../component/Indicator'\r\n\r\ninterface Macd {\r\n  dif?: number\r\n  dea?: number\r\n  macd?: number\r\n}\r\n\r\n/**\r\n * MACDÔºöÂèÇÊï∞Âø´Á∫øÁßªÂä®Âπ≥Âùá„ÄÅÊÖ¢Á∫øÁßªÂä®Âπ≥Âùá„ÄÅÁßªÂä®Âπ≥ÂùáÔºå\r\n * ÈªòËÆ§ÂèÇÊï∞ÂÄº12„ÄÅ26„ÄÅ9„ÄÇ\r\n * ÂÖ¨ÂºèÔºö‚íàÈ¶ñÂÖàÂàÜÂà´ËÆ°ÁÆóÂá∫Êî∂Áõò‰ª∑12Êó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫ø‰∏é26Êó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÔºåÂàÜÂà´ËÆ∞‰∏∫EMA(12Ôºâ‰∏éEMA(26Ôºâ„ÄÇ\r\n * ‚íâÊ±ÇËøô‰∏§Êù°ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÁöÑÂ∑ÆÔºåÂç≥ÔºöDIFF = EMA(SHORT) Ôºç EMA(LONG)„ÄÇ\r\n * ‚íäÂÜçËÆ°ÁÆóDIFFÁöÑMÊó•ÁöÑÂπ≥ÂùáÁöÑÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÔºåËÆ∞‰∏∫DEA„ÄÇ\r\n * ‚íãÊúÄÂêéÁî®DIFFÂáèDEAÔºåÂæóMACD„ÄÇMACDÈÄöÂ∏∏ÁªòÂà∂ÊàêÂõ¥ÁªïÈõ∂ËΩ¥Á∫øÊ≥¢Âä®ÁöÑÊü±ÂΩ¢Âõæ„ÄÇMACDÊü±Áä∂Â§ß‰∫é0Ê∂®È¢úËâ≤ÔºåÂ∞è‰∫é0Ë∑åÈ¢úËâ≤„ÄÇ\r\n */\r\nconst movingAverageConvergenceDivergence: IndicatorTemplate<Macd> = {\r\n  name: 'MACD',\r\n  shortName: 'MACD',\r\n  calcParams: [12, 26, 9],\r\n  figures: [\r\n    { key: 'dif', title: 'DIF: ', type: 'line' },\r\n    { key: 'dea', title: 'DEA: ', type: 'line' },\r\n    {\r\n      key: 'macd',\r\n      title: 'MACD: ',\r\n      type: 'bar',\r\n      baseValue: 0,\r\n      styles: (data: IndicatorFigureStylesCallbackData<Macd>, indicator: Indicator, defaultStyles: IndicatorStyle) => {\r\n        const { prev, current } = data\r\n        const prevMacd = prev.indicatorData?.macd ?? Number.MIN_SAFE_INTEGER\r\n        const currentMacd = current.indicatorData?.macd ?? Number.MIN_SAFE_INTEGER\r\n        let color: string\r\n        if (currentMacd > 0) {\r\n          color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor) as string\r\n        } else if (currentMacd < 0) {\r\n          color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor) as string\r\n        } else {\r\n          color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles.bars)[0].noChangeColor) as string\r\n        }\r\n        const style = prevMacd < currentMacd ? PolygonType.Stroke : PolygonType.Fill\r\n        return { style, color, borderColor: color }\r\n      }\r\n    }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Macd>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let closeSum = 0\r\n    let emaShort: number\r\n    let emaLong: number\r\n    let dif = 0\r\n    let difSum = 0\r\n    let dea = 0\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const macd: Macd = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          emaShort = (2 * close + (params[0] - 1) * emaShort) / (params[0] + 1)\r\n        } else {\r\n          emaShort = closeSum / params[0]\r\n        }\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        if (i > params[1] - 1) {\r\n          emaLong = (2 * close + (params[1] - 1) * emaLong) / (params[1] + 1)\r\n        } else {\r\n          emaLong = closeSum / params[1]\r\n        }\r\n      }\r\n      if (i >= maxPeriod - 1) {\r\n        dif = emaShort - emaLong\r\n        macd.dif = dif\r\n        difSum += dif\r\n        if (i >= maxPeriod + params[2] - 2) {\r\n          if (i > maxPeriod + params[2] - 2) {\r\n            dea = (dif * 2 + dea * (params[2] - 1)) / (params[2] + 1)\r\n          } else {\r\n            dea = difSum / params[2]\r\n          }\r\n          macd.macd = (dif - dea) * 2\r\n          macd.dea = dea\r\n        }\r\n      }\r\n      return macd\r\n    })\r\n  }\r\n}\r\n\r\nexport default movingAverageConvergenceDivergence\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Obv {\r\n  obv?: number\r\n  maObv?: number\r\n}\r\n\r\n/**\r\n * OBV\r\n * OBV = REF(OBV) + sign * V\r\n */\r\nconst onBalanceVolume: IndicatorTemplate<Obv> = {\r\n  name: 'OBV',\r\n  shortName: 'OBV',\r\n  calcParams: [30],\r\n  figures: [\r\n    { key: 'obv', title: 'OBV: ', type: 'line' },\r\n    { key: 'maObv', title: 'MAOBV: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Obv>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let obvSum = 0\r\n    let oldObv = 0\r\n    const result: Obv[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const prevKLineData = dataList[i - 1] ?? kLineData\r\n      if (kLineData.close < prevKLineData.close) {\r\n        oldObv -= (kLineData.volume ?? 0)\r\n      } else if (kLineData.close > prevKLineData.close) {\r\n        oldObv += (kLineData.volume ?? 0)\r\n      }\r\n      const obv: Obv = { obv: oldObv }\r\n      obvSum += oldObv\r\n      if (i >= params[0] - 1) {\r\n        obv.maObv = obvSum / params[0]\r\n        obvSum -= (result[i - (params[0] - 1)].obv ?? 0)\r\n      }\r\n      result.push(obv)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default onBalanceVolume\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Pvt {\r\n  pvt?: number\r\n}\r\n\r\n/**\r\n * ‰ª∑ÈáèË∂ãÂäøÊåáÊ†á\r\n * ÂÖ¨Âºè:\r\n * X = (CLOSE - REF(CLOSE, 1)) / REF(CLOSE, 1) * VOLUME\r\n * PVT = SUM(X)\r\n *\r\n */\r\nconst priceAndVolumeTrend: IndicatorTemplate<Pvt> = {\r\n  name: 'PVT',\r\n  shortName: 'PVT',\r\n  figures: [\r\n    { key: 'pvt', title: 'PVT: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[]) => {\r\n    let sum = 0\r\n    return dataList.map((kLineData, i) => {\r\n      const pvt: Pvt = {}\r\n      const close = kLineData.close\r\n      const volume = kLineData.volume ?? 1\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      let x = 0\r\n      const total = prevClose * volume\r\n      if (total !== 0) {\r\n        x = (close - prevClose) / total\r\n      }\r\n      sum += x\r\n      pvt.pvt = sum\r\n      return pvt\r\n    })\r\n  }\r\n}\r\n\r\nexport default priceAndVolumeTrend\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Psy {\r\n  psy?: number\r\n  maPsy?: number\r\n}\r\n\r\n/**\r\n * PSY\r\n * ÂÖ¨ÂºèÔºöPSY=NÊó•ÂÜÖÁöÑ‰∏äÊ∂®Â§©Êï∞/N√ó100%„ÄÇ\r\n */\r\nconst psychologicalLine: IndicatorTemplate<Psy> = {\r\n  name: 'PSY',\r\n  shortName: 'PSY',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'psy', title: 'PSY: ', type: 'line' },\r\n    { key: 'maPsy', title: 'MAPSY: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Psy>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let upCount = 0\r\n    let psySum = 0\r\n    const upList: number[] = []\r\n    const result: Psy[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const psy: Psy = {}\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      const upFlag = kLineData.close - prevClose > 0 ? 1 : 0\r\n      upList.push(upFlag)\r\n      upCount += upFlag\r\n      if (i >= params[0] - 1) {\r\n        psy.psy = upCount / params[0] * 100\r\n        psySum += psy.psy\r\n        if (i >= params[0] + params[1] - 2) {\r\n          psy.maPsy = psySum / params[1]\r\n          psySum -= (result[i - (params[1] - 1)].psy ?? 0)\r\n        }\r\n        upCount -= upList[i - (params[0] - 1)]\r\n      }\r\n      result.push(psy)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default psychologicalLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Roc {\r\n  roc?: number\r\n  maRoc?: number\r\n}\r\n\r\n/**\r\n * ÂèòÂä®ÁéáÊåáÊ†á\r\n * ÂÖ¨ÂºèÔºöROC = (CLOSE - REF(CLOSE, N)) / REF(CLOSE, N)\r\n */\r\nconst rateOfChange: IndicatorTemplate<Roc> = {\r\n  name: 'ROC',\r\n  shortName: 'ROC',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'roc', title: 'ROC: ', type: 'line' },\r\n    { key: 'maRoc', title: 'MAROC: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Roc>) => {\r\n    const params = indicator.calcParams as number[]\r\n    const result: Roc[] = []\r\n    let rocSum = 0\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const roc: Roc = {}\r\n      if (i >= params[0] - 1) {\r\n        const close = kLineData.close\r\n        const agoClose = (dataList[i - params[0]] ?? dataList[i - (params[0] - 1)]).close\r\n        if (agoClose !== 0) {\r\n          roc.roc = (close - agoClose) / agoClose * 100\r\n        } else {\r\n          roc.roc = 0\r\n        }\r\n        rocSum += roc.roc\r\n        if (i >= params[0] - 1 + params[1] - 1) {\r\n          roc.maRoc = rocSum / params[1]\r\n          rocSum -= (result[i - (params[1] - 1)].roc ?? 0)\r\n        }\r\n      }\r\n      result.push(roc)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default rateOfChange\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Rsi {\r\n  rsi1?: number\r\n  rsi2?: number\r\n  rsi3?: number\r\n}\r\n\r\n/**\r\n * RSI\r\n * RSI = SUM(MAX(CLOSE - REF(CLOSE,1),0),N) / SUM(ABS(CLOSE - REF(CLOSE,1)),N) √ó 100\r\n */\r\nconst relativeStrengthIndex: IndicatorTemplate<Rsi> = {\r\n  name: 'RSI',\r\n  shortName: 'RSI',\r\n  calcParams: [6, 12, 24],\r\n  figures: [\r\n    { key: 'rsi1', title: 'RSI1: ', type: 'line' },\r\n    { key: 'rsi2', title: 'RSI2: ', type: 'line' },\r\n    { key: 'rsi3', title: 'RSI3: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params: any[]) => {\r\n    return params.map((_: any, index: number) => {\r\n      const num = index + 1\r\n      return { key: `rsi${num}`, title: `RSI${num}: `, type: 'line' }\r\n    })\r\n  },\r\n  calc: (dataList: KLineData[], indicator: Indicator<Rsi>) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const sumCloseAs: number[] = []\r\n    const sumCloseBs: number[] = []\r\n    return dataList.map((kLineData, i) => {\r\n      const rsi = {}\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      const tmp = kLineData.close - prevClose\r\n      params.forEach((p, index) => {\r\n        if (tmp > 0) {\r\n          sumCloseAs[index] = (sumCloseAs[index] ?? 0) + tmp\r\n        } else {\r\n          sumCloseBs[index] = (sumCloseBs[index] ?? 0) + Math.abs(tmp)\r\n        }\r\n        if (i >= p - 1) {\r\n          if (sumCloseBs[index] !== 0) {\r\n            rsi[figures[index].key] = 100 - (100.0 / (1 + sumCloseAs[index] / sumCloseBs[index]))\r\n          } else {\r\n            rsi[figures[index].key] = 0\r\n          }\r\n          const agoData = dataList[i - (p - 1)]\r\n          const agoPreData = dataList[i - p] ?? agoData\r\n          const agoTmp = agoData.close - agoPreData.close\r\n          if (agoTmp > 0) {\r\n            sumCloseAs[index] -= agoTmp\r\n          } else {\r\n            sumCloseBs[index] -= Math.abs(agoTmp)\r\n          }\r\n        }\r\n      })\r\n      return rsi\r\n    })\r\n  }\r\n}\r\n\r\nexport default relativeStrengthIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate, IndicatorSeries } from '../../component/Indicator'\r\n\r\ninterface Sma {\r\n  sma?: number\r\n}\r\n\r\n/**\r\n * sma\r\n */\r\nconst simpleMovingAverage: IndicatorTemplate<Sma> = {\r\n  name: 'SMA',\r\n  shortName: 'SMA',\r\n  series: IndicatorSeries.Price,\r\n  calcParams: [12, 2],\r\n  precision: 2,\r\n  figures: [\r\n    { key: 'sma', title: 'SMA: ', type: 'line' }\r\n  ],\r\n  shouldOhlc: true,\r\n  calc: (dataList: KLineData[], indicator: Indicator<Sma>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let closeSum = 0\r\n    let smaValue = 0\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const sma: Sma = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          smaValue = (close * params[1] + smaValue * (params[0] - params[1] + 1)) / (params[0] + 1)\r\n        } else {\r\n          smaValue = closeSum / params[0]\r\n        }\r\n        sma.sma = smaValue\r\n      }\r\n      return sma\r\n    })\r\n  }\r\n}\r\n\r\nexport default simpleMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\nimport { getMaxMin } from '../../common/utils/number'\r\n\r\ninterface Kdj {\r\n  k?: number\r\n  d?: number\r\n  j?: number\r\n}\r\n\r\n/**\r\n * KDJ\r\n *\r\n * ÂΩìÊó•KÂÄº=2/3√óÂâç‰∏ÄÊó•KÂÄº+1/3√óÂΩìÊó•RSV\r\n * ÂΩìÊó•DÂÄº=2/3√óÂâç‰∏ÄÊó•DÂÄº+1/3√óÂΩìÊó•KÂÄº\r\n * Ëã•Êó†Ââç‰∏ÄÊó•K ÂÄº‰∏éDÂÄºÔºåÂàôÂèØÂàÜÂà´Áî®50Êù•‰ª£Êõø„ÄÇ\r\n * JÂÄº=3*ÂΩìÊó•KÂÄº-2*ÂΩìÊó•DÂÄº\r\n */\r\nconst stoch: IndicatorTemplate<Kdj> = {\r\n  name: 'KDJ',\r\n  shortName: 'KDJ',\r\n  calcParams: [9, 3, 3],\r\n  figures: [\r\n    { key: 'k', title: 'K: ', type: 'line' },\r\n    { key: 'd', title: 'D: ', type: 'line' },\r\n    { key: 'j', title: 'J: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Kdj>) => {\r\n    const params = indicator.calcParams\r\n    const result: Kdj[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const kdj: Kdj = {}\r\n      const close = kLineData.close\r\n      if (i >= params[0] - 1) {\r\n        const lhn = getMaxMin<KLineData>(dataList.slice(i - (params[0] - 1), i + 1), 'high', 'low')\r\n        const hn = lhn[0]\r\n        const ln = lhn[1]\r\n        const hnSubLn = hn - ln\r\n        const rsv = (close - ln) / (hnSubLn === 0 ? 1 : hnSubLn) * 100\r\n        kdj.k = ((params[1] - 1) * (result[i - 1]?.k ?? 50) + rsv) / params[1]\r\n        kdj.d = ((params[2] - 1) * (result[i - 1]?.d ?? 50) + kdj.k) / params[2]\r\n        kdj.j = 3.0 * kdj.k - 2.0 * kdj.d\r\n      }\r\n      result.push(kdj)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default stoch\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorStyle } from '../../common/Styles'\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport { Indicator, IndicatorTemplate, IndicatorSeries, IndicatorFigureStylesCallbackData } from '../../component/Indicator'\r\n\r\ninterface Sar {\r\n  sar?: number\r\n}\r\n\r\nconst stopAndReverse: IndicatorTemplate<Sar> = {\r\n  name: 'SAR',\r\n  shortName: 'SAR',\r\n  series: IndicatorSeries.Price,\r\n  calcParams: [2, 2, 20],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    {\r\n      key: 'sar',\r\n      title: 'SAR: ',\r\n      type: 'circle',\r\n      styles: (data: IndicatorFigureStylesCallbackData<Sar>, indicator: Indicator, defaultStyles: IndicatorStyle) => {\r\n        const { current } = data\r\n        const sar = current.indicatorData?.sar ?? Number.MIN_SAFE_INTEGER\r\n        const kLineData = current.kLineData as KLineData\r\n        const halfHL = (kLineData?.high + kLineData?.low) / 2\r\n        const color = sar < halfHL\r\n          ? formatValue(indicator.styles, 'circles[0].upColor', (defaultStyles.circles)[0].upColor) as string\r\n          : formatValue(indicator.styles, 'circles[0].downColor', (defaultStyles.circles)[0].downColor) as string\r\n        return { color }\r\n      }\r\n    }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Sar>) => {\r\n    const params = indicator.calcParams\r\n    const startAf = params[0] / 100\r\n    const step = params[1] / 100\r\n    const maxAf = params[2] / 100\r\n\r\n    // Âä†ÈÄüÂõ†Â≠ê\r\n    let af = startAf\r\n    // ÊûÅÂÄº\r\n    let ep = -100\r\n    // Âà§Êñ≠ÊòØ‰∏äÊ∂®ËøòÊòØ‰∏ãË∑å  falseÔºö‰∏ãË∑å\r\n    let isIncreasing = false\r\n    let sar = 0\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      // ‰∏ä‰∏Ä‰∏™Âë®ÊúüÁöÑsar\r\n      const preSar = sar\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      if (isIncreasing) {\r\n        // ‰∏äÊ∂®\r\n        if (ep === -100 || ep < high) {\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          ep = high\r\n          af = Math.min(af + step, maxAf)\r\n        }\r\n        sar = preSar + af * (ep - preSar)\r\n        const lowMin = Math.min(dataList[Math.max(1, i) - 1].low, low)\r\n        if (sar > kLineData.low) {\r\n          sar = ep\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          af = startAf\r\n          ep = -100\r\n          isIncreasing = !isIncreasing\r\n        } else if (sar > lowMin) {\r\n          sar = lowMin\r\n        }\r\n      } else {\r\n        if (ep === -100 || ep > low) {\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          ep = low\r\n          af = Math.min(af + step, maxAf)\r\n        }\r\n        sar = preSar + af * (ep - preSar)\r\n        const highMax = Math.max(dataList[Math.max(1, i) - 1].high, high)\r\n        if (sar < kLineData.high) {\r\n          sar = ep\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          af = 0\r\n          ep = -100\r\n          isIncreasing = !isIncreasing\r\n        } else if (sar < highMax) {\r\n          sar = highMax\r\n        }\r\n      }\r\n      return { sar }\r\n    })\r\n  }\r\n}\r\n\r\nexport default stopAndReverse\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http:*www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Trix {\r\n  trix?: number\r\n  maTrix?: number\r\n}\r\n\r\n/**\r\n * trix\r\n *\r\n * TR=Êî∂Áõò‰ª∑ÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÔºõ\r\n * TRIX=(TR-Êò®Êó•TR)/Êò®Êó•TR*100Ôºõ\r\n * MATRIX=TRIXÁöÑMÊó•ÁÆÄÂçïÁßªÂä®Âπ≥ÂùáÔºõ\r\n * ÈªòËÆ§ÂèÇÊï∞NËÆæ‰∏∫12ÔºåÈªòËÆ§ÂèÇÊï∞MËÆæ‰∏∫9Ôºõ\r\n * ÈªòËÆ§ÂèÇÊï∞12„ÄÅ9\r\n * ÂÖ¨ÂºèÔºöMTR:=EMA(EMA(EMA(CLOSE,N),N),N)\r\n * TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\r\n * TRMA:MA(TRIX,M)\r\n *\r\n */\r\nconst tripleExponentiallySmoothedAverage: IndicatorTemplate<Trix> = {\r\n  name: 'TRIX',\r\n  shortName: 'TRIX',\r\n  calcParams: [12, 9],\r\n  figures: [\r\n    { key: 'trix', title: 'TRIX: ', type: 'line' },\r\n    { key: 'maTrix', title: 'MATRIX: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Trix>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let closeSum = 0\r\n    let ema1: number\r\n    let ema2: number\r\n    let oldTr: number\r\n    let ema1Sum = 0\r\n    let ema2Sum = 0\r\n    let trixSum = 0\r\n    const result: Trix[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const trix: Trix = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          ema1 = (2 * close + (params[0] - 1) * ema1) / (params[0] + 1)\r\n        } else {\r\n          ema1 = closeSum / params[0]\r\n        }\r\n        ema1Sum += ema1\r\n        if (i >= params[0] * 2 - 2) {\r\n          if (i > params[0] * 2 - 2) {\r\n            ema2 = (2 * ema1 + (params[0] - 1) * ema2) / (params[0] + 1)\r\n          } else {\r\n            ema2 = ema1Sum / params[0]\r\n          }\r\n          ema2Sum += ema2\r\n          if (i >= params[0] * 3 - 3) {\r\n            let tr: number\r\n            let trixValue = 0\r\n            if (i > params[0] * 3 - 3) {\r\n              tr = (2 * ema2 + (params[0] - 1) * oldTr) / (params[0] + 1)\r\n              trixValue = (tr - oldTr) / oldTr * 100\r\n            } else {\r\n              tr = ema2Sum / params[0]\r\n            }\r\n            oldTr = tr\r\n            trix.trix = trixValue\r\n            trixSum += trixValue\r\n            if (i >= params[0] * 3 + params[1] - 4) {\r\n              trix.maTrix = trixSum / params[1]\r\n              trixSum -= (result[i - (params[1] - 1)].trix ?? 0)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      result.push(trix)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default tripleExponentiallySmoothedAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { IndicatorStyle } from '../../common/Styles'\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport { Indicator, IndicatorTemplate, IndicatorFigureStylesCallbackData, IndicatorSeries, IndicatorFigure } from '../../component/Indicator'\r\n\r\ninterface Vol {\r\n  volume?: number\r\n  ma1?: number\r\n  ma2?: number\r\n  ma3?: number\r\n}\r\n\r\nconst volume: IndicatorTemplate<Vol> = {\r\n  name: 'VOL',\r\n  shortName: 'VOL',\r\n  series: IndicatorSeries.Volume,\r\n  calcParams: [5, 10, 20],\r\n  shouldFormatBigNumber: true,\r\n  precision: 0,\r\n  minValue: 0,\r\n  figures: [\r\n    { key: 'ma1', title: 'MA5: ', type: 'line' },\r\n    { key: 'ma2', title: 'MA10: ', type: 'line' },\r\n    { key: 'ma3', title: 'MA20: ', type: 'line' },\r\n    {\r\n      key: 'volume',\r\n      title: 'VOLUME: ',\r\n      type: 'bar',\r\n      baseValue: 0,\r\n      styles: (data: IndicatorFigureStylesCallbackData<Vol>, indicator: Indicator, defaultStyles: IndicatorStyle) => {\r\n        const kLineData = data.current.kLineData as KLineData\r\n        let color: string\r\n        if (kLineData.close > kLineData.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor) as string\r\n        } else if (kLineData.close < kLineData.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor) as string\r\n        } else {\r\n          color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles.bars)[0].noChangeColor) as string\r\n        }\r\n        return { color }\r\n      }\r\n    }\r\n  ],\r\n  regenerateFigures: (params: any[]) => {\r\n    const figures: Array<IndicatorFigure<Vol>> = params.map((p: number, i: number) => {\r\n      return { key: `ma${i + 1}`, title: `MA${p}: `, type: 'line' }\r\n    })\r\n    figures.push({\r\n      key: 'volume',\r\n      title: 'VOLUME: ',\r\n      type: 'bar',\r\n      baseValue: 0,\r\n      styles: (data: IndicatorFigureStylesCallbackData<Vol>, indicator: Indicator, defaultStyles: IndicatorStyle) => {\r\n        const kLineData = data.current.kLineData as KLineData\r\n        let color: string\r\n        if (kLineData.close > kLineData.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor) as string\r\n        } else if (kLineData.close < kLineData.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor) as string\r\n        } else {\r\n          color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles.bars)[0].noChangeColor) as string\r\n        }\r\n        return { color }\r\n      }\r\n    })\r\n    return figures\r\n  },\r\n  calc: (dataList: KLineData[], indicator: Indicator<Vol>) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const volSums: number[] = []\r\n    return dataList.map((kLineData: KLineData, i: number) => {\r\n      const volume = kLineData.volume ?? 0\r\n      const vol: Vol = { volume }\r\n      params.forEach((p, index) => {\r\n        volSums[index] = (volSums[index] ?? 0) + volume\r\n        if (i >= p - 1) {\r\n          vol[figures[index].key] = volSums[index] / p\r\n          volSums[index] -= (dataList[i - (p - 1)].volume ?? 0)\r\n        }\r\n      })\r\n      return vol\r\n    })\r\n  }\r\n}\r\n\r\nexport default volume\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Vr {\r\n  vr?: number\r\n  maVr?: number\r\n}\r\n\r\n/**\r\n * VR\r\n * VR=ÔºàUVS+1/2PVSÔºâ/ÔºàDVS+1/2PVSÔºâ\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏äÊ∂®ÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫AVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑAVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫UVS\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏ãË∑åÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫BVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑBVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫DVS\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏çÊ∂®‰∏çË∑åÔºåÂàôÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫CVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑCVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫PVS\r\n *\r\n */\r\nconst volumeRatio: IndicatorTemplate<Vr> = {\r\n  name: 'VR',\r\n  shortName: 'VR',\r\n  calcParams: [26, 6],\r\n  figures: [\r\n    { key: 'vr', title: 'VR: ', type: 'line' },\r\n    { key: 'maVr', title: 'MAVR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList: KLineData[], indicator: Indicator<Vr>) => {\r\n    const params = indicator.calcParams as number[]\r\n    let uvs = 0\r\n    let dvs = 0\r\n    let pvs = 0\r\n    let vrSum = 0\r\n    const result: Vr[] = []\r\n    dataList.forEach((kLineData: KLineData, i: number) => {\r\n      const vr: Vr = {}\r\n      const close = kLineData.close\r\n      const preClose = (dataList[i - 1] ?? kLineData).close\r\n      const volume = kLineData.volume ?? 0\r\n      if (close > preClose) {\r\n        uvs += volume\r\n      } else if (close < preClose) {\r\n        dvs += volume\r\n      } else {\r\n        pvs += volume\r\n      }\r\n      if (i >= params[0] - 1) {\r\n        const halfPvs = pvs / 2\r\n        if (dvs + halfPvs === 0) {\r\n          vr.vr = 0\r\n        } else {\r\n          vr.vr = (uvs + halfPvs) / (dvs + halfPvs) * 100\r\n        }\r\n        vrSum += vr.vr\r\n        if (i >= params[0] + params[1] - 2) {\r\n          vr.maVr = vrSum / params[1]\r\n          vrSum -= (result[i - (params[1] - 1)].vr ?? 0)\r\n        }\r\n\r\n        const agoData = dataList[i - (params[0] - 1)]\r\n        const agoPreData = dataList[i - params[0]] ?? agoData\r\n        const agoClose = agoData.close\r\n        const agoVolume = agoData.volume ?? 0\r\n        if (agoClose > agoPreData.close) {\r\n          uvs -= agoVolume\r\n        } else if (agoClose < agoPreData.close) {\r\n          dvs -= agoVolume\r\n        } else {\r\n          pvs -= agoVolume\r\n        }\r\n      }\r\n      result.push(vr)\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default volumeRatio\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../../common/KLineData'\r\nimport { Indicator, IndicatorTemplate } from '../../component/Indicator'\r\n\r\nimport { getMaxMin } from '../../common/utils/number'\r\n\r\ninterface Wr {\r\n  wr1?: number\r\n  wr2?: number\r\n  wr3?: number\r\n}\r\n\r\n/**\r\n * WR\r\n * ÂÖ¨Âºè WR(N) = 100 * [ C - HIGH(N) ] / [ HIGH(N)-LOW(N) ]\r\n */\r\nconst williamsR: IndicatorTemplate<Wr> = {\r\n  name: 'WR',\r\n  shortName: 'WR',\r\n  calcParams: [6, 10, 14],\r\n  figures: [\r\n    { key: 'wr1', title: 'WR1: ', type: 'line' },\r\n    { key: 'wr2', title: 'WR2: ', type: 'line' },\r\n    { key: 'wr3', title: 'WR3: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params: any[]) => {\r\n    return params.map((_, i: number) => {\r\n      return { key: `wr${i + 1}`, title: `WR${i + 1}: `, type: 'line' }\r\n    })\r\n  },\r\n  calc: (dataList: KLineData[], indicator: Indicator<Wr>) => {\r\n    const { calcParams: params, figures } = indicator\r\n    return dataList.map((kLineData, i) => {\r\n      const wr: Wr = {}\r\n      const close = kLineData.close\r\n      params.forEach((param, index) => {\r\n        const p = param - 1\r\n        if (i >= p) {\r\n          const hln = getMaxMin<KLineData>(dataList.slice(i - p, i + 1), 'high', 'low')\r\n          const hn = hln[0]\r\n          const ln = hln[1]\r\n          const hnSubLn = hn - ln\r\n          wr[figures[index].key] = hnSubLn === 0 ? 0 : (close - hn) / hnSubLn * 100\r\n        }\r\n      })\r\n      return wr\r\n    })\r\n  }\r\n}\r\n\r\nexport default williamsR\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../../common/Nullable'\r\n\r\nimport IndicatorImp, { IndicatorTemplate, IndicatorConstructor } from '../../component/Indicator'\r\n\r\nimport averagePrice from './averagePrice'\r\nimport awesomeOscillator from './awesomeOscillator'\r\nimport bias from './bias'\r\nimport bollingerBands from './bollingerBands'\r\nimport brar from './brar'\r\nimport bullAndBearIndex from './bullAndBearIndex'\r\nimport commodityChannelIndex from './commodityChannelIndex'\r\nimport currentRatio from './currentRatio'\r\nimport differentOfMovingAverage from './differentOfMovingAverage'\r\nimport directionalMovementIndex from './directionalMovementIndex'\r\nimport easeOfMovementValue from './easeOfMovementValue'\r\nimport exponentialMovingAverage from './exponentialMovingAverage'\r\nimport momentum from './momentum'\r\nimport movingAverage from './movingAverage'\r\nimport movingAverageConvergenceDivergence from './movingAverageConvergenceDivergence'\r\nimport onBalanceVolume from './onBalanceVolume'\r\nimport priceAndVolumeTrend from './priceAndVolumeTrend'\r\nimport psychologicalLine from './psychologicalLine'\r\nimport rateOfChange from './rateOfChange'\r\nimport relativeStrengthIndex from './relativeStrengthIndex'\r\nimport simpleMovingAverage from './simpleMovingAverage'\r\nimport stoch from './stoch'\r\nimport stopAndReverse from './stopAndReverse'\r\nimport tripleExponentiallySmoothedAverage from './tripleExponentiallySmoothedAverage'\r\nimport volume from './volume'\r\nimport volumeRatio from './volumeRatio'\r\nimport williamsR from './williamsR'\r\n\r\nconst indicators: Record<string, IndicatorConstructor> = {}\r\n\r\nconst extensions = [\r\n  averagePrice, awesomeOscillator, bias, bollingerBands, brar,\r\n  bullAndBearIndex, commodityChannelIndex, currentRatio, differentOfMovingAverage,\r\n  directionalMovementIndex, easeOfMovementValue, exponentialMovingAverage, momentum,\r\n  movingAverage, movingAverageConvergenceDivergence, onBalanceVolume, priceAndVolumeTrend,\r\n  psychologicalLine, rateOfChange, relativeStrengthIndex, simpleMovingAverage,\r\n  stoch, stopAndReverse, tripleExponentiallySmoothedAverage, volume, volumeRatio, williamsR\r\n]\r\n\r\nextensions.forEach((indicator: IndicatorTemplate) => {\r\n  indicators[indicator.name] = IndicatorImp.extend(indicator)\r\n})\r\n\r\nfunction registerIndicator<D> (indicator: IndicatorTemplate<D>): void {\r\n  indicators[indicator.name] = IndicatorImp.extend(indicator)\r\n}\r\n\r\nfunction getIndicatorClass (name: string): Nullable<IndicatorConstructor> {\r\n  return indicators[name] ?? null\r\n}\r\n\r\nfunction getSupportedIndicators (): string[] {\r\n  return Object.keys(indicators)\r\n}\r\n\r\nexport { registerIndicator, getIndicatorClass, getSupportedIndicators }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Precision from '../common/Precision'\r\nimport { isValid, isString, isArray, isNumber, isBoolean, isFunction } from '../common/utils/typeChecks'\r\n\r\nimport ChartStore from './ChartStore'\r\n\r\nimport IndicatorImp, { IndicatorCreate, IndicatorConstructor, Indicator, IndicatorSeries } from '../component/Indicator'\r\nimport { getIndicatorClass } from '../extension/indicator/index'\r\n\r\nexport default class IndicatorStore {\r\n  private readonly _chartStore: ChartStore\r\n  private readonly _instances: Map<string, IndicatorImp[]> = new Map()\r\n\r\n  constructor (chartStore: ChartStore) {\r\n    this._chartStore = chartStore\r\n  }\r\n\r\n  private _overrideInstance (instance: IndicatorImp, indicator: Partial<Indicator>): [boolean, boolean, boolean] {\r\n    const {\r\n      shortName, series, calcParams, precision, figures, minValue, maxValue,\r\n      shouldOhlc, shouldFormatBigNumber, visible, zLevel, styles, extendData,\r\n      regenerateFigures, createTooltipDataSource, draw, calc\r\n    } = indicator\r\n    let updateFlag = false\r\n    if (isString(shortName) && instance.setShortName(shortName)) {\r\n      updateFlag = true\r\n    }\r\n    if (isValid(series) && instance.setSeries(series)) {\r\n      updateFlag = true\r\n    }\r\n    let calcFlag = false\r\n    if (isArray(calcParams) && instance.setCalcParams(calcParams)) {\r\n      updateFlag = true\r\n      calcFlag = true\r\n    }\r\n    if (isArray(figures) && instance.setFigures(figures)) {\r\n      updateFlag = true\r\n      calcFlag = true\r\n    }\r\n    if (instance.setMinValue(minValue ?? null)) {\r\n      updateFlag = true\r\n    }\r\n    if (instance.setMinValue(maxValue ?? null)) {\r\n      updateFlag = true\r\n    }\r\n    if (isNumber(precision) && instance.setPrecision(precision)) {\r\n      updateFlag = true\r\n    }\r\n    if (isBoolean(shouldOhlc) && instance.setShouldOhlc(shouldOhlc)) {\r\n      updateFlag = true\r\n    }\r\n    if (isBoolean(shouldFormatBigNumber) && instance.setShouldFormatBigNumber(shouldFormatBigNumber)) {\r\n      updateFlag = true\r\n    }\r\n    if (isBoolean(visible) && instance.setVisible(visible)) {\r\n      updateFlag = true\r\n    }\r\n    let sortFlag = false\r\n    if (isNumber(zLevel) && instance.setZLevel(zLevel)) {\r\n      updateFlag = true\r\n      sortFlag = true\r\n    }\r\n    if (isValid(styles) && instance.setStyles(styles)) {\r\n      updateFlag = true\r\n    }\r\n    if (instance.setExtendData(extendData)) {\r\n      updateFlag = true\r\n      calcFlag = true\r\n    }\r\n    if (regenerateFigures !== undefined && instance.setRegenerateFigures(regenerateFigures)) {\r\n      updateFlag = true\r\n    }\r\n    if (createTooltipDataSource !== undefined && instance.setCreateTooltipDataSource(createTooltipDataSource)) {\r\n      updateFlag = true\r\n    }\r\n    if (draw !== undefined && instance.setDraw(draw)) {\r\n      updateFlag = true\r\n    }\r\n    if (isFunction(calc)) {\r\n      instance.calc = calc\r\n      calcFlag = true\r\n    }\r\n    return [updateFlag, calcFlag, sortFlag]\r\n  }\r\n\r\n  private _sort (paneId?: string): void {\r\n    if (isString(paneId)) {\r\n      this._instances.get(paneId)?.sort((i1, i2) => i1.zLevel - i2.zLevel)\r\n    } else {\r\n      this._instances.forEach(paneInstances => {\r\n        paneInstances.sort((i1, i2) => i1.zLevel - i2.zLevel)\r\n      })\r\n    }\r\n  }\r\n\r\n  async addInstance (indicator: IndicatorCreate, paneId: string, isStack: boolean): Promise<boolean> {\r\n    const { name } = indicator\r\n    let paneInstances = this._instances.get(paneId)\r\n    if (isValid(paneInstances)) {\r\n      const instance = paneInstances.find(ins => ins.name === name)\r\n      if (isValid(instance)) {\r\n        return await Promise.reject(new Error('Duplicate indicators.'))\r\n      }\r\n    }\r\n    if (!isValid(paneInstances)) {\r\n      paneInstances = []\r\n    }\r\n    const IndicatorClazz = getIndicatorClass(name) as IndicatorConstructor\r\n    const instance = new IndicatorClazz()\r\n    this._overrideInstance(instance, indicator)\r\n    if (!isStack) {\r\n      paneInstances = []\r\n    }\r\n    paneInstances.push(instance)\r\n    this._instances.set(paneId, paneInstances)\r\n    this._sort(paneId)\r\n    return await instance.calcIndicator(this._chartStore.getDataList())\r\n  }\r\n\r\n  getInstances (paneId: string): IndicatorImp[] {\r\n    return this._instances.get(paneId) ?? []\r\n  }\r\n\r\n  removeInstance (paneId: string, name?: string): boolean {\r\n    let removed = false\r\n    const paneInstances = this._instances.get(paneId)\r\n    if (isValid(paneInstances)) {\r\n      if (isString(name)) {\r\n        const index = paneInstances.findIndex(ins => ins.name === name)\r\n        if (index > -1) {\r\n          paneInstances.splice(index, 1)\r\n          removed = true\r\n        }\r\n      } else {\r\n        this._instances.set(paneId, [])\r\n        removed = true\r\n      }\r\n      if (this._instances.get(paneId)?.length === 0) {\r\n        this._instances.delete(paneId)\r\n      }\r\n    }\r\n    return removed\r\n  }\r\n\r\n  hasInstances (paneId: string): boolean {\r\n    return this._instances.has(paneId)\r\n  }\r\n\r\n  async calcInstance (name?: string, paneId?: string): Promise<boolean> {\r\n    const tasks: Array<Promise<boolean>> = []\r\n    if (isString(name)) {\r\n      if (isString(paneId)) {\r\n        const paneInstances = this._instances.get(paneId)\r\n        if (isValid(paneInstances)) {\r\n          const instance = paneInstances.find(ins => ins.name === name)\r\n          if (isValid(instance)) {\r\n            tasks.push(instance.calcIndicator(this._chartStore.getDataList()))\r\n          }\r\n        }\r\n      } else {\r\n        this._instances.forEach(paneInstances => {\r\n          const instance = paneInstances.find(ins => ins.name === name)\r\n          if (isValid(instance)) {\r\n            tasks.push(instance.calcIndicator(this._chartStore.getDataList()))\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      this._instances.forEach(paneInstances => {\r\n        paneInstances.forEach(instance => {\r\n          tasks.push(instance.calcIndicator(this._chartStore.getDataList()))\r\n        })\r\n      })\r\n    }\r\n    const result = await Promise.all(tasks)\r\n    return result.includes(true)\r\n  }\r\n\r\n  getInstanceByPaneId (paneId?: string, name?: string): Nullable<Indicator> | Nullable<Map<string, Indicator>> | Map<string, Map<string, Indicator>> {\r\n    const createMapping: ((instances: IndicatorImp[]) => Map<string, Indicator>) = (instances: IndicatorImp[]) => {\r\n      const mapping = new Map<string, Indicator>()\r\n      instances.forEach(ins => {\r\n        mapping.set(ins.name, ins)\r\n      })\r\n      return mapping\r\n    }\r\n\r\n    if (isString(paneId)) {\r\n      const paneInstances = this._instances.get(paneId) ?? []\r\n      if (isString(name)) {\r\n        return paneInstances?.find(ins => ins.name === name) ?? null\r\n      }\r\n      return createMapping(paneInstances)\r\n    }\r\n    const mapping = new Map<string, Map<string, Indicator>>()\r\n    this._instances.forEach((instances, paneId) => {\r\n      mapping.set(paneId, createMapping(instances))\r\n    })\r\n    return mapping\r\n  }\r\n\r\n  setSeriesPrecision (precision: Precision): void {\r\n    this._instances.forEach(paneInstances => {\r\n      paneInstances.forEach(instance => {\r\n        if (instance.series === IndicatorSeries.Price) {\r\n          instance.setPrecision(precision.price, true)\r\n        }\r\n        if (instance.series === IndicatorSeries.Volume) {\r\n          instance.setPrecision(precision.volume, true)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  async override (indicator: IndicatorCreate, paneId: Nullable<string>): Promise<[boolean, boolean]> {\r\n    const { name } = indicator\r\n    let instances: Map<string, IndicatorImp[]> = new Map()\r\n    if (paneId !== null) {\r\n      const paneInstances = this._instances.get(paneId)\r\n      if (isValid(paneInstances)) {\r\n        instances.set(paneId, paneInstances)\r\n      }\r\n    } else {\r\n      instances = this._instances\r\n    }\r\n    let onlyUpdateFlag = false\r\n    const tasks: Array<Promise<boolean>> = []\r\n    let sortFlag = false\r\n    instances.forEach(paneInstances => {\r\n      const instance = paneInstances.find(ins => ins.name === name)\r\n      if (isValid(instance)) {\r\n        const overrideResult = this._overrideInstance(instance, indicator)\r\n        if (overrideResult[2]) {\r\n          sortFlag = true\r\n        }\r\n        if (overrideResult[1]) {\r\n          tasks.push(instance.calcIndicator(this._chartStore.getDataList()))\r\n        } else {\r\n          if (overrideResult[0]) {\r\n            onlyUpdateFlag = true\r\n          }\r\n        }\r\n      }\r\n    })\r\n    if (sortFlag) {\r\n      this._sort()\r\n    }\r\n    const result = await Promise.all(tasks)\r\n    return [onlyUpdateFlag, result.includes(true)]\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport KLineData from '../common/KLineData'\r\nimport Crosshair from '../common/Crosshair'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport { isNumber } from '../common/utils/typeChecks'\r\n\r\nimport ChartStore from './ChartStore'\r\n\r\nexport interface TooltipIcon {\r\n  paneId: string\r\n  indicatorName: string\r\n  iconId: string\r\n}\r\n\r\nexport default class TooltipStore {\r\n  private readonly _chartStore: ChartStore\r\n  private _crosshair: Crosshair = {}\r\n  private _activeIcon: Nullable<TooltipIcon> = null\r\n\r\n  constructor (chartStore: ChartStore) {\r\n    this._chartStore = chartStore\r\n  }\r\n\r\n  /**\r\n    * ËÆæÁΩÆÂçÅÂ≠óÂÖâÊ†áÁÇπ‰ø°ÊÅØ\r\n    * @param crosshair\r\n    * @param notInvalidate\r\n    */\r\n  setCrosshair (crosshair?: Crosshair, notInvalidate?: boolean): void {\r\n    const dataList = this._chartStore.getDataList()\r\n    const cr = crosshair ?? {}\r\n    let realDataIndex: number\r\n    let dataIndex: number\r\n    if (isNumber(cr.x)) {\r\n      realDataIndex = this._chartStore.getTimeScaleStore().coordinateToDataIndex(cr.x)\r\n      if (realDataIndex < 0) {\r\n        dataIndex = 0\r\n      } else if (realDataIndex > dataList.length - 1) {\r\n        dataIndex = dataList.length - 1\r\n      } else {\r\n        dataIndex = realDataIndex\r\n      }\r\n    } else {\r\n      realDataIndex = dataList.length - 1\r\n      dataIndex = realDataIndex\r\n    }\r\n    const kLineData: Nullable<KLineData> = dataList[dataIndex]\r\n    const realX = this._chartStore.getTimeScaleStore().dataIndexToCoordinate(realDataIndex)\r\n    const prevCrosshair = { x: this._crosshair.x, y: this._crosshair.y, paneId: this._crosshair.paneId }\r\n    this._crosshair = { ...cr, realX, kLineData, realDataIndex, dataIndex }\r\n    if (\r\n      prevCrosshair.x !== cr.x || prevCrosshair.y !== cr.y || prevCrosshair.paneId !== cr.paneId\r\n    ) {\r\n      if (kLineData !== null) {\r\n        this._chartStore.getChart().crosshairChange(this._crosshair)\r\n      }\r\n      if (!(notInvalidate ?? false)) {\r\n        this._chartStore.getChart().updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÈáçÊñ∞ËÆ°ÁÆóÂçÅÂ≠óÂÖâÊ†á\r\n   * @param notInvalidate\r\n   */\r\n  recalculateCrosshair (notInvalidate: boolean): void {\r\n    this.setCrosshair(this._crosshair, notInvalidate)\r\n  }\r\n\r\n  /**\r\n   * Ëé∑Âèñcrosshair‰ø°ÊÅØ\r\n   * @returns\r\n   */\r\n  getCrosshair (): Crosshair {\r\n    return this._crosshair\r\n  }\r\n\r\n  setActiveIcon (icon?: TooltipIcon): void {\r\n    this._activeIcon = icon ?? null\r\n  }\r\n\r\n  getActiveIcon (): Nullable<TooltipIcon> {\r\n    return this._activeIcon\r\n  }\r\n\r\n  clear (): void {\r\n    this.setCrosshair({}, true)\r\n    this.setActiveIcon()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatThousands } from '../../common/utils/format'\r\nimport { isNumber } from '../../common/utils/typeChecks'\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { LineAttrs } from '../figure/line'\r\nimport { TextAttrs } from '../figure/text'\r\n\r\nconst fibonacciLine: OverlayTemplate = {\r\n  name: 'fibonacciLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding, overlay, precision, thousandsSeparator }) => {\r\n    const points = overlay.points\r\n    if (coordinates.length > 0) {\r\n      const lines: LineAttrs[] = []\r\n      const texts: TextAttrs[] = []\r\n      const startX = 0\r\n      const endX = bounding.width\r\n      if (coordinates.length > 1 && isNumber(points[0].value) && isNumber(points[1].value)) {\r\n        const percents = [1, 0.786, 0.618, 0.5, 0.382, 0.236, 0]\r\n        const yDif = coordinates[0].y - coordinates[1].y\r\n        const valueDif = points[0].value - points[1].value\r\n        percents.forEach(percent => {\r\n          const y = coordinates[1].y + yDif * percent\r\n          const value = formatThousands(((points[1].value ?? 0) + valueDif * percent).toFixed(precision.price), thousandsSeparator)\r\n          lines.push({ coordinates: [{ x: startX, y }, { x: endX, y }] })\r\n          texts.push({\r\n            x: startX,\r\n            y,\r\n            text: `${value} (${(percent * 100).toFixed(1)}%)`,\r\n            baseline: 'bottom'\r\n          })\r\n        })\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: lines\r\n        }, {\r\n          type: 'text',\r\n          isCheckEvent: false,\r\n          attrs: texts\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default fibonacciLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from '../../common/utils/typeChecks'\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst horizontalRayLine: OverlayTemplate = {\r\n  name: 'horizontalRayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    const coordinate = { x: 0, y: coordinates[0].y }\r\n    if (isValid(coordinates[1]) && coordinates[0].x < coordinates[1].x) {\r\n      coordinate.x = bounding.width\r\n    }\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [coordinates[0], coordinate] }\r\n      }\r\n    ]\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].value = performPoint.value\r\n    points[1].value = performPoint.value\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].value = performPoint.value\r\n    }\r\n  }\r\n}\r\n\r\nexport default horizontalRayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { LineAttrs } from '../figure/line'\r\n\r\nconst horizontalSegment: OverlayTemplate = {\r\n  name: 'horizontalSegment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    const lines: LineAttrs[] = []\r\n    if (coordinates.length === 2) {\r\n      lines.push({ coordinates })\r\n    }\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: lines\r\n      }\r\n    ]\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].value = performPoint.value\r\n    points[1].value = performPoint.value\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].value = performPoint.value\r\n    }\r\n  }\r\n}\r\n\r\nexport default horizontalSegment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst horizontalStraightLine: OverlayTemplate = {\r\n  name: 'horizontalStraightLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    return [{\r\n      type: 'line',\r\n      attrs: {\r\n        coordinates: [\r\n          {\r\n            x: 0,\r\n            y: coordinates[0].y\r\n          }, {\r\n            x: bounding.width,\r\n            y: coordinates[0].y\r\n          }\r\n        ]\r\n      }\r\n    }]\r\n  }\r\n}\r\n\r\nexport default horizontalStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from './utils/typeChecks'\r\n\r\nimport { EventName, MouseTouchEvent, MouseTouchEventCallback } from './SyntheticEvent'\r\n\r\nexport interface EventDispatcher {\r\n  dispatchEvent: (name: EventName, event: MouseTouchEvent, other?: number) => boolean\r\n}\r\n\r\nexport default abstract class Eventful implements EventDispatcher {\r\n  private _children: Eventful[] = []\r\n\r\n  private readonly _callbacks = new Map<EventName, MouseTouchEventCallback>()\r\n\r\n  registerEvent (name: EventName, callback: MouseTouchEventCallback): Eventful {\r\n    this._callbacks.set(name, callback)\r\n    return this\r\n  }\r\n\r\n  onEvent (name: EventName, event: MouseTouchEvent, other?: number): boolean {\r\n    const callback = this._callbacks.get(name)\r\n    if (isValid(callback) && this.checkEventOn(event)) {\r\n      return callback(event, other)\r\n    }\r\n    return false\r\n  }\r\n\r\n  checkEventOn (event: MouseTouchEvent): boolean {\r\n    for (const eventful of this._children) {\r\n      if (eventful.checkEventOn(event)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  dispatchEvent (name: EventName, event: MouseTouchEvent, other?: number): boolean {\r\n    const start = this._children.length - 1\r\n    if (start > -1) {\r\n      for (let i = start; i > -1; i--) {\r\n        if (this._children[i].dispatchEvent(name, event, other)) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return this.onEvent(name, event, other)\r\n  }\r\n\r\n  addChild (eventful: Eventful): Eventful {\r\n    this._children.push(eventful)\r\n    return this\r\n  }\r\n\r\n  clear (): void {\r\n    this._children = []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../common/Coordinate'\r\n\r\nimport Eventful from '../common/Eventful'\r\nimport { MouseTouchEvent } from '../common/SyntheticEvent'\r\n\r\nexport const DEVIATION = 2\r\n\r\nexport interface Figure<A = any, S = any> {\r\n  name: string\r\n  attrs: A\r\n  styles: S\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: A, styles: S) => void\r\n  checkEventOn: (coordinate: Coordinate, attrs: A, styles: S) => boolean\r\n}\r\n\r\nexport type FigureTemplate<A = any, S = any> = Pick<Figure<A, S>, 'name' | 'draw' | 'checkEventOn'>\r\n\r\nexport type FigureCreate<A = any, S = any> = Pick<Figure<A, S>, 'name' | 'attrs' | 'styles'>\r\n\r\nexport type FigureInnerConstructor<A = any, S = any> = new (figure: FigureCreate<A, S>) => FigureImp<A, S>\r\n\r\nexport type FigureConstructor<A = any, S = any> = new (figure: FigureCreate<A, S>) => ({ draw: (ctx: CanvasRenderingContext2D) => void })\r\n\r\nexport default abstract class FigureImp<A = any, S = any> extends Eventful implements Omit<Figure<A, S>, 'name' | 'draw' | 'checkEventOn'> {\r\n  readonly attrs: A\r\n  readonly styles: S\r\n\r\n  constructor (figure: FigureCreate) {\r\n    super()\r\n    this.attrs = figure.attrs\r\n    this.styles = figure.styles\r\n  }\r\n\r\n  checkEventOn (event: MouseTouchEvent): boolean {\r\n    return this.checkEventOnImp(event, this.attrs, this.styles)\r\n  }\r\n\r\n  draw (ctx: CanvasRenderingContext2D): void {\r\n    this.drawImp(ctx, this.attrs, this.styles)\r\n  }\r\n\r\n  abstract checkEventOnImp (event: MouseTouchEvent, attrs: A, styles: S): boolean\r\n\r\n  abstract drawImp (ctx: CanvasRenderingContext2D, attrs: A, styles: S): void\r\n\r\n  static extend<A, S> (figure: FigureTemplate<A, S>): new (figure: FigureCreate) => FigureImp<A, S> {\r\n    class Custom extends FigureImp<A, S> {\r\n      checkEventOnImp (coordinate: Coordinate, attrs: A, styles: S): boolean {\r\n        return figure.checkEventOn(coordinate, attrs, styles)\r\n      }\r\n\r\n      drawImp (ctx: CanvasRenderingContext2D, attrs: A, styles: S): void {\r\n        figure.draw(ctx, attrs, styles)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../../common/Nullable'\r\nimport Coordinate from '../../common/Coordinate'\r\nimport { SmoothLineStyle, LineType } from '../../common/Styles'\r\n\r\nimport { FigureTemplate, DEVIATION } from '../../component/Figure'\r\n\r\nfunction getDistance (coordinate1: Coordinate, coordinate2: Coordinate): number {\r\n  return Math.sqrt(Math.pow(coordinate1.x + coordinate2.x, 2) + Math.pow(coordinate1.y + coordinate2.y, 2))\r\n}\r\n\r\nfunction getSmoothControlCoordinate (coordinates: Coordinate[]): Coordinate[] {\r\n  const d01 = getDistance(coordinates[0], coordinates[1])\r\n  const d12 = getDistance(coordinates[1], coordinates[2])\r\n  const d02 = d01 + d12\r\n  const vector = [coordinates[2].x - coordinates[0].x, coordinates[2].y - coordinates[0].y]\r\n  return [\r\n    {\r\n      x: coordinates[1].x - vector[0] * 0.5 * d01 / d02,\r\n      y: coordinates[1].y - vector[1] * 0.5 * d01 / d02\r\n    }, {\r\n      x: coordinates[1].x + vector[0] * 0.5 * d01 / d02,\r\n      y: coordinates[1].y + vector[1] * 0.5 * d01 / d02\r\n    }\r\n  ]\r\n}\r\n\r\nexport function checkCoordinateOnLine (coordinate: Coordinate, line: LineAttrs): boolean {\r\n  const coordinates = line.coordinates\r\n  if (coordinates.length > 1) {\r\n    for (let i = 1; i < coordinates.length; i++) {\r\n      const prevCoordinate = coordinates[i - 1]\r\n      const currentCoordinate = coordinates[i]\r\n      if (prevCoordinate.x === currentCoordinate.x) {\r\n        if (\r\n          Math.abs(prevCoordinate.y - coordinate.y) + Math.abs(currentCoordinate.y - coordinate.y) - Math.abs(prevCoordinate.y - currentCoordinate.y) < DEVIATION + DEVIATION &&\r\n          Math.abs(coordinate.x - prevCoordinate.x) < DEVIATION\r\n        ) {\r\n          return true\r\n        }\r\n      } else {\r\n        const kb = getLinearSlopeIntercept(prevCoordinate, currentCoordinate) as number[]\r\n        const y = getLinearYFromSlopeIntercept(kb, coordinate)\r\n        const yDif = Math.abs(y - coordinate.y)\r\n        if (\r\n          Math.abs(prevCoordinate.x - coordinate.x) + Math.abs(currentCoordinate.x - coordinate.x) - Math.abs(prevCoordinate.x - currentCoordinate.x) < DEVIATION + DEVIATION &&\r\n          yDif * yDif / (kb[0] * kb[0] + 1) < DEVIATION * DEVIATION\r\n        ) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function getLinearYFromSlopeIntercept (kb: Nullable<number[]>, coordinate: Coordinate): number {\r\n  if (kb != null) {\r\n    return coordinate.x * kb[0] + kb[1]\r\n  }\r\n  return coordinate.y\r\n}\r\n\r\n/**\r\n * Ëé∑ÂèñÁÇπÂú®‰∏§ÁÇπÂÜ≥ÂÆöÁöÑ‰∏ÄÊ¨°ÂáΩÊï∞‰∏äÁöÑyÂÄº\r\n * @param coordinate1\r\n * @param coordinate2\r\n * @param targetCoordinate\r\n */\r\nexport function getLinearYFromCoordinates (coordinate1: Coordinate, coordinate2: Coordinate, targetCoordinate: Coordinate): number {\r\n  const kb = getLinearSlopeIntercept(coordinate1, coordinate2)\r\n  return getLinearYFromSlopeIntercept(kb, targetCoordinate)\r\n}\r\n\r\nexport function getLinearSlopeIntercept (coordinate1: Coordinate, coordinate2: Coordinate): Nullable<number[]> {\r\n  const difX = coordinate1.x - coordinate2.x\r\n  if (difX !== 0) {\r\n    const k = (coordinate1.y - coordinate2.y) / difX\r\n    const b = coordinate1.y - k * coordinate1.x\r\n    return [k, b]\r\n  }\r\n  return null\r\n}\r\n\r\nexport function drawLine (ctx: CanvasRenderingContext2D, attrs: LineAttrs, styles: Partial<SmoothLineStyle>): void {\r\n  const { coordinates } = attrs\r\n  const length = coordinates.length\r\n  if (length > 1) {\r\n    const { style = LineType.Solid, smooth, size = 1, color = 'currentColor', dashedValue = [2, 2] } = styles\r\n    ctx.lineWidth = size\r\n    ctx.strokeStyle = color\r\n    if (style === LineType.Dashed) {\r\n      ctx.setLineDash(dashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    ctx.beginPath()\r\n    ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n\r\n    if (smooth ?? false) {\r\n      let controlCoordinates: Coordinate[] = []\r\n      for (let i = 1; i < length - 1; i++) {\r\n        controlCoordinates = controlCoordinates.concat(getSmoothControlCoordinate([coordinates[i - 1], coordinates[i], coordinates[i + 1]]))\r\n      }\r\n      ctx.quadraticCurveTo(controlCoordinates[0].x, controlCoordinates[0].y, coordinates[1].x, coordinates[1].y)\r\n      let i = 2\r\n      for (; i < length - 1; i++) {\r\n        ctx.bezierCurveTo(\r\n          controlCoordinates[(i - 2) * 2 + 1].x,\r\n          controlCoordinates[(i - 2) * 2 + 1].y,\r\n          controlCoordinates[(i - 1) * 2].x,\r\n          controlCoordinates[(i - 1) * 2].y,\r\n          coordinates[i].x,\r\n          coordinates[i].y\r\n        )\r\n      }\r\n      ctx.quadraticCurveTo(\r\n        controlCoordinates[(i - 2) * 2 + 1].x,\r\n        controlCoordinates[(i - 2) * 2 + 1].y,\r\n        coordinates[i].x,\r\n        coordinates[i].y\r\n      )\r\n    } else {\r\n      for (let i = 1; i < coordinates.length; i++) {\r\n        ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n      }\r\n    }\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n  }\r\n}\r\n\r\nexport interface LineAttrs {\r\n  coordinates: Coordinate[]\r\n}\r\n\r\nconst line: FigureTemplate<LineAttrs, Partial<SmoothLineStyle>> = {\r\n  name: 'line',\r\n  checkEventOn: checkCoordinateOnLine,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: LineAttrs, styles: Partial<SmoothLineStyle>) => {\r\n    drawLine(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default line\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport Bounding from '../../common/Bounding'\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { LineAttrs, getLinearSlopeIntercept } from '../figure/line'\r\n\r\n/**\r\n * Ëé∑ÂèñÂπ≥Ë°åÁ∫ø\r\n * @param coordinates\r\n * @param bounding\r\n * @param extendParallelLineCount\r\n * @returns {Array}\r\n */\r\nexport function getParallelLines (coordinates: Coordinate[], bounding: Bounding, extendParallelLineCount?: number): LineAttrs[] {\r\n  const count = extendParallelLineCount ?? 0\r\n  const lines: LineAttrs[] = []\r\n  if (coordinates.length > 1) {\r\n    if (coordinates[0].x === coordinates[1].x) {\r\n      const startY = 0\r\n      const endY = bounding.height\r\n      lines.push({ coordinates: [{ x: coordinates[0].x, y: startY }, { x: coordinates[0].x, y: endY }] })\r\n      if (coordinates.length > 2) {\r\n        lines.push({ coordinates: [{ x: coordinates[2].x, y: startY }, { x: coordinates[2].x, y: endY }] })\r\n        const distance = coordinates[0].x - coordinates[2].x\r\n        for (let i = 0; i < count; i++) {\r\n          const d = distance * (i + 1)\r\n          lines.push({ coordinates: [{ x: coordinates[0].x + d, y: startY }, { x: coordinates[0].x + d, y: endY }] })\r\n        }\r\n      }\r\n    } else {\r\n      const startX = 0\r\n      const endX = bounding.width\r\n      const kb = getLinearSlopeIntercept(coordinates[0], coordinates[1]) as number[]\r\n      const k = kb[0]\r\n      const b = kb[1]\r\n      lines.push({ coordinates: [{ x: startX, y: startX * k + b }, { x: endX, y: endX * k + b }] })\r\n      if (coordinates.length > 2) {\r\n        const b1 = coordinates[2].y - k * coordinates[2].x\r\n        lines.push({ coordinates: [{ x: startX, y: startX * k + b1 }, { x: endX, y: endX * k + b1 }] })\r\n        const distance = b - b1\r\n        for (let i = 0; i < count; i++) {\r\n          const b2 = b + distance * (i + 1)\r\n          lines.push({ coordinates: [{ x: startX, y: startX * k + b2 }, { x: endX, y: endX * k + b2 }] })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return lines\r\n}\r\n\r\nconst parallelStraightLine: OverlayTemplate = {\r\n  name: 'parallelStraightLine',\r\n  totalStep: 4,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: getParallelLines(coordinates, bounding)\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default parallelStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { getParallelLines } from './parallelStraightLine'\r\n\r\nconst priceChannelLine: OverlayTemplate = {\r\n  name: 'priceChannelLine',\r\n  totalStep: 4,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: getParallelLines(coordinates, bounding, 1)\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default priceChannelLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { formatThousands } from '../../common/utils/format'\r\n\r\nconst priceLine: OverlayTemplate = {\r\n  name: 'priceLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding, precision, overlay, thousandsSeparator }) => {\r\n    const { value = 0 } = (overlay.points)[0]\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [coordinates[0], { x: bounding.width, y: coordinates[0].y }] }\r\n      },\r\n      {\r\n        type: 'text',\r\n        ignoreEvent: true,\r\n        attrs: {\r\n          x: coordinates[0].x,\r\n          y: coordinates[0].y,\r\n          text: formatThousands(value.toFixed(precision.price), thousandsSeparator),\r\n          baseline: 'bottom'\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default priceLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport Bounding from '../../common/Bounding'\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { getLinearYFromCoordinates, LineAttrs } from '../figure/line'\r\n\r\nexport function getRayLine (coordinates: Coordinate[], bounding: Bounding): LineAttrs | LineAttrs[] {\r\n  if (coordinates.length > 1) {\r\n    let coordinate: Coordinate\r\n    if (coordinates[0].x === coordinates[1].x && coordinates[0].y !== coordinates[1].y) {\r\n      if (coordinates[0].y < coordinates[1].y) {\r\n        coordinate = {\r\n          x: coordinates[0].x,\r\n          y: bounding.height\r\n        }\r\n      } else {\r\n        coordinate = {\r\n          x: coordinates[0].x,\r\n          y: 0\r\n        }\r\n      }\r\n    } else if (coordinates[0].x > coordinates[1].x) {\r\n      coordinate = {\r\n        x: 0,\r\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\r\n      }\r\n    } else {\r\n      coordinate = {\r\n        x: bounding.width,\r\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\r\n      }\r\n    }\r\n    return { coordinates: [coordinates[0], coordinate] }\r\n  }\r\n  return []\r\n}\r\n\r\nconst rayLine: OverlayTemplate = {\r\n  name: 'rayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: getRayLine(coordinates, bounding)\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default rayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst segment: OverlayTemplate = {\r\n  name: 'segment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    if (coordinates.length === 2) {\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default segment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { getLinearYFromCoordinates } from '../figure/line'\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst straightLine: OverlayTemplate = {\r\n  name: 'straightLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    if (coordinates.length === 2) {\r\n      if (coordinates[0].x === coordinates[1].x) {\r\n        return [\r\n          {\r\n            type: 'line',\r\n            attrs: {\r\n              coordinates: [\r\n                {\r\n                  x: coordinates[0].x,\r\n                  y: 0\r\n                }, {\r\n                  x: coordinates[0].x,\r\n                  y: bounding.height\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: {\r\n            coordinates: [\r\n              {\r\n                x: 0,\r\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\r\n              }, {\r\n                x: bounding.width,\r\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default straightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalRayLine: OverlayTemplate = {\r\n  name: 'verticalRayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    if (coordinates.length === 2) {\r\n      const coordinate = { x: coordinates[0].x, y: 0 }\r\n      if (coordinates[0].y < coordinates[1].y) {\r\n        coordinate.y = bounding.height\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates: [coordinates[0], coordinate] }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].timestamp = performPoint.timestamp\r\n    points[0].dataIndex = performPoint.dataIndex\r\n    points[1].timestamp = performPoint.timestamp\r\n    points[1].dataIndex = performPoint.dataIndex\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].timestamp = performPoint.timestamp\r\n      points[0].dataIndex = performPoint.dataIndex\r\n    }\r\n  }\r\n}\r\n\r\nexport default verticalRayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalSegment: OverlayTemplate = {\r\n  name: 'verticalSegment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    if (coordinates.length === 2) {\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].timestamp = performPoint.timestamp\r\n    points[0].dataIndex = performPoint.dataIndex\r\n    points[1].timestamp = performPoint.timestamp\r\n    points[1].dataIndex = performPoint.dataIndex\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].timestamp = performPoint.timestamp\r\n      points[0].dataIndex = performPoint.dataIndex\r\n    }\r\n  }\r\n}\r\n\r\nexport default verticalSegment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalStraightLine: OverlayTemplate = {\r\n  name: 'verticalStraightLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: {\r\n          coordinates: [\r\n            {\r\n              x: coordinates[0].x,\r\n              y: 0\r\n            }, {\r\n              x: coordinates[0].x,\r\n              y: bounding.height\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default verticalStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\nimport { isFunction, isValid } from '../../common/utils/typeChecks'\r\nimport { LineType } from '../../common/Styles'\r\n\r\nconst simpleAnnotation: OverlayTemplate = {\r\n  name: 'simpleAnnotation',\r\n  totalStep: 2,\r\n  styles: {\r\n    line: { style: LineType.Dashed }\r\n  },\r\n  createPointFigures: ({ overlay, coordinates }) => {\r\n    let text\r\n    if (isValid(overlay.extendData)) {\r\n      if (!isFunction(overlay.extendData)) {\r\n        text = overlay.extendData ?? ''\r\n      } else {\r\n        text = overlay.extendData(overlay)\r\n      }\r\n    }\r\n    const startX = coordinates[0].x\r\n    const startY = coordinates[0].y - 6\r\n    const lineEndY = startY - 50\r\n    const arrowEndY = lineEndY - 5\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [{ x: startX, y: startY }, { x: startX, y: lineEndY }] },\r\n        ignoreEvent: true\r\n      },\r\n      {\r\n        type: 'polygon',\r\n        attrs: { coordinates: [{ x: startX, y: lineEndY }, { x: startX - 4, y: arrowEndY }, { x: startX + 4, y: arrowEndY }] },\r\n        ignoreEvent: true\r\n      },\r\n      {\r\n        type: 'text',\r\n        attrs: { x: startX, y: arrowEndY, text: text ?? '', align: 'center', baseline: 'bottom' },\r\n        ignoreEvent: true\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default simpleAnnotation\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatPrecision } from '../../common/utils/format'\r\n\r\nimport { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { isFunction, isNumber, isValid } from '../../common/utils/typeChecks'\r\n\r\nimport { LineType } from '../../common/Styles'\r\n\r\nconst simpleTag: OverlayTemplate = {\r\n  name: 'simpleTag',\r\n  totalStep: 2,\r\n  styles: {\r\n    line: { style: LineType.Dashed }\r\n  },\r\n  createPointFigures: ({ bounding, coordinates }) => {\r\n    return {\r\n      type: 'line',\r\n      attrs: {\r\n        coordinates: [\r\n          { x: 0, y: coordinates[0].y },\r\n          { x: bounding.width, y: coordinates[0].y }\r\n        ]\r\n      },\r\n      ignoreEvent: true\r\n    }\r\n  },\r\n  createYAxisFigures: ({ overlay, coordinates, bounding, yAxis, precision }) => {\r\n    const isFromZero = yAxis?.isFromZero() ?? false\r\n    let textAlign: CanvasTextAlign\r\n    let x: number\r\n    if (isFromZero) {\r\n      textAlign = 'left'\r\n      x = 0\r\n    } else {\r\n      textAlign = 'right'\r\n      x = bounding.width\r\n    }\r\n    let text\r\n    if (isValid(overlay.extendData)) {\r\n      if (!isFunction(overlay.extendData)) {\r\n        text = overlay.extendData ?? ''\r\n      } else {\r\n        text = overlay.extendData(overlay)\r\n      }\r\n    }\r\n    if (!isValid(text) && isNumber(overlay.points[0].value)) {\r\n      text = formatPrecision(overlay.points[0].value, precision.price)\r\n    }\r\n    return { type: 'text', attrs: { x, y: coordinates[0].y, text: text ?? '', align: textAlign, baseline: 'middle' } }\r\n  }\r\n}\r\n\r\nexport default simpleTag\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../../common/Nullable'\r\n\r\nimport OverlayImp, { OverlayTemplate, OverlayConstructor, OverlayInnerConstructor } from '../../component/Overlay'\r\n\r\nimport fibonacciLine from './fibonacciLine'\r\nimport horizontalRayLine from './horizontalRayLine'\r\nimport horizontalSegment from './horizontalSegment'\r\nimport horizontalStraightLine from './horizontalStraightLine'\r\nimport parallelStraightLine from './parallelStraightLine'\r\nimport priceChannelLine from './priceChannelLine'\r\nimport priceLine from './priceLine'\r\nimport rayLine from './rayLine'\r\nimport segment from './segment'\r\nimport straightLine from './straightLine'\r\nimport verticalRayLine from './verticalRayLine'\r\nimport verticalSegment from './verticalSegment'\r\nimport verticalStraightLine from './verticalStraightLine'\r\n\r\nimport simpleAnnotation from './simpleAnnotation'\r\nimport simpleTag from './simpleTag'\r\n\r\nconst overlays: Record<string, OverlayInnerConstructor> = {}\r\n\r\nconst extensions = [\r\n  fibonacciLine, horizontalRayLine, horizontalSegment, horizontalStraightLine,\r\n  parallelStraightLine, priceChannelLine, priceLine, rayLine, segment,\r\n  straightLine, verticalRayLine, verticalSegment, verticalStraightLine,\r\n  simpleAnnotation, simpleTag\r\n]\r\n\r\nextensions.forEach((template: OverlayTemplate) => {\r\n  overlays[template.name] = OverlayImp.extend(template)\r\n})\r\n\r\nfunction registerOverlay (template: OverlayTemplate): void {\r\n  overlays[template.name] = OverlayImp.extend(template)\r\n}\r\n\r\nfunction getOverlayInnerClass (name: string): Nullable<OverlayInnerConstructor> {\r\n  return overlays[name] ?? null\r\n}\r\n\r\nfunction getOverlayClass (name: string): Nullable<OverlayConstructor> {\r\n  return overlays[name] ?? null\r\n}\r\n\r\nfunction getSupportedOverlays (): string[] {\r\n  return Object.keys(overlays)\r\n}\r\n\r\nexport { registerOverlay, getOverlayClass, getOverlayInnerClass, getSupportedOverlays }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport interface PaneGap {\r\n  top?: number\r\n  bottom?: number\r\n}\r\n\r\nexport interface PaneAxisOptions {\r\n  scrollZoomEnabled?: boolean\r\n}\r\n\r\nexport const enum PanePosition {\r\n  Top = 'top',\r\n  Bottom = 'bottom'\r\n}\r\n\r\nexport interface PaneOptions {\r\n  id?: string\r\n  height?: number\r\n  minHeight?: number\r\n  dragEnabled?: boolean\r\n  position?: PanePosition\r\n  gap?: PaneGap\r\n  axisOptions?: PaneAxisOptions\r\n}\r\n\r\nexport const PANE_MIN_HEIGHT = 30\r\n\r\nexport const PANE_DEFAULT_HEIGHT = 100\r\n\r\nexport const PaneIdConstants = {\r\n  CANDLE: 'candle_pane',\r\n  INDICATOR: 'indicator_pane_',\r\n  X_AXIS: 'x_axis_pane'\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport { MouseTouchEvent } from '../common/SyntheticEvent'\r\nimport { isFunction, isValid, isString, isBoolean, isNumber, isArray } from '../common/utils/typeChecks'\r\nimport { createId } from '../common/utils/id'\r\n\r\nimport OverlayImp, { OVERLAY_ID_PREFIX, OVERLAY_ACTIVE_Z_LEVEL, OverlayCreate, OverlayRemove } from '../component/Overlay'\r\n\r\nimport { getOverlayInnerClass } from '../extension/overlay/index'\r\n\r\nimport ChartStore from './ChartStore'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nexport interface ProgressOverlayInfo {\r\n  paneId: string\r\n  instance: OverlayImp\r\n  appointPaneFlag: boolean\r\n}\r\n\r\nexport const enum EventOverlayInfoFigureType {\r\n  None, Point, Other\r\n}\r\n\r\nexport interface EventOverlayInfo {\r\n  paneId: string\r\n  instance: Nullable<OverlayImp>\r\n  figureType: EventOverlayInfoFigureType\r\n  figureKey: string\r\n  figureIndex: number\r\n  attrsIndex: number\r\n}\r\n\r\nexport default class OverlayStore {\r\n  private readonly _chartStore: ChartStore\r\n\r\n  private _instances = new Map<string, OverlayImp[]>()\r\n\r\n  /**\r\n   * Overlay information in painting\r\n   */\r\n  private _progressInstanceInfo: Nullable<ProgressOverlayInfo> = null\r\n\r\n  /**\r\n   * Overlay information by the mouse pressed\r\n   */\r\n  private _pressedInstanceInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    instance: null,\r\n    figureType: EventOverlayInfoFigureType.None,\r\n    figureKey: '',\r\n    figureIndex: -1,\r\n    attrsIndex: -1\r\n  }\r\n\r\n  /**\r\n   * Overlay information by hover\r\n   */\r\n  private _hoverInstanceInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    instance: null,\r\n    figureType: EventOverlayInfoFigureType.None,\r\n    figureKey: '',\r\n    figureIndex: -1,\r\n    attrsIndex: -1\r\n  }\r\n\r\n  /**\r\n   * Overlay information by the mouse click\r\n   */\r\n  private _clickInstanceInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    instance: null,\r\n    figureType: EventOverlayInfoFigureType.None,\r\n    figureKey: '',\r\n    figureIndex: -1,\r\n    attrsIndex: -1\r\n  }\r\n\r\n  constructor (chartStore: ChartStore) {\r\n    this._chartStore = chartStore\r\n  }\r\n\r\n  private _overrideInstance (instance: OverlayImp, overlay: Partial<OverlayCreate>): [boolean, boolean] {\r\n    const {\r\n      id, groupId, points, styles, lock, visible,\r\n      zLevel, mode, modeSensitivity, extendData,\r\n      onDrawStart, onDrawing,\r\n      onDrawEnd, onClick, onDoubleClick, onRightClick,\r\n      onPressedMoveStart, onPressedMoving, onPressedMoveEnd,\r\n      onMouseEnter, onMouseLeave,\r\n      onRemoved, onSelected, onDeselected\r\n    } = overlay\r\n    let updateFlag = false\r\n    let sortFlag = false\r\n    if (isString(id)) {\r\n      instance.setId(id)\r\n    }\r\n    if (isString(groupId)) {\r\n      instance.setGroupId(groupId)\r\n    }\r\n    if (isArray(points) && instance.setPoints(points)) {\r\n      updateFlag = true\r\n    }\r\n    if (isValid(styles) && instance.setStyles(styles)) {\r\n      updateFlag = true\r\n    }\r\n    if (isBoolean(lock)) {\r\n      instance.setLock(lock)\r\n    }\r\n    if (isBoolean(visible) && instance.setVisible(visible)) {\r\n      updateFlag = true\r\n    }\r\n    if (isNumber(zLevel) && instance.setZLevel(zLevel)) {\r\n      updateFlag = true\r\n      sortFlag = true\r\n    }\r\n    if (isValid(mode)) {\r\n      instance.setMode(mode)\r\n    }\r\n    if (isNumber(modeSensitivity)) {\r\n      instance.setModeSensitivity(modeSensitivity)\r\n    }\r\n    if (instance.setExtendData(extendData)) {\r\n      updateFlag = true\r\n    }\r\n    if (onDrawStart !== undefined) {\r\n      instance.setOnDrawStartCallback(onDrawStart)\r\n    }\r\n    if (onDrawing !== undefined) {\r\n      instance.setOnDrawingCallback(onDrawing)\r\n    }\r\n    if (onDrawEnd !== undefined) {\r\n      instance.setOnDrawEndCallback(onDrawEnd)\r\n    }\r\n    if (onClick !== undefined) {\r\n      instance.setOnClickCallback(onClick)\r\n    }\r\n    if (onDoubleClick !== undefined) {\r\n      instance.setOnDoubleClickCallback(onDoubleClick)\r\n    }\r\n    if (onRightClick !== undefined) {\r\n      instance.setOnRightClickCallback(onRightClick)\r\n    }\r\n    if (onPressedMoveStart !== undefined) {\r\n      instance.setOnPressedMoveStartCallback(onPressedMoveStart)\r\n    }\r\n    if (onPressedMoving !== undefined) {\r\n      instance.setOnPressedMovingCallback(onPressedMoving)\r\n    }\r\n    if (onPressedMoveEnd !== undefined) {\r\n      instance.setOnPressedMoveEndCallback(onPressedMoveEnd)\r\n    }\r\n    if (onMouseEnter !== undefined) {\r\n      instance.setOnMouseEnterCallback(onMouseEnter)\r\n    }\r\n    if (onMouseLeave !== undefined) {\r\n      instance.setOnMouseLeaveCallback(onMouseLeave)\r\n    }\r\n    if (onRemoved !== undefined) {\r\n      instance.setOnRemovedCallback(onRemoved)\r\n    }\r\n    if (onSelected !== undefined) {\r\n      instance.setOnSelectedCallback(onSelected)\r\n    }\r\n    if (onDeselected !== undefined) {\r\n      instance.setOnDeselectedCallback(onDeselected)\r\n    }\r\n    return [updateFlag, sortFlag]\r\n  }\r\n\r\n  getInstanceById (id: string): Nullable<OverlayImp> {\r\n    for (const entry of this._instances) {\r\n      const paneShapes = entry[1]\r\n      const overlay = paneShapes.find(s => s.id === id)\r\n      if (isValid(overlay)) {\r\n        return overlay\r\n      }\r\n    }\r\n    if (this._progressInstanceInfo !== null) {\r\n      if (this._progressInstanceInfo.instance.id === id) {\r\n        return this._progressInstanceInfo.instance\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  private _sort (paneId?: string): void {\r\n    if (isString(paneId)) {\r\n      this._instances.get(paneId)?.sort((o1, o2) => o1.zLevel - o2.zLevel)\r\n    } else {\r\n      this._instances.forEach(paneInstances => {\r\n        paneInstances.sort((o1, o2) => o1.zLevel - o2.zLevel)\r\n      })\r\n    }\r\n  }\r\n\r\n  addInstances (overlays: OverlayCreate[], paneId: string, appointPaneFlag: boolean): Array<Nullable<string>> {\r\n    const ids = overlays.map(overlay => {\r\n      const id = overlay.id ?? createId(OVERLAY_ID_PREFIX)\r\n      if (this.getInstanceById(id) === null) {\r\n        const OverlayClazz = getOverlayInnerClass(overlay.name)\r\n        if (OverlayClazz !== null) {\r\n          const instance = new OverlayClazz()\r\n          instance.setPaneId(paneId)\r\n          const groupId = overlay.groupId ?? id\r\n          overlay.id = id\r\n          overlay.groupId = groupId\r\n          this._overrideInstance(instance, overlay)\r\n          if (instance.isDrawing()) {\r\n            this._progressInstanceInfo = { paneId, instance, appointPaneFlag }\r\n          } else {\r\n            if (!this._instances.has(paneId)) {\r\n              this._instances.set(paneId, [])\r\n            }\r\n            this._instances.get(paneId)?.push(instance)\r\n          }\r\n          if (instance.isStart()) {\r\n            instance.onDrawStart?.(({ overlay: instance }))\r\n          }\r\n          return id\r\n        }\r\n      }\r\n      return null\r\n    })\r\n    if (ids.some(id => id !== null)) {\r\n      this._sort()\r\n      this._chartStore.getChart().updatePane(UpdateLevel.Overlay, paneId)\r\n    }\r\n    return ids\r\n  }\r\n\r\n  getProgressInstanceInfo (): Nullable<ProgressOverlayInfo> {\r\n    return this._progressInstanceInfo\r\n  }\r\n\r\n  progressInstanceComplete (): void {\r\n    if (this._progressInstanceInfo !== null) {\r\n      const { instance, paneId } = this._progressInstanceInfo\r\n      if (!instance.isDrawing()) {\r\n        if (!this._instances.has(paneId)) {\r\n          this._instances.set(paneId, [])\r\n        }\r\n        this._instances.get(paneId)?.push(instance)\r\n        this._sort(paneId)\r\n        this._progressInstanceInfo = null\r\n      }\r\n    }\r\n  }\r\n\r\n  updateProgressInstanceInfo (paneId: string, appointPaneFlag?: boolean): void {\r\n    if (this._progressInstanceInfo !== null) {\r\n      if (isBoolean(appointPaneFlag) && appointPaneFlag) {\r\n        this._progressInstanceInfo.appointPaneFlag = appointPaneFlag\r\n      }\r\n      this._progressInstanceInfo.paneId = paneId\r\n      this._progressInstanceInfo.instance.setPaneId(paneId)\r\n    }\r\n  }\r\n\r\n  getInstances (paneId?: string): OverlayImp[] {\r\n    if (!isString(paneId)) {\r\n      let instances: OverlayImp[] = []\r\n      this._instances.forEach(paneInstances => {\r\n        instances = instances.concat(paneInstances)\r\n      })\r\n      return instances\r\n    }\r\n    return this._instances.get(paneId) ?? []\r\n  }\r\n\r\n  override (overlay: Partial<OverlayCreate>): void {\r\n    const { id, groupId, name } = overlay\r\n    let updateFlag = false\r\n    let sortFlag = false\r\n\r\n    const setFlag: (instance: OverlayImp) => void = (instance: OverlayImp) => {\r\n      const flags = this._overrideInstance(instance, overlay)\r\n      if (flags[0]) {\r\n        updateFlag = true\r\n      }\r\n      if (flags[1]) {\r\n        sortFlag = true\r\n      }\r\n    }\r\n\r\n    if (isString(id)) {\r\n      const instance = this.getInstanceById(id)\r\n      if (instance !== null) {\r\n        setFlag(instance)\r\n      }\r\n    } else {\r\n      const nameValid = isString(name)\r\n      const groupIdValid = isString(groupId)\r\n      this._instances.forEach(paneInstances => {\r\n        paneInstances.forEach(instance => {\r\n          if (\r\n            (nameValid && instance.name === name) ||\r\n            (groupIdValid && instance.groupId === groupId) ||\r\n            (!nameValid && !groupIdValid)\r\n          ) {\r\n            setFlag(instance)\r\n          }\r\n        })\r\n      })\r\n      if (this._progressInstanceInfo !== null) {\r\n        const progressInstance = this._progressInstanceInfo.instance\r\n        if (\r\n          (nameValid && progressInstance.name === name) ||\r\n          (groupIdValid && progressInstance.groupId === groupId) ||\r\n          (!nameValid && !groupIdValid)\r\n        ) {\r\n          setFlag(progressInstance)\r\n        }\r\n      }\r\n    }\r\n    if (sortFlag) {\r\n      this._sort()\r\n    }\r\n    if (updateFlag) {\r\n      this._chartStore.getChart().updatePane(UpdateLevel.Overlay)\r\n    }\r\n  }\r\n\r\n  removeInstance (overlayRemove?: OverlayRemove): void {\r\n    const match: ((remove: OverlayRemove, overlay: OverlayImp) => boolean) = (remove: OverlayRemove, overlay: OverlayImp) => {\r\n      if (isString(remove.id)) {\r\n        if (overlay.id !== remove.id) {\r\n          return false\r\n        }\r\n      } else {\r\n        if (isString(remove.groupId)) {\r\n          if (overlay.groupId !== remove.groupId) {\r\n            return false\r\n          }\r\n        } else {\r\n          if (isString(remove.name)) {\r\n            if (overlay.name !== remove.name) {\r\n              return false\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return true\r\n    }\r\n\r\n    const updatePaneIds: string[] = []\r\n    const overlayRemoveValid = isValid(overlayRemove)\r\n    if (this._progressInstanceInfo !== null) {\r\n      const { instance } = this._progressInstanceInfo\r\n      if (\r\n        !overlayRemoveValid ||\r\n        (overlayRemoveValid && match(overlayRemove, instance))\r\n      ) {\r\n        updatePaneIds.push(this._progressInstanceInfo.paneId)\r\n        instance.onRemoved?.({ overlay: instance })\r\n        this._progressInstanceInfo = null\r\n      }\r\n    }\r\n    if (overlayRemoveValid) {\r\n      const instances = new Map<string, OverlayImp[]>()\r\n      for (const entry of this._instances) {\r\n        const paneInstances = entry[1]\r\n        const newPaneInstances = paneInstances.filter(instance => {\r\n          if (match(overlayRemove, instance)) {\r\n            if (!updatePaneIds.includes(entry[0])) {\r\n              updatePaneIds.push(entry[0])\r\n            }\r\n            instance.onRemoved?.({ overlay: instance })\r\n            return false\r\n          }\r\n          return true\r\n        })\r\n        if (newPaneInstances.length > 0) {\r\n          instances.set(entry[0], newPaneInstances)\r\n        }\r\n      }\r\n      this._instances = instances\r\n    } else {\r\n      this._instances.forEach((paneInstances, paneId) => {\r\n        updatePaneIds.push(paneId)\r\n        paneInstances.forEach(instance => {\r\n          instance.onRemoved?.({ overlay: instance })\r\n        })\r\n      })\r\n      this._instances.clear()\r\n    }\r\n    if (updatePaneIds.length > 0) {\r\n      const chart = this._chartStore.getChart()\r\n      updatePaneIds.forEach(paneId => {\r\n        chart.updatePane(UpdateLevel.Overlay, paneId)\r\n      })\r\n      chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n    }\r\n  }\r\n\r\n  setPressedInstanceInfo (info: EventOverlayInfo): void {\r\n    this._pressedInstanceInfo = info\r\n  }\r\n\r\n  getPressedInstanceInfo (): EventOverlayInfo {\r\n    return this._pressedInstanceInfo\r\n  }\r\n\r\n  setHoverInstanceInfo (info: EventOverlayInfo, event: MouseTouchEvent): void {\r\n    const { instance, figureType, figureKey, figureIndex } = this._hoverInstanceInfo\r\n    if (\r\n      instance?.id !== info.instance?.id ||\r\n      figureType !== info.figureType ||\r\n      figureIndex !== info.figureIndex\r\n    ) {\r\n      this._hoverInstanceInfo = info\r\n      if (instance?.id !== info.instance?.id) {\r\n        let ignoreUpdateFlag = false\r\n        let sortFlag = false\r\n        if (instance !== null) {\r\n          sortFlag = true\r\n          if (isFunction(instance.onMouseLeave)) {\r\n            instance.onMouseLeave({ overlay: instance, figureKey, figureIndex, ...event })\r\n            ignoreUpdateFlag = true\r\n          }\r\n        }\r\n\r\n        if (info.instance !== null) {\r\n          sortFlag = true\r\n          info.instance.setZLevel(OVERLAY_ACTIVE_Z_LEVEL)\r\n          if (isFunction(info.instance.onMouseEnter)) {\r\n            info.instance.onMouseEnter({ overlay: info.instance, figureKey: info.figureKey, figureIndex: info.figureIndex, ...event })\r\n            ignoreUpdateFlag = true\r\n          }\r\n        }\r\n        if (sortFlag) {\r\n          this._sort()\r\n        }\r\n        if (!ignoreUpdateFlag) {\r\n          this._chartStore.getChart().updatePane(UpdateLevel.Overlay)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getHoverInstanceInfo (): EventOverlayInfo {\r\n    return this._hoverInstanceInfo\r\n  }\r\n\r\n  setClickInstanceInfo (info: EventOverlayInfo, event: MouseTouchEvent): void {\r\n    const { paneId, instance, figureType, figureKey, figureIndex } = this._clickInstanceInfo\r\n    if (!(info.instance?.isDrawing() ?? false)) {\r\n      info.instance?.onClick?.({ overlay: info.instance, figureKey: info.figureKey, figureIndex: info.figureIndex, ...event })\r\n    }\r\n    if (instance?.id !== info.instance?.id || figureType !== info.figureType || figureIndex !== info.figureIndex) {\r\n      this._clickInstanceInfo = info\r\n      if (instance?.id !== info.instance?.id) {\r\n        instance?.onDeselected?.({ overlay: instance, figureKey, figureIndex, ...event })\r\n        info.instance?.onSelected?.({ overlay: info.instance, figureKey: info.figureKey, figureIndex: info.figureIndex, ...event })\r\n        const chart = this._chartStore.getChart()\r\n        chart.updatePane(UpdateLevel.Overlay, info.paneId)\r\n        if (paneId !== info.paneId) {\r\n          chart.updatePane(UpdateLevel.Overlay, paneId)\r\n        }\r\n        chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n      }\r\n    }\r\n  }\r\n\r\n  getClickInstanceInfo (): EventOverlayInfo {\r\n    return this._clickInstanceInfo\r\n  }\r\n\r\n  isEmpty (): boolean {\r\n    return this._instances.size === 0 && this._progressInstanceInfo === null\r\n  }\r\n\r\n  isDrawing (): boolean {\r\n    return this._progressInstanceInfo !== null && (this._progressInstanceInfo?.instance.isDrawing() ?? false)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Action, { ActionType, ActionCallback } from '../common/Action'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nexport default class ActionStore {\r\n  /**\r\n   * Chart action map\r\n   */\r\n  private readonly _actions: Map<ActionType, Action> = new Map()\r\n\r\n  execute (type: ActionType, data?: any): void {\r\n    this._actions.get(type)?.execute(data)\r\n  }\r\n\r\n  subscribe (type: ActionType, callback: ActionCallback): void {\r\n    if (!this._actions.has(type)) {\r\n      this._actions.set(type, new Action())\r\n    }\r\n    this._actions.get(type)?.subscribe(callback)\r\n  }\r\n\r\n  /**\r\n   * ÂèñÊ∂à‰∫ã‰ª∂ËÆ¢ÈòÖ\r\n   * @param type\r\n   * @param callback\r\n   * @return {boolean}\r\n   */\r\n  unsubscribe (type: ActionType, callback?: ActionCallback): void {\r\n    const action = this._actions.get(type)\r\n    if (isValid(action)) {\r\n      action.unsubscribe(callback)\r\n      if (action.isEmpty()) {\r\n        this._actions.delete(type)\r\n      }\r\n    }\r\n  }\r\n\r\n  has (type: ActionType): boolean {\r\n    const action = this._actions.get(type)\r\n    return isValid(action) && !action.isEmpty()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DeepPartial from '../../common/DeepPartial'\r\nimport { Styles } from '../../common/Styles'\r\n\r\nconst light: DeepPartial<Styles> = {\r\n  grid: {\r\n    horizontal: {\r\n      color: '#EDEDED'\r\n    },\r\n    vertical: {\r\n      color: '#EDEDED'\r\n    }\r\n  },\r\n  candle: {\r\n    priceMark: {\r\n      high: {\r\n        color: '#76808F'\r\n      },\r\n      low: {\r\n        color: '#76808F'\r\n      }\r\n    },\r\n    tooltip: {\r\n      rect: {\r\n        color: '#FEFEFE',\r\n        borderColor: '#F2F3F5'\r\n      },\r\n      text: {\r\n        color: '#76808F'\r\n      }\r\n    }\r\n  },\r\n  indicator: {\r\n    tooltip: {\r\n      text: {\r\n        color: '#76808F'\r\n      }\r\n    }\r\n  },\r\n  xAxis: {\r\n    axisLine: {\r\n      color: '#DDDDDD'\r\n    },\r\n    tickText: {\r\n      color: '#76808F'\r\n    },\r\n    tickLine: {\r\n      color: '#DDDDDD'\r\n    }\r\n  },\r\n  yAxis: {\r\n    axisLine: {\r\n      color: '#DDDDDD'\r\n    },\r\n    tickText: {\r\n      color: '#76808F'\r\n    },\r\n    tickLine: {\r\n      color: '#DDDDDD'\r\n    }\r\n  },\r\n  separator: {\r\n    color: '#DDDDDD'\r\n  },\r\n  crosshair: {\r\n    horizontal: {\r\n      line: {\r\n        color: '#76808F'\r\n      },\r\n      text: {\r\n        borderColor: '#686D76',\r\n        backgroundColor: '#686D76'\r\n      }\r\n    },\r\n    vertical: {\r\n      line: {\r\n        color: '#76808F'\r\n      },\r\n      text: {\r\n        borderColor: '#686D76',\r\n        backgroundColor: '#686D76'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default light\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DeepPartial from '../../common/DeepPartial'\r\nimport { Styles } from '../../common/Styles'\r\n\r\nconst dark: DeepPartial<Styles> = {\r\n  grid: {\r\n    horizontal: {\r\n      color: '#292929'\r\n    },\r\n    vertical: {\r\n      color: '#292929'\r\n    }\r\n  },\r\n  candle: {\r\n    priceMark: {\r\n      high: {\r\n        color: '#929AA5'\r\n      },\r\n      low: {\r\n        color: '#929AA5'\r\n      }\r\n    },\r\n    tooltip: {\r\n      rect: {\r\n        color: 'rgba(10, 10, 10, .6)',\r\n        borderColor: 'rgba(10, 10, 10, .6)'\r\n      },\r\n      text: {\r\n        color: '#929AA5'\r\n      }\r\n    }\r\n  },\r\n  indicator: {\r\n    tooltip: {\r\n      text: {\r\n        color: '#929AA5'\r\n      }\r\n    }\r\n  },\r\n  xAxis: {\r\n    axisLine: {\r\n      color: '#333333'\r\n    },\r\n    tickText: {\r\n      color: '#929AA5'\r\n    },\r\n    tickLine: {\r\n      color: '#333333'\r\n    }\r\n  },\r\n  yAxis: {\r\n    axisLine: {\r\n      color: '#333333'\r\n    },\r\n    tickText: {\r\n      color: '#929AA5'\r\n    },\r\n    tickLine: {\r\n      color: '#333333'\r\n    }\r\n  },\r\n  separator: {\r\n    color: '#333333'\r\n  },\r\n  crosshair: {\r\n    horizontal: {\r\n      line: {\r\n        color: '#929AA5'\r\n      },\r\n      text: {\r\n        borderColor: '#373a40',\r\n        backgroundColor: '#373a40'\r\n      }\r\n    },\r\n    vertical: {\r\n      line: {\r\n        color: '#929AA5'\r\n      },\r\n      text: {\r\n        borderColor: '#373a40',\r\n        backgroundColor: '#373a40'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default dark\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../../common/Nullable'\r\nimport DeepPartial from '../../common/DeepPartial'\r\nimport { Styles } from '../../common/Styles'\r\n\r\nimport light from './light'\r\nimport dark from './dark'\r\n\r\nconst styles: Record<string, DeepPartial<Styles>> = {\r\n  light,\r\n  dark\r\n}\r\n\r\nfunction registerStyles (name: string, ss: DeepPartial<Styles>): void {\r\n  styles[name] = ss\r\n}\r\n\r\nfunction getStyles (name: string): Nullable<DeepPartial<Styles>> {\r\n  return styles[name] ?? null\r\n}\r\n\r\nexport {\r\n  registerStyles,\r\n  getStyles\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport KLineData from '../common/KLineData'\r\nimport Precision from '../common/Precision'\r\nimport VisibleData from '../common/VisibleData'\r\nimport { getDefaultStyles, Styles } from '../common/Styles'\r\nimport { isArray, isString, isValid, merge } from '../common/utils/typeChecks'\r\n\r\nimport { getDefaultCustomApi, CustomApi, defaultLocale, Options } from '../Options'\r\n\r\nimport TimeScaleStore from './TimeScaleStore'\r\nimport IndicatorStore from './IndicatorStore'\r\nimport TooltipStore from './TooltipStore'\r\nimport OverlayStore from './OverlayStore'\r\nimport ActionStore from './ActionStore'\r\n\r\nimport { getStyles } from '../extension/styles/index'\r\n\r\nimport Chart from '../Chart'\r\n\r\nexport default class ChartStore {\r\n  /**\r\n   * Internal chart\r\n   */\r\n  private readonly _chart: Chart\r\n\r\n  /**\r\n   * Style config\r\n   */\r\n  private readonly _styles: Styles = getDefaultStyles()\r\n\r\n  /**\r\n   * Custom api\r\n   */\r\n  private readonly _customApi: CustomApi = getDefaultCustomApi()\r\n\r\n  /**\r\n   * language\r\n   */\r\n  private _locale: string = defaultLocale\r\n\r\n  /**\r\n   * Price and volume precision\r\n   */\r\n  private _precision: Precision = { price: 2, volume: 0 }\r\n\r\n  /**\r\n   * Thousands separator\r\n   */\r\n  private _thousandsSeparator: string = ','\r\n\r\n  /**\r\n   * Data source\r\n   */\r\n  private _dataList: KLineData[] = []\r\n\r\n  /**\r\n   * Time scale store\r\n   */\r\n  private readonly _timeScaleStore = new TimeScaleStore(this)\r\n\r\n  /**\r\n   * Indicator store\r\n   */\r\n  private readonly _indicatorStore = new IndicatorStore(this)\r\n\r\n  /**\r\n   * Overlay store\r\n   */\r\n  private readonly _overlayStore = new OverlayStore(this)\r\n\r\n  /**\r\n   * Tooltip store\r\n   */\r\n  private readonly _tooltipStore = new TooltipStore(this)\r\n\r\n  /**\r\n   * Chart action store\r\n   */\r\n  private readonly _actionStore = new ActionStore()\r\n\r\n  /**\r\n   * Visible data array\r\n   */\r\n  private _visibleDataList: VisibleData[] = []\r\n\r\n  constructor (chart: Chart, options?: Options) {\r\n    this._chart = chart\r\n    this.setOptions(options)\r\n  }\r\n\r\n  /**\r\n   * @description Adjust visible data\r\n   * @return {*}\r\n   */\r\n  adjustVisibleDataList (): void {\r\n    this._visibleDataList = []\r\n    const { from, to } = this._timeScaleStore.getVisibleRange()\r\n    for (let i = from; i < to; i++) {\r\n      const kLineData = this._dataList[i]\r\n      const x = this._timeScaleStore.dataIndexToCoordinate(i)\r\n      this._visibleDataList.push({\r\n        dataIndex: i,\r\n        x,\r\n        data: kLineData\r\n      })\r\n    }\r\n  }\r\n\r\n  setOptions (options?: Options): ChartStore {\r\n    if (isValid(options)) {\r\n      const { locale, timezone, styles, customApi, thousandsSeparator } = options\r\n      if (isString(locale)) {\r\n        this._locale = locale\r\n      }\r\n      if (isString(timezone)) {\r\n        this._timeScaleStore.setTimezone(timezone)\r\n      }\r\n      if (isValid(styles)) {\r\n        if (isString(styles)) {\r\n          merge(this._styles, getStyles(styles))\r\n        } else {\r\n          merge(this._styles, styles)\r\n        }\r\n      }\r\n      if (isValid(customApi)) {\r\n        merge(this._customApi, customApi)\r\n      }\r\n      if (isString(thousandsSeparator)) {\r\n        this._thousandsSeparator = thousandsSeparator\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  getStyles (): Styles {\r\n    return this._styles\r\n  }\r\n\r\n  getLocale (): string {\r\n    return this._locale\r\n  }\r\n\r\n  getCustomApi (): CustomApi {\r\n    return this._customApi\r\n  }\r\n\r\n  getThousandsSeparator (): string {\r\n    return this._thousandsSeparator\r\n  }\r\n\r\n  getPrecision (): Precision {\r\n    return this._precision\r\n  }\r\n\r\n  setPrecision (precision: Precision): ChartStore {\r\n    this._precision = precision\r\n    this._indicatorStore.setSeriesPrecision(precision)\r\n    return this\r\n  }\r\n\r\n  getDataList (): KLineData[] {\r\n    return this._dataList\r\n  }\r\n\r\n  getVisibleDataList (): VisibleData[] {\r\n    return this._visibleDataList\r\n  }\r\n\r\n  addData (data: KLineData | KLineData[], pos: number, more?: boolean): void {\r\n    if (isArray<KLineData>(data)) {\r\n      this._timeScaleStore.setLoading(false)\r\n      this._timeScaleStore.setMore(more ?? true)\r\n      const isFirstAdd = this._dataList.length === 0\r\n      this._dataList = data.concat(this._dataList)\r\n      if (isFirstAdd) {\r\n        this._timeScaleStore.resetOffsetRightDistance()\r\n      }\r\n      this._timeScaleStore.adjustVisibleRange()\r\n    } else {\r\n      const dataSize = this._dataList.length\r\n      if (pos >= dataSize) {\r\n        this._dataList.push(data)\r\n        let lastBarRightSideDiffBarCount = this._timeScaleStore.getLastBarRightSideDiffBarCount()\r\n        if (lastBarRightSideDiffBarCount < 0) {\r\n          this._timeScaleStore.setLastBarRightSideDiffBarCount(--lastBarRightSideDiffBarCount)\r\n        }\r\n        this._timeScaleStore.adjustVisibleRange()\r\n      } else {\r\n        this._dataList[pos] = data\r\n        this.adjustVisibleDataList()\r\n      }\r\n    }\r\n    this._tooltipStore.recalculateCrosshair(true)\r\n  }\r\n\r\n  clear (): void {\r\n    this._dataList = []\r\n    this._visibleDataList = []\r\n    this._timeScaleStore.clear()\r\n    this._tooltipStore.clear()\r\n  }\r\n\r\n  getTimeScaleStore (): TimeScaleStore {\r\n    return this._timeScaleStore\r\n  }\r\n\r\n  getIndicatorStore (): IndicatorStore {\r\n    return this._indicatorStore\r\n  }\r\n\r\n  getOverlayStore (): OverlayStore {\r\n    return this._overlayStore\r\n  }\r\n\r\n  getTooltipStore (): TooltipStore {\r\n    return this._tooltipStore\r\n  }\r\n\r\n  getActionStore (): ActionStore {\r\n    return this._actionStore\r\n  }\r\n\r\n  getChart (): Chart {\r\n    return this._chart\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport const WidgetNameConstants = {\r\n  MAIN: 'main',\r\n  X_AXIS: 'xAxis',\r\n  Y_AXIS: 'yAxis',\r\n  SEPARATOR: 'separator'\r\n}\r\n\r\nexport const REAL_SEPARATOR_HEIGHT = 7\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid, merge } from './utils/typeChecks'\r\n\r\nexport default interface Bounding {\r\n  width: number\r\n  height: number\r\n  left: number\r\n  right: number\r\n  top: number\r\n  bottom: number\r\n}\r\n\r\nexport function getDefaultBounding (bounding?: Partial<Bounding>): Bounding {\r\n  const defaultBounding: Bounding = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0\r\n  }\r\n  if (isValid(bounding)) {\r\n    merge(defaultBounding, bounding)\r\n  }\r\n  return defaultBounding\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding, { getDefaultBounding } from '../common/Bounding'\r\nimport Updater, { UpdateLevel } from '../common/Updater'\r\nimport Eventful from '../common/Eventful'\r\n\r\nimport Pane from '../pane/Pane'\r\n\r\nimport { merge } from '../common/utils/typeChecks'\r\n\r\nexport default abstract class Widget<P extends Pane = Pane> extends Eventful implements Updater {\r\n  /**\r\n   * root container\r\n   */\r\n  private _rootContainer: HTMLElement\r\n\r\n  /**\r\n   * Parent pane\r\n   */\r\n  private readonly _pane: P\r\n\r\n  /**\r\n   * wrapper container\r\n   */\r\n  private _container: HTMLElement\r\n\r\n  private readonly _bounding: Bounding = getDefaultBounding()\r\n\r\n  constructor (rootContainer: HTMLElement, pane: P) {\r\n    super()\r\n    this._pane = pane\r\n    this.init(rootContainer)\r\n  }\r\n\r\n  init (rootContainer: HTMLElement): void {\r\n    this._rootContainer = rootContainer\r\n    this._container = this.createContainer()\r\n    rootContainer.appendChild(this._container)\r\n  }\r\n\r\n  setBounding (bounding: Partial<Bounding>): Widget<P> {\r\n    merge(this._bounding, bounding)\r\n    return this\r\n  }\r\n\r\n  getContainer (): HTMLElement { return this._container }\r\n\r\n  getBounding (): Bounding {\r\n    return this._bounding\r\n  }\r\n\r\n  getPane (): P {\r\n    return this._pane\r\n  }\r\n\r\n  update (level?: UpdateLevel): void {\r\n    this.updateImp(this._container, this._bounding, level ?? UpdateLevel.Drawer)\r\n  }\r\n\r\n  destroy (): void {\r\n    this._rootContainer.removeChild(this._container)\r\n  }\r\n\r\n  abstract getName (): string\r\n\r\n  protected abstract createContainer (): HTMLElement\r\n\r\n  protected abstract updateImp (container: HTMLElement, bounding: Bounding, level: UpdateLevel): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport function requestAnimationFrame (fn: (params: any) => any): number {\r\n  if (window.requestAnimationFrame == null) {\r\n    return window.setTimeout(fn, 20)\r\n  }\r\n  return window.requestAnimationFrame(fn)\r\n}\r\n\r\nexport function cancelAnimationFrame (id: number): void {\r\n  if (window.cancelAnimationFrame == null) {\r\n    window.clearTimeout(id)\r\n  }\r\n  window.cancelAnimationFrame(id)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport { UpdateLevel } from '../common/Updater'\r\n\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport Widget from './Widget'\r\n\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\nimport { requestAnimationFrame, cancelAnimationFrame } from '../common/utils/compatible'\r\n\r\nconst DEFAULT_REQUEST_ID = -1\r\n\r\nexport default abstract class DrawWidget<P extends DrawPane = DrawPane> extends Widget<P> {\r\n  private _mainCanvas: HTMLCanvasElement\r\n  private _mainCtx: CanvasRenderingContext2D\r\n  private _overlayCanvas: HTMLCanvasElement\r\n  private _overlayCtx: CanvasRenderingContext2D\r\n\r\n  private _mainRequestAnimationId: number = DEFAULT_REQUEST_ID\r\n  private _overlayRequestAnimationId: number = DEFAULT_REQUEST_ID\r\n\r\n  override init (rootContainer: HTMLElement): void {\r\n    super.init(rootContainer)\r\n    this._mainCanvas = createDom('canvas', {\r\n      position: 'absolute',\r\n      top: '0',\r\n      left: '0',\r\n      zIndex: '2',\r\n      boxSizing: 'border-box'\r\n    })\r\n    this._mainCtx = this._mainCanvas.getContext('2d') as CanvasRenderingContext2D\r\n    this._overlayCanvas = createDom('canvas', {\r\n      position: 'absolute',\r\n      top: '0',\r\n      left: '0',\r\n      zIndex: '2',\r\n      boxSizing: 'border-box'\r\n    })\r\n    this._overlayCtx = this._overlayCanvas.getContext('2d') as CanvasRenderingContext2D\r\n    const container = this.getContainer()\r\n    container.appendChild(this._mainCanvas)\r\n    container.appendChild(this._overlayCanvas)\r\n  }\r\n\r\n  override createContainer (): HTMLElement {\r\n    return createDom('div', {\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'absolute',\r\n      top: '0',\r\n      overflow: 'hidden',\r\n      boxSizing: 'border-box',\r\n      zIndex: '1'\r\n    })\r\n  }\r\n\r\n  private _clearCanvas (width: number, height: number, canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D): void {\r\n    ctx.clearRect(0, 0, canvas.offsetWidth, canvas.offsetHeight)\r\n    if (width !== canvas.offsetWidth || height !== canvas.offsetHeight) {\r\n      const pixelRatio = getPixelRatio(canvas)\r\n      const scaleWidth = Math.round(width * pixelRatio)\r\n      const scaleHeight = Math.round(height * pixelRatio)\r\n\r\n      canvas.style.width = `${width}px`\r\n      canvas.style.height = `${height}px`\r\n      canvas.width = scaleWidth\r\n      canvas.height = scaleHeight\r\n      ctx.scale(pixelRatio, pixelRatio)\r\n    }\r\n  }\r\n\r\n  private _optimalUpdateMain (width: number, height: number): void {\r\n    if (this._mainRequestAnimationId !== DEFAULT_REQUEST_ID) {\r\n      cancelAnimationFrame(this._mainRequestAnimationId)\r\n      this._mainRequestAnimationId = DEFAULT_REQUEST_ID\r\n    }\r\n    this._mainRequestAnimationId = requestAnimationFrame(() => {\r\n      this._clearCanvas(width, height, this._mainCanvas, this._mainCtx)\r\n      this.updateMain(this._mainCtx)\r\n    })\r\n  }\r\n\r\n  private _optimalUpdateOverlay (width: number, height: number): void {\r\n    if (this._overlayRequestAnimationId !== DEFAULT_REQUEST_ID) {\r\n      cancelAnimationFrame(this._overlayRequestAnimationId)\r\n      this._overlayRequestAnimationId = DEFAULT_REQUEST_ID\r\n    }\r\n    this._overlayRequestAnimationId = requestAnimationFrame(() => {\r\n      this._clearCanvas(width, height, this._overlayCanvas, this._overlayCtx)\r\n      this.updateOverlay(this._overlayCtx)\r\n    })\r\n  }\r\n\r\n  override updateImp (container: HTMLElement, bounding: Bounding, level: UpdateLevel): void {\r\n    const { width, height, left } = bounding\r\n    container.style.left = `${left}px`\r\n\r\n    let l = level\r\n    if (width !== container.offsetWidth || height !== container.offsetHeight) {\r\n      container.style.width = `${width}px`\r\n      container.style.height = `${height}px`\r\n      l = UpdateLevel.Drawer\r\n    }\r\n    switch (l) {\r\n      case UpdateLevel.Main: {\r\n        this._optimalUpdateMain(width, height)\r\n        break\r\n      }\r\n      case UpdateLevel.Overlay: {\r\n        this._optimalUpdateOverlay(width, height)\r\n        break\r\n      }\r\n      case UpdateLevel.Drawer:\r\n      case UpdateLevel.All: {\r\n        this._optimalUpdateMain(width, height)\r\n        this._optimalUpdateOverlay(width, height)\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  getImage (includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    ctx.drawImage(this._mainCanvas, 0, 0, width, height)\r\n\r\n    if (includeOverlay) {\r\n      ctx.drawImage(this._overlayCanvas, 0, 0, width, height)\r\n    }\r\n    return canvas\r\n  }\r\n\r\n  protected abstract updateMain (ctx: CanvasRenderingContext2D): void\r\n  protected abstract updateOverlay (ctx: CanvasRenderingContext2D): void\r\n}\r\n","export function isRgba (color: string): boolean {\r\n  return (/^[rR][gG][Bb][Aa][\\\\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|1.0|0|0.[0-9])[\\s]*[\\\\)]{1}$/).test(color)\r\n}\r\n\r\nexport function isHsla (color: string): boolean {\r\n  return (/^[hH][Ss][Ll][Aa][\\\\(]([\\s]*(2[0-9][0-9]|360ÔΩú3[0-5][0-9]|[01]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*(1|1.0|0|0.[0-9])[\\s]*)[\\\\)]$/).test(color)\r\n}\r\n\r\nexport function isTransparent (color: string): boolean {\r\n  return color === 'transparent' ||\r\n    color === 'none' ||\r\n    (isRgba(color) && parseFloat((color.match(/(\\d(\\.\\d+)?)+/g) ?? [])[3]) === 0) ||\r\n    (isHsla(color) && parseFloat((color.match(/(\\d(\\.\\d+)?)+/g) ?? [])[3]) === 0)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport { PolygonStyle, PolygonType, LineType } from '../../common/Styles'\r\nimport { isString } from '../../common/utils/typeChecks'\r\nimport { isTransparent } from '../../common/utils/color'\r\n\r\nimport { FigureTemplate } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnCircle (coordinate: Coordinate, circle: CircleAttrs): boolean {\r\n  const difX = coordinate.x - circle.x\r\n  const difY = coordinate.y - circle.y\r\n  const r = circle.r\r\n  return !(difX * difX + difY * difY > r * r)\r\n}\r\n\r\nexport function drawCircle (ctx: CanvasRenderingContext2D, attrs: CircleAttrs, styles: Partial<PolygonStyle>): void {\r\n  const { x, y, r } = attrs\r\n  const {\r\n    style = PolygonType.Fill,\r\n    color = 'currentColor',\r\n    borderSize = 1,\r\n    borderColor = 'currentColor',\r\n    borderStyle = LineType.Solid,\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n  if (\r\n    (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) &&\r\n    (!isString(color) || !isTransparent(color))\r\n  ) {\r\n    ctx.fillStyle = color\r\n    ctx.beginPath()\r\n    ctx.arc(x, y, r, 0, Math.PI * 2)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n  }\r\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === LineType.Dashed) {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    ctx.beginPath()\r\n    ctx.arc(x, y, r, 0, Math.PI * 2)\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n  }\r\n}\r\n\r\nexport interface CircleAttrs {\r\n  x: number\r\n  y: number\r\n  r: number\r\n}\r\n\r\nconst circle: FigureTemplate<CircleAttrs, Partial<PolygonStyle>> = {\r\n  name: 'circle',\r\n  checkEventOn: checkCoordinateOnCircle,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: CircleAttrs, styles: Partial<PolygonStyle>) => {\r\n    drawCircle(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default circle\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport { PolygonStyle, PolygonType, LineType } from '../../common/Styles'\r\nimport { isString } from '../../common/utils/typeChecks'\r\nimport { isTransparent } from '../../common/utils/color'\r\n\r\nimport { FigureTemplate } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnPolygon (coordinate: Coordinate, polygon: PolygonAttrs): boolean {\r\n  let on = false\r\n  const coordinates = polygon.coordinates\r\n  for (let i = 0, j = coordinates.length - 1; i < coordinates.length; j = i++) {\r\n    if (\r\n      (coordinates[i].y > coordinate.y) !== (coordinates[j].y > coordinate.y) &&\r\n      (coordinate.x < (coordinates[j].x - coordinates[i].x) * (coordinate.y - coordinates[i].y) / (coordinates[j].y - coordinates[i].y) + coordinates[i].x)\r\n    ) {\r\n      on = !on\r\n    }\r\n  }\r\n  return on\r\n}\r\n\r\nexport function drawPolygon (ctx: CanvasRenderingContext2D, attrs: PolygonAttrs, styles: Partial<PolygonStyle>): void {\r\n  const { coordinates } = attrs\r\n  const {\r\n    style = PolygonType.Fill,\r\n    color = 'currentColor',\r\n    borderSize = 1,\r\n    borderColor = 'currentColor',\r\n    borderStyle = LineType.Solid,\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n  if (\r\n    (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) &&\r\n    (!isString(color) || !isTransparent(color))) {\r\n    ctx.fillStyle = color\r\n    ctx.beginPath()\r\n    ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n    for (let i = 1; i < coordinates.length; i++) {\r\n      ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n    }\r\n    ctx.closePath()\r\n    ctx.fill()\r\n  }\r\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === LineType.Dashed) {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    ctx.beginPath()\r\n    ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n    for (let i = 1; i < coordinates.length; i++) {\r\n      ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n    }\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n  }\r\n}\r\n\r\nexport interface PolygonAttrs {\r\n  coordinates: Coordinate[]\r\n}\r\n\r\nconst polygon: FigureTemplate<PolygonAttrs, Partial<PolygonStyle>> = {\r\n  name: 'polygon',\r\n  checkEventOn: checkCoordinateOnPolygon,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: PolygonAttrs, styles: Partial<PolygonStyle>) => {\r\n    drawPolygon(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default polygon\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport { RectStyle, PolygonType, LineType } from '../../common/Styles'\r\nimport { isTransparent } from '../../common/utils/color'\r\nimport { isString } from '../../common/utils/typeChecks'\r\n\r\nimport { FigureTemplate, DEVIATION } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnRect (coordinate: Coordinate, rect: RectAttrs): boolean {\r\n  let x = rect.x\r\n  let width = rect.width\r\n  if (width < DEVIATION * 2) {\r\n    x -= DEVIATION\r\n    width = DEVIATION * 2\r\n  }\r\n  let y = rect.y\r\n  let height = rect.height\r\n  if (height < DEVIATION * 2) {\r\n    y -= DEVIATION\r\n    height = DEVIATION * 2\r\n  }\r\n\r\n  return (\r\n    coordinate.x >= x &&\r\n    coordinate.x <= x + width &&\r\n    coordinate.y >= y &&\r\n    coordinate.y <= y + height\r\n  )\r\n}\r\n\r\nexport function drawRect (ctx: CanvasRenderingContext2D, attrs: RectAttrs, styles: Partial<RectStyle>): void {\r\n  const { x, y, width: w, height: h } = attrs\r\n  const {\r\n    style = PolygonType.Fill,\r\n    color = 'transparent',\r\n    borderSize = 1,\r\n    borderColor = 'transparent',\r\n    borderStyle = LineType.Solid,\r\n    borderRadius: r = 0,\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n  if (\r\n    (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) &&\r\n    (!isString(color) || !isTransparent(color))\r\n  ) {\r\n    ctx.fillStyle = color\r\n    ctx.beginPath()\r\n    ctx.moveTo(x + r, y)\r\n    ctx.arcTo(x + w, y, x + w, y + h, r)\r\n    ctx.arcTo(x + w, y + h, x, y + h, r)\r\n    ctx.arcTo(x, y + h, x, y, r)\r\n    ctx.arcTo(x, y, x + w, y, r)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n  }\r\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === LineType.Dashed) {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    ctx.beginPath()\r\n    ctx.moveTo(x + r, y)\r\n    ctx.arcTo(x + w, y, x + w, y + h, r)\r\n    ctx.arcTo(x + w, y + h, x, y + h, r)\r\n    ctx.arcTo(x, y + h, x, y, r)\r\n    ctx.arcTo(x, y, x + w, y, r)\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n  }\r\n}\r\n\r\nexport interface RectAttrs {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n}\r\n\r\nconst rect: FigureTemplate<RectAttrs, Partial<RectStyle>> = {\r\n  name: 'rect',\r\n  checkEventOn: checkCoordinateOnRect,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: RectAttrs, styles: Partial<RectStyle>) => {\r\n    drawRect(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default rect\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../../common/Coordinate'\r\nimport { TextStyle } from '../../common/Styles'\r\n\r\nimport { createFont, calcTextWidth } from '../../common/utils/canvas'\r\n\r\nimport { FigureTemplate } from '../../component/Figure'\r\n\r\nimport { RectAttrs, drawRect } from './rect'\r\n\r\nexport function getTextRect (attrs: TextAttrs, styles: Partial<TextStyle>): RectAttrs {\r\n  const { size = 12, paddingLeft = 0, paddingTop = 0, paddingRight = 0, paddingBottom = 0, weight = 'normal', family } = styles\r\n  const { x, y, text, align = 'left', baseline = 'top', width: w, height: h } = attrs\r\n  const width = w ?? (paddingLeft + calcTextWidth(text, size, weight, family) + paddingRight)\r\n  const height = h ?? (paddingTop + size + paddingBottom)\r\n  let startX: number\r\n  switch (align) {\r\n    case 'left':\r\n    case 'start': {\r\n      startX = x\r\n      break\r\n    }\r\n    case 'right':\r\n    case 'end': {\r\n      startX = x - width\r\n      break\r\n    }\r\n    default: {\r\n      startX = x - width / 2\r\n      break\r\n    }\r\n  }\r\n  let startY: number\r\n  switch (baseline) {\r\n    case 'top':\r\n    case 'hanging': {\r\n      startY = y\r\n      break\r\n    }\r\n    case 'bottom':\r\n    case 'ideographic':\r\n    case 'alphabetic': {\r\n      startY = y - height\r\n      break\r\n    }\r\n    default: {\r\n      startY = y - height / 2\r\n      break\r\n    }\r\n  }\r\n  return { x: startX, y: startY, width, height }\r\n}\r\n\r\nexport function checkCoordinateOnText (coordinate: Coordinate, attrs: TextAttrs, styles: Partial<TextStyle>): boolean {\r\n  const { x, y, width, height } = getTextRect(attrs, styles)\r\n  return (\r\n    coordinate.x >= x &&\r\n    coordinate.x <= x + width &&\r\n    coordinate.y >= y &&\r\n    coordinate.y <= y + height\r\n  )\r\n}\r\n\r\nexport function drawText (ctx: CanvasRenderingContext2D, attrs: TextAttrs, styles: Partial<TextStyle>): void {\r\n  const { text } = attrs\r\n  const {\r\n    color = 'currentColor',\r\n    size = 12,\r\n    family,\r\n    weight,\r\n    paddingLeft = 0,\r\n    paddingTop = 0,\r\n    paddingRight = 0\r\n  } = styles\r\n  const rect = getTextRect(attrs, styles)\r\n\r\n  drawRect(ctx, rect, { ...styles, color: styles.backgroundColor })\r\n\r\n  ctx.textAlign = 'left'\r\n  ctx.textBaseline = 'top'\r\n  ctx.font = createFont(size, weight, family)\r\n  ctx.fillStyle = color\r\n  ctx.fillText(text, rect.x + paddingLeft, rect.y + paddingTop, rect.width - paddingLeft - paddingRight)\r\n}\r\n\r\nexport interface TextAttrs {\r\n  x: number\r\n  y: number\r\n  text: string\r\n  width?: number\r\n  height?: number\r\n  align?: CanvasTextAlign\r\n  baseline?: CanvasTextBaseline\r\n}\r\n\r\nconst text: FigureTemplate<TextAttrs, Partial<TextStyle>> = {\r\n  name: 'text',\r\n  checkEventOn: (coordinate: Coordinate, attrs: TextAttrs, styles: Partial<TextStyle>) => {\r\n    return checkCoordinateOnText(coordinate, attrs, styles)\r\n  },\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: TextAttrs, styles: Partial<TextStyle>) => {\r\n    drawText(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default text\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport text, { drawText } from './text'\r\n\r\n/**\r\n * @deprecated\r\n * Starting from v10, it will be deleted\r\n */\r\nconst rectText = text\r\n\r\n/**\r\n * @deprecated\r\n * Starting from v10, it will be deleted\r\n */\r\nconst drawRectText = drawText\r\n\r\n/**\r\n * @deprecated\r\n * Starting from v10, it will be deleted\r\n */\r\nexport { drawRectText }\r\n\r\nexport default rectText\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default interface Coordinate {\r\n  x: number\r\n  y: number\r\n}\r\n\r\nexport function getDistance (coordinate1: Coordinate, coordinate2: Coordinate): number {\r\n  const xDif = coordinate1.x - coordinate2.x\r\n  const yDif = coordinate1.y - coordinate2.y\r\n  return Math.sqrt(xDif * xDif + yDif * yDif)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate, { getDistance } from '../../common/Coordinate'\r\nimport { LineStyle, LineType } from '../../common/Styles'\r\n\r\nimport { FigureTemplate, DEVIATION } from '../../component/Figure'\r\n\r\nimport { CircleAttrs } from './circle'\r\n\r\nexport function checkCoordinateOnArc (coordinate: Coordinate, arc: ArcAttrs): boolean {\r\n  if (Math.abs(getDistance(coordinate, arc) - arc.r) < DEVIATION) {\r\n    const { r, startAngle, endAngle } = arc\r\n    const startCoordinateX = r * Math.cos(startAngle) + arc.x\r\n    const startCoordinateY = r * Math.sin(startAngle) + arc.y\r\n    const endCoordinateX = r * Math.cos(endAngle) + arc.x\r\n    const endCoordinateY = r * Math.sin(endAngle) + arc.y\r\n    return (\r\n      coordinate.x <= Math.max(startCoordinateX, endCoordinateX) + DEVIATION &&\r\n      coordinate.x >= Math.min(startCoordinateX, endCoordinateX) - DEVIATION &&\r\n      coordinate.y <= Math.max(startCoordinateY, endCoordinateY) + DEVIATION &&\r\n      coordinate.y >= Math.min(startCoordinateY, endCoordinateY) - DEVIATION\r\n    )\r\n  }\r\n  return false\r\n}\r\n\r\nexport function drawArc (ctx: CanvasRenderingContext2D, attrs: ArcAttrs, styles: Partial<LineStyle>): void {\r\n  const { x, y, r, startAngle, endAngle } = attrs\r\n  const { style = LineType.Solid, size = 1, color = 'currentColor', dashedValue = [2, 2] } = styles\r\n  ctx.lineWidth = size\r\n  ctx.strokeStyle = color\r\n  if (style === LineType.Dashed) {\r\n    ctx.setLineDash(dashedValue)\r\n  } else {\r\n    ctx.setLineDash([])\r\n  }\r\n  ctx.beginPath()\r\n  ctx.arc(x, y, r, startAngle, endAngle)\r\n  ctx.stroke()\r\n  ctx.closePath()\r\n}\r\n\r\nexport interface ArcAttrs extends CircleAttrs {\r\n  startAngle: number\r\n  endAngle: number\r\n}\r\n\r\nconst arc: FigureTemplate<ArcAttrs, Partial<LineStyle>> = {\r\n  name: 'arc',\r\n  checkEventOn: checkCoordinateOnArc,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: ArcAttrs, styles: Partial<LineStyle>) => {\r\n    drawArc(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default arc\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../../common/Nullable'\r\n\r\nimport FigureImp, { FigureTemplate, FigureConstructor, FigureInnerConstructor } from '../../component/Figure'\r\n\r\nimport circle from './circle'\r\nimport line from './line'\r\nimport polygon from './polygon'\r\nimport rect from './rect'\r\nimport text from './text'\r\nimport rectText from './rectText'\r\nimport arc from './arc'\r\n\r\nconst figures: Record<string, FigureInnerConstructor> = {}\r\n\r\nconst extensions = [circle, line, polygon, rect, text, rectText, arc]\r\nextensions.forEach((figure: FigureTemplate) => {\r\n  figures[figure.name] = FigureImp.extend(figure)\r\n})\r\n\r\nfunction getSupportedFigures (): string[] {\r\n  return Object.keys(figures)\r\n}\r\n\r\nfunction registerFigure<A = any, S = any> (figure: FigureTemplate<A, S>): void {\r\n  figures[figure.name] = FigureImp.extend(figure)\r\n}\r\n\r\nfunction getInnerFigureClass<A = any, S = any> (name: string): Nullable<FigureInnerConstructor<A, S>> {\r\n  return figures[name] ?? null\r\n}\r\n\r\nfunction getFigureClass<A = any, S = any> (name: string): Nullable<FigureConstructor<A, S>> {\r\n  return figures[name] ?? null\r\n}\r\n\r\nexport { getSupportedFigures, getFigureClass, getInnerFigureClass, registerFigure }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport { EventHandler, EventName } from '../common/SyntheticEvent'\r\nimport Eventful from '../common/Eventful'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport Figure from '../component/Figure'\r\nimport Axis from '../component/Axis'\r\n\r\nimport { getInnerFigureClass } from '../extension/figure/index'\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nexport default abstract class View<C extends Axis = Axis> extends Eventful {\r\n  /**\r\n   * Parent widget\r\n   */\r\n  private readonly _widget: DrawWidget<DrawPane<C>>\r\n\r\n  constructor (widget: DrawWidget<DrawPane<C>>) {\r\n    super()\r\n    this._widget = widget\r\n  }\r\n\r\n  getWidget (): DrawWidget<DrawPane<C>> { return this._widget }\r\n\r\n  protected createFigure (name: string, attrs: any, styles: any, eventHandler?: EventHandler): Nullable<Figure> {\r\n    const FigureClazz = getInnerFigureClass(name)\r\n    if (FigureClazz !== null) {\r\n      const figure = new FigureClazz({ name, attrs, styles })\r\n      if (isValid(eventHandler)) {\r\n        for (const key in eventHandler) {\r\n          // eslint-disable-next-line no-prototype-builtins\r\n          if (eventHandler.hasOwnProperty(key)) {\r\n            figure.registerEvent(key as EventName, eventHandler[key])\r\n          }\r\n        }\r\n        this.addChild(figure)\r\n      }\r\n      return figure\r\n    }\r\n    return null\r\n  }\r\n\r\n  draw (ctx: CanvasRenderingContext2D): void {\r\n    this.clear()\r\n    this.drawImp(ctx)\r\n  }\r\n\r\n  protected abstract drawImp (ctx: CanvasRenderingContext2D): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport View from './View'\r\n\r\nexport default class GridView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = this.getWidget().getPane()\r\n    const chart = pane.getChart()\r\n    const bounding = widget.getBounding()\r\n\r\n    const gridStyles = chart.getStyles().grid\r\n    const show = gridStyles.show\r\n\r\n    if (show) {\r\n      ctx.save()\r\n      ctx.globalCompositeOperation = 'destination-over'\r\n      const horizontalStyles = gridStyles.horizontal\r\n      const horizontalShow = horizontalStyles.show\r\n      if (horizontalShow) {\r\n        const yAxis = pane.getAxisComponent()\r\n        yAxis.getTicks().forEach(tick => {\r\n          this.createFigure(\r\n            'line',\r\n            {\r\n              coordinates: [\r\n                { x: 0, y: tick.coord },\r\n                { x: bounding.width, y: tick.coord }\r\n              ]\r\n            },\r\n            horizontalStyles\r\n          )?.draw(ctx)\r\n        })\r\n      }\r\n      const verticalStyles = gridStyles.vertical\r\n      const verticalShow = verticalStyles.show\r\n      if (verticalShow) {\r\n        const xAxis = chart.getXAxisPane().getAxisComponent()\r\n        xAxis.getTicks().forEach(tick => {\r\n          this.createFigure(\r\n            'line',\r\n            {\r\n              coordinates: [\r\n                { x: tick.coord, y: 0 },\r\n                { x: tick.coord, y: bounding.height }\r\n              ]\r\n            },\r\n            verticalStyles\r\n          )?.draw(ctx)\r\n        })\r\n      }\r\n      ctx.restore()\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isFunction, isValid } from './typeChecks'\r\n\r\nexport function throttle (func: (...args: any[]) => any, wait?: number): () => void {\r\n  let previous = 0\r\n  return function () {\r\n    const now = Date.now()\r\n    if (now - previous > (wait ?? 20)) {\r\n      func.apply(this, arguments)\r\n      previous = now\r\n    }\r\n  }\r\n}\r\n\r\nexport function memoize<R1 = any, R2 = any> (func: (...args: any[]) => R1, resolver?: (...args: any[]) => R2): (...args: any[]) => R1 {\r\n  if (!isFunction(func) || (isValid(resolver) && !isFunction(resolver))) {\r\n    throw new TypeError('Expected a function')\r\n  }\r\n  const memoized = function (...args: any[]): any {\r\n    const key = isFunction(resolver) ? resolver.apply(this, args) : args[0]\r\n    const cache = memoized.cache\r\n\r\n    if (cache.has(key)) {\r\n      return cache.get(key)\r\n    }\r\n    const result = func.apply(this, args)\r\n    // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\r\n    memoized.cache = cache.set(key, result) || cache\r\n    return result\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\r\n  memoized.cache = new (memoize.Cache || Map)()\r\n  return memoized\r\n}\r\nmemoize.Cache = Map\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport View from './View'\r\nimport VisibleData from '../common/VisibleData'\r\nimport BarSpace from '../common/BarSpace'\r\nimport YAxis from '../component/YAxis'\r\n\r\nexport type EachChildCallback = (\r\n  data: VisibleData,\r\n  barSpace: BarSpace,\r\n  index: number\r\n) => void\r\n\r\nexport default abstract class ChildrenView extends View<YAxis> {\r\n  protected eachChildren (childCallback: EachChildCallback): void {\r\n    const pane = this.getWidget().getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const visibleDataList = chartStore.getVisibleDataList()\r\n    const barSpace = chartStore.getTimeScaleStore().getBarSpace()\r\n    visibleDataList.forEach((data: VisibleData, index: number) => {\r\n      childCallback(data, barSpace, index)\r\n    })\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport VisibleData from '../common/VisibleData'\r\nimport BarSpace from '../common/BarSpace'\r\nimport { EventHandler } from '../common/SyntheticEvent'\r\nimport { ActionType } from '../common/Action'\r\nimport { CandleType, CandleBarColor, RectStyle, PolygonType } from '../common/Styles'\r\nimport { memoize } from '../common/utils/performance'\r\n\r\nimport ChartStore from '../store/ChartStore'\r\n\r\nimport Axis from '../component/Axis'\r\n\r\nimport { FigureCreate } from '../component/Figure'\r\nimport { RectAttrs } from '../extension/figure/rect'\r\n\r\nimport ChildrenView from './ChildrenView'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nexport interface CandleBarOptions {\r\n  type: Exclude<CandleType, CandleType.Area>\r\n  styles: CandleBarColor\r\n}\r\n\r\nexport default class CandleBarView extends ChildrenView {\r\n  private readonly _boundCandleBarClickEvent = (data: VisibleData) => () => {\r\n    this.getWidget().getPane().getChart().getChartStore().getActionStore().execute(ActionType.OnCandleBarClick, data)\r\n    return false\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const pane = this.getWidget().getPane()\r\n    const isMain = pane.getId() === PaneIdConstants.CANDLE\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const candleBarOptions = this.getCandleBarOptions(chartStore)\r\n    if (candleBarOptions !== null) {\r\n      const yAxis = pane.getAxisComponent()\r\n      this.eachChildren((data: VisibleData, barSpace: BarSpace) => {\r\n        this._drawCandleBar(ctx, yAxis, data, barSpace, candleBarOptions, isMain)\r\n      })\r\n    }\r\n  }\r\n\r\n  protected getCandleBarOptions (chartStore: ChartStore): Nullable<CandleBarOptions> {\r\n    const candleStyles = chartStore.getStyles().candle\r\n    return {\r\n      type: candleStyles.type as Exclude<CandleType, CandleType.Area>,\r\n      styles: candleStyles.bar\r\n    }\r\n  }\r\n\r\n  private readonly _calcOhlcSize = memoize((gapBarSpace: number) => {\r\n    return Math.min(Math.max(Math.round(gapBarSpace * 0.1), 1), 3)\r\n  })\r\n\r\n  private _drawCandleBar (\r\n    ctx: CanvasRenderingContext2D,\r\n    axis: Axis,\r\n    data: VisibleData,\r\n    barSpace: BarSpace,\r\n    candleBarOptions: CandleBarOptions,\r\n    isMain: boolean\r\n  ): void {\r\n    const { data: kLineData, x } = data\r\n    const { open, high, low, close } = kLineData\r\n    const { halfGapBar, gapBar } = barSpace\r\n    const { type, styles } = candleBarOptions\r\n    let color: string\r\n    let borderColor: string\r\n    let wickColor: string\r\n    if (close > open) {\r\n      color = styles.upColor\r\n      borderColor = styles.upBorderColor\r\n      wickColor = styles.upWickColor\r\n    } else if (close < open) {\r\n      color = styles.downColor\r\n      borderColor = styles.downBorderColor\r\n      wickColor = styles.downWickColor\r\n    } else {\r\n      color = styles.noChangeColor\r\n      borderColor = styles.noChangeBorderColor\r\n      wickColor = styles.noChangeWickColor\r\n    }\r\n    const openY = axis.convertToPixel(open)\r\n    const closeY = axis.convertToPixel(close)\r\n    const priceY = [\r\n      openY, closeY,\r\n      axis.convertToPixel(high),\r\n      axis.convertToPixel(low)\r\n    ]\r\n    priceY.sort((a, b) => a - b)\r\n\r\n    const barHeight = Math.max(1, priceY[2] - priceY[1])\r\n\r\n    let rects: Array<FigureCreate<RectAttrs, Partial<RectStyle>>> = []\r\n    if (type !== CandleType.Ohlc) {\r\n      rects.push({\r\n        name: 'rect',\r\n        attrs: {\r\n          x: x - 0.5,\r\n          y: priceY[0],\r\n          width: 1,\r\n          height: priceY[1] - priceY[0]\r\n        },\r\n        styles: { color: wickColor }\r\n      })\r\n      if (\r\n        type === CandleType.CandleStroke ||\r\n        (type === CandleType.CandleUpStroke && open < close) ||\r\n        (type === CandleType.CandleDownStroke && open > close)\r\n      ) {\r\n        rects.push({\r\n          name: 'rect',\r\n          attrs: {\r\n            x: x - halfGapBar + 0.5,\r\n            y: priceY[1],\r\n            width: gapBar - 1,\r\n            height: barHeight\r\n          },\r\n          styles: {\r\n            style: PolygonType.Stroke,\r\n            borderColor\r\n          }\r\n        })\r\n      } else {\r\n        rects.push({\r\n          name: 'rect',\r\n          attrs: {\r\n            x: x - halfGapBar + 0.5,\r\n            y: priceY[1],\r\n            width: gapBar - 1,\r\n            height: barHeight\r\n          },\r\n          styles: {\r\n            style: PolygonType.StrokeFill,\r\n            color,\r\n            borderColor\r\n          }\r\n        })\r\n      }\r\n      rects.push({\r\n        name: 'rect',\r\n        attrs: {\r\n          x: x - 0.5,\r\n          y: priceY[2],\r\n          width: 1,\r\n          height: priceY[3] - priceY[2]\r\n        },\r\n        styles: { color: wickColor }\r\n      })\r\n    } else {\r\n      const size = this._calcOhlcSize(barSpace.gapBar)\r\n      rects = [\r\n        {\r\n          name: 'rect',\r\n          attrs: {\r\n            x: x - size / 2,\r\n            y: priceY[0],\r\n            width: size,\r\n            height: priceY[3] - priceY[0]\r\n          },\r\n          styles: { color }\r\n        }, {\r\n          name: 'rect',\r\n          attrs: {\r\n            x: x - halfGapBar,\r\n            y: openY + size > priceY[3] ? priceY[3] - size : openY,\r\n            width: halfGapBar - size / 2,\r\n            height: size\r\n          },\r\n          styles: { color }\r\n        }, {\r\n          name: 'rect',\r\n          attrs: {\r\n            x: x + size / 2,\r\n            y: closeY + size > priceY[3] ? priceY[3] - size : closeY,\r\n            width: halfGapBar - size / 2,\r\n            height: size\r\n          },\r\n          styles: { color }\r\n        }\r\n      ]\r\n    }\r\n    rects.forEach(({ attrs, styles }) => {\r\n      let handler: EventHandler | undefined\r\n      if (isMain) {\r\n        handler = {\r\n          mouseClickEvent: this._boundCandleBarClickEvent(data)\r\n        }\r\n      }\r\n      this.createFigure('rect', attrs, styles, handler)?.draw(ctx)\r\n    })\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport VisibleData from '../common/VisibleData'\r\nimport BarSpace from '../common/BarSpace'\r\nimport { CandleType } from '../common/Styles'\r\n\r\nimport ChartStore from '../store/ChartStore'\r\n\r\nimport { eachFigures, IndicatorFigure, IndicatorFigureAttrs, IndicatorFigureStyle } from '../component/Indicator'\r\n\r\nimport CandleBarView, { CandleBarOptions } from './CandleBarView'\r\n\r\nimport { formatValue } from '../common/utils/format'\r\nimport { isNumber, isValid } from '../common/utils/typeChecks'\r\n\r\nexport default class IndicatorView extends CandleBarView {\r\n  override getCandleBarOptions (chartStore: ChartStore): Nullable<CandleBarOptions> {\r\n    const pane = this.getWidget().getPane()\r\n    const yAxis = pane.getAxisComponent()\r\n    if (!yAxis.isInCandle()) {\r\n      const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n      for (const indicator of indicators) {\r\n        if (indicator.shouldOhlc && indicator.visible) {\r\n          const indicatorStyles = indicator.styles\r\n          const defaultStyles = chartStore.getStyles().indicator\r\n          const upColor = formatValue(indicatorStyles, 'ohlc.upColor', defaultStyles.ohlc.upColor) as string\r\n          const downColor = formatValue(indicatorStyles, 'ohlc.downColor', defaultStyles.ohlc.downColor) as string\r\n          const noChangeColor = formatValue(indicatorStyles, 'ohlc.noChangeColor', defaultStyles.ohlc.noChangeColor) as string\r\n          return {\r\n            type: CandleType.Ohlc,\r\n            styles: {\r\n              upColor,\r\n              downColor,\r\n              noChangeColor,\r\n              upBorderColor: upColor,\r\n              downBorderColor: downColor,\r\n              noChangeBorderColor: noChangeColor,\r\n              upWickColor: upColor,\r\n              downWickColor: downColor,\r\n              noChangeWickColor: noChangeColor\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    super.drawImp(ctx)\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const bounding = widget.getBounding()\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const yAxis = pane.getAxisComponent()\r\n    const chartStore = chart.getChartStore()\r\n    const dataList = chartStore.getDataList()\r\n    const timeScaleStore = chartStore.getTimeScaleStore()\r\n    const visibleRange = timeScaleStore.getVisibleRange()\r\n    const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n    const defaultStyles = chartStore.getStyles().indicator\r\n    ctx.save()\r\n    indicators.forEach(indicator => {\r\n      if (indicator.visible) {\r\n        if (indicator.zLevel < 0) {\r\n          ctx.globalCompositeOperation = 'destination-over'\r\n        } else {\r\n          ctx.globalCompositeOperation = 'source-over'\r\n        }\r\n        let isCover = false\r\n        if (indicator.draw !== null) {\r\n          ctx.save()\r\n          isCover = indicator.draw({\r\n            ctx,\r\n            kLineDataList: dataList,\r\n            indicator,\r\n            visibleRange,\r\n            bounding,\r\n            barSpace: timeScaleStore.getBarSpace(),\r\n            defaultStyles,\r\n            xAxis,\r\n            yAxis\r\n          }) ?? false\r\n          ctx.restore()\r\n        }\r\n        if (!isCover) {\r\n          const result = indicator.result\r\n\r\n          this.eachChildren((data: VisibleData, barSpace: BarSpace) => {\r\n            const { halfGapBar, gapBar } = barSpace\r\n            const { dataIndex, x } = data\r\n            const prevX = xAxis.convertToPixel(dataIndex - 1)\r\n            const nextX = xAxis.convertToPixel(dataIndex + 1)\r\n            const prevIndicatorData = result[dataIndex - 1] ?? {}\r\n            const currentIndicatorData = result[dataIndex] ?? {}\r\n            const nextIndicatorData = result[dataIndex + 1] ?? {}\r\n            const prevCoordinate = { x: prevX }\r\n            const currentCoordinate = { x }\r\n            const nextCoordinate = { x: nextX }\r\n            indicator.figures.forEach(({ key }) => {\r\n              prevCoordinate[key] = yAxis.convertToPixel(prevIndicatorData[key])\r\n              currentCoordinate[key] = yAxis.convertToPixel(currentIndicatorData[key])\r\n              nextCoordinate[key] = yAxis.convertToPixel(nextIndicatorData[key])\r\n            })\r\n            eachFigures(dataList, indicator, dataIndex, defaultStyles, (figure: IndicatorFigure, figureStyles: IndicatorFigureStyle) => {\r\n              if (isValid(currentIndicatorData[figure.key])) {\r\n                const valueY = currentCoordinate[figure.key]\r\n                let attrs = figure.attrs?.({\r\n                  coordinate: { prev: prevCoordinate, current: currentCoordinate, next: nextCoordinate },\r\n                  bounding,\r\n                  barSpace,\r\n                  xAxis,\r\n                  yAxis\r\n                })\r\n                if (!isValid<IndicatorFigureAttrs>(attrs)) {\r\n                  switch (figure.type) {\r\n                    case 'circle': {\r\n                      attrs = { x, y: valueY, r: halfGapBar }\r\n                      break\r\n                    }\r\n                    case 'rect':\r\n                    case 'bar': {\r\n                      const baseValue = figure.baseValue ?? yAxis.getExtremum().min\r\n                      const baseValueY = yAxis.convertToPixel(baseValue)\r\n                      let height = Math.abs(baseValueY - (valueY as number))\r\n                      if (baseValue !== currentIndicatorData[figure.key]) {\r\n                        height = Math.max(1, height)\r\n                      }\r\n                      let y: number\r\n                      if (valueY > baseValueY) {\r\n                        y = baseValueY\r\n                      } else {\r\n                        y = valueY\r\n                      }\r\n                      attrs = {\r\n                        x: x - halfGapBar,\r\n                        y,\r\n                        width: gapBar,\r\n                        height\r\n                      }\r\n                      break\r\n                    }\r\n                    case 'line': {\r\n                      if (isNumber(currentCoordinate[figure.key]) && isNumber(nextCoordinate[figure.key])) {\r\n                        attrs = {\r\n                          coordinates: [\r\n                            { x: currentCoordinate.x, y: currentCoordinate[figure.key] },\r\n                            { x: nextCoordinate.x, y: nextCoordinate[figure.key] }\r\n                          ]\r\n                        }\r\n                      }\r\n                      break\r\n                    }\r\n                    default: { break }\r\n                  }\r\n                }\r\n                if (isValid<IndicatorFigureAttrs>(attrs)) {\r\n                  const name = figure.type as string\r\n                  this.createFigure(name === 'bar' ? 'rect' : name, attrs, figureStyles)?.draw(ctx)\r\n                }\r\n              }\r\n            })\r\n          })\r\n        }\r\n      }\r\n    })\r\n    ctx.restore()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../common/Coordinate'\r\nimport { CrosshairDirectionStyle } from '../common/Styles'\r\nimport { isString } from '../common/utils/typeChecks'\r\n\r\nimport View from './View'\r\n\r\nexport default class CrosshairLineView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getTooltipStore().getCrosshair()\r\n    const styles = chartStore.getStyles().crosshair\r\n    if (isString(crosshair.paneId) && styles.show) {\r\n      if (crosshair.paneId === pane.getId()) {\r\n        const y = crosshair.y as number\r\n        this._drawLine(\r\n          ctx,\r\n          [\r\n            { x: 0, y },\r\n            { x: bounding.width, y }\r\n          ],\r\n          styles.horizontal\r\n        )\r\n      }\r\n      const x = crosshair.realX as number\r\n      this._drawLine(\r\n        ctx,\r\n        [\r\n          { x, y: 0 },\r\n          { x, y: bounding.height }\r\n        ],\r\n        styles.vertical\r\n      )\r\n    }\r\n  }\r\n\r\n  private _drawLine (ctx: CanvasRenderingContext2D, coordinates: Coordinate[], styles: CrosshairDirectionStyle): void {\r\n    if (styles.show) {\r\n      const lineStyles = styles.line\r\n      if (lineStyles.show) {\r\n        this.createFigure('line', { coordinates }, lineStyles)?.draw(ctx)\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Bounding from '../common/Bounding'\r\nimport KLineData from '../common/KLineData'\r\nimport Crosshair from '../common/Crosshair'\r\nimport { IndicatorStyle, TooltipStyle, TooltipIconStyle, TooltipTextStyle, TooltipData, TooltipShowRule, TooltipDataChild, TooltipIconPosition } from '../common/Styles'\r\nimport { ActionType } from '../common/Action'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { isValid, isObject, isString } from '../common/utils/typeChecks'\r\nimport { createFont } from '../common/utils/canvas'\r\n\r\nimport { CustomApi } from '../Options'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport IndicatorImp, { eachFigures, Indicator, IndicatorFigure, IndicatorFigureStyle, IndicatorTooltipData } from '../component/Indicator'\r\n\r\nimport { TooltipIcon } from '../store/TooltipStore'\r\n\r\nimport View from './View'\r\n\r\nexport default class IndicatorTooltipView extends View<YAxis> {\r\n  private readonly _boundIconClickEvent = (currentIcon: TooltipIcon, iconId: string) => () => {\r\n    const pane = this.getWidget().getPane()\r\n    pane.getChart().getChartStore().getActionStore().execute(ActionType.OnTooltipIconClick, { ...currentIcon, iconId })\r\n    return true\r\n  }\r\n\r\n  private readonly _boundIconMouseMoveEvent = (currentIconInfo: TooltipIcon, iconId: string) => () => {\r\n    const pane = this.getWidget().getPane()\r\n    const tooltipStore = pane.getChart().getChartStore().getTooltipStore()\r\n    tooltipStore.setActiveIcon({ ...currentIconInfo, iconId })\r\n    return true\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const crosshair = chartStore.getTooltipStore().getCrosshair()\r\n    if (isValid(crosshair.kLineData)) {\r\n      const bounding = widget.getBounding()\r\n      const customApi = chartStore.getCustomApi()\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n      const activeIcon = chartStore.getTooltipStore().getActiveIcon()\r\n      const defaultStyles = chartStore.getStyles().indicator\r\n      this.drawIndicatorTooltip(\r\n        ctx, pane.getId(), chartStore.getDataList(), crosshair, activeIcon, indicators, customApi, thousandsSeparator, bounding, defaultStyles\r\n      )\r\n    }\r\n  }\r\n\r\n  protected drawIndicatorTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    paneId: string,\r\n    dataList: KLineData[],\r\n    crosshair: Crosshair,\r\n    activeTooltipIconInfo: Nullable<TooltipIcon>,\r\n    indicators: IndicatorImp[],\r\n    customApi: CustomApi,\r\n    formatThousands: string,\r\n    bounding: Bounding,\r\n    styles: IndicatorStyle,\r\n    top?: number\r\n  ): number {\r\n    const tooltipStyles = styles.tooltip\r\n    let height = 0\r\n    if (this.isDrawTooltip(crosshair, tooltipStyles)) {\r\n      const tooltipTextStyles = tooltipStyles.text\r\n      let x = 0\r\n      let y = top ?? 0\r\n      let prevRowHeight = 0\r\n      indicators.forEach(indicator => {\r\n        const { name, calcParamsText, values, icons } = this.getIndicatorTooltipData(dataList, crosshair, indicator, customApi, formatThousands, styles)\r\n        const nameValid = name.length > 0\r\n        const valuesValid = values.length > 0\r\n        if (nameValid || valuesValid) {\r\n          const [leftIcons, middleIcons, rightIcons] = this.classifyTooltipIcons(icons)\r\n\r\n          // draw left icons\r\n          const [leftIconsNextStartX, leftIconsNextStartY, leftIconsLastRowHeight, leftIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n            ctx, bounding, { paneId, indicatorName: indicator.name, iconId: '' },\r\n            activeTooltipIconInfo, leftIcons, x, y, prevRowHeight\r\n          )\r\n          x = leftIconsNextStartX\r\n          y = leftIconsNextStartY\r\n          height += leftIconsIncreaseHeight\r\n          prevRowHeight = leftIconsLastRowHeight\r\n\r\n          if (nameValid) {\r\n            let text = name\r\n            if (calcParamsText.length > 0) {\r\n              text = `${text}${calcParamsText}`\r\n            }\r\n            const [nameStartX, nameStartY, nameLastRowHeight, nameIncreaseHeight] = this.drawStandardTooltipLabels(\r\n              ctx,\r\n              bounding,\r\n              [{ title: { text: '', color: tooltipTextStyles.color }, value: { text, color: tooltipTextStyles.color } }],\r\n              x,\r\n              y,\r\n              prevRowHeight,\r\n              tooltipTextStyles\r\n            )\r\n            x = nameStartX\r\n            y = nameStartY\r\n            height += nameIncreaseHeight\r\n            prevRowHeight = nameLastRowHeight\r\n          }\r\n\r\n          // draw middle icons\r\n          const [middleIconsNextStartX, middleIconsNextStartY, middleIconsLastRowHeight, middleIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n            ctx, bounding, { paneId, indicatorName: indicator.name, iconId: '' },\r\n            activeTooltipIconInfo, middleIcons, x, y, prevRowHeight\r\n          )\r\n          x = middleIconsNextStartX\r\n          y = middleIconsNextStartY\r\n          height += middleIconsIncreaseHeight\r\n          prevRowHeight = middleIconsLastRowHeight\r\n\r\n          if (valuesValid) {\r\n            const [valuesStartX, valueStartY, valuesLastRowHeight, valuesIncreaseHeight] = this.drawStandardTooltipLabels(ctx, bounding, values, x, y, prevRowHeight, tooltipTextStyles)\r\n            x = valuesStartX\r\n            y = valueStartY\r\n            height += valuesIncreaseHeight\r\n            prevRowHeight = valuesLastRowHeight\r\n          }\r\n\r\n          // draw right icons\r\n          const [, rightIconsNextStartY, rightIconsLastRowHeight, rightIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n            ctx, bounding, { paneId, indicatorName: indicator.name, iconId: '' },\r\n            activeTooltipIconInfo, rightIcons, x, y, prevRowHeight\r\n          )\r\n          x = 0\r\n          height += rightIconsIncreaseHeight\r\n          y = rightIconsNextStartY + rightIconsLastRowHeight\r\n          prevRowHeight = 0\r\n        }\r\n      })\r\n    }\r\n    return height\r\n  }\r\n\r\n  protected drawStandardTooltipIcons (\r\n    ctx: CanvasRenderingContext2D,\r\n    bounding: Bounding,\r\n    currentIcon: TooltipIcon,\r\n    activeIcon: Nullable<TooltipIcon>,\r\n    icons: TooltipIconStyle[],\r\n    startX: number,\r\n    startY: number,\r\n    prevRowHeight: number\r\n  ): [number, number, number, number] {\r\n    let x = startX\r\n    let y = startY\r\n    let width = 0\r\n    let rowHeight = 0\r\n    let increaseHeight = 0\r\n    if (icons.length > 0) {\r\n      icons.forEach(icon => {\r\n        const {\r\n          marginLeft, marginTop, marginRight, marginBottom,\r\n          paddingLeft, paddingTop, paddingRight, paddingBottom,\r\n          size, fontFamily, icon: text\r\n        } = icon\r\n        ctx.font = createFont(size, 'normal', fontFamily)\r\n        width += (marginLeft + paddingLeft + ctx.measureText(text).width + paddingRight + marginRight)\r\n        rowHeight = Math.max(rowHeight, marginTop + paddingTop + size + paddingBottom + marginBottom)\r\n      })\r\n      if (x + width > bounding.width) {\r\n        x = icons[0].marginLeft\r\n        y += prevRowHeight\r\n        increaseHeight = rowHeight\r\n      } else {\r\n        increaseHeight = Math.max(0, rowHeight - prevRowHeight)\r\n      }\r\n      icons.forEach(icon => {\r\n        const {\r\n          marginLeft, marginTop, marginRight,\r\n          paddingLeft, paddingTop, paddingRight, paddingBottom,\r\n          color, activeColor, size, fontFamily, icon: text, backgroundColor, activeBackgroundColor\r\n        } = icon\r\n        x += marginLeft\r\n        const active = activeIcon?.paneId === currentIcon.paneId && activeIcon?.indicatorName === currentIcon.indicatorName && activeIcon?.iconId === icon.id\r\n        this.createFigure(\r\n          'text',\r\n          { text, x, y: y + marginTop },\r\n          {\r\n            paddingLeft,\r\n            paddingTop,\r\n            paddingRight,\r\n            paddingBottom,\r\n            color: active ? activeColor : color,\r\n            size,\r\n            family: fontFamily,\r\n            backgroundColor: active ? activeBackgroundColor : backgroundColor\r\n          },\r\n          {\r\n            mouseClickEvent: this._boundIconClickEvent(currentIcon, icon.id),\r\n            mouseMoveEvent: this._boundIconMouseMoveEvent(currentIcon, icon.id)\r\n          }\r\n        )?.draw(ctx)\r\n        x += (paddingLeft + ctx.measureText(text).width + paddingRight + marginRight)\r\n      })\r\n    }\r\n    return [x, y, Math.max(prevRowHeight, rowHeight), increaseHeight]\r\n  }\r\n\r\n  protected drawStandardTooltipLabels (\r\n    ctx: CanvasRenderingContext2D,\r\n    bounding: Bounding,\r\n    labels: TooltipData[],\r\n    startX: number,\r\n    startY: number,\r\n    prevRowHeight: number,\r\n    styles: TooltipTextStyle\r\n  ): [number, number, number, number] {\r\n    let x = startX\r\n    let y = startY\r\n    let rowHeight = 0\r\n    let increaseHeight = 0\r\n    let currentPrevRowHeight = prevRowHeight\r\n    if (labels.length > 0) {\r\n      const { marginLeft, marginTop, marginRight, marginBottom, size, family, weight } = styles\r\n      ctx.font = createFont(size, weight, family)\r\n      labels.forEach(data => {\r\n        const title = data.title as TooltipDataChild\r\n        const value = data.value as TooltipDataChild\r\n        const titleTextWidth = ctx.measureText(title.text).width\r\n        const valueTextWidth = ctx.measureText(value.text).width\r\n        const totalTextWidth = titleTextWidth + valueTextWidth\r\n        const height = size + marginTop + marginBottom\r\n        if (x + marginLeft + totalTextWidth + marginRight > bounding.width) {\r\n          x = marginLeft\r\n          y += height\r\n          increaseHeight += height\r\n        } else {\r\n          x += marginLeft\r\n          increaseHeight += Math.max(0, height - currentPrevRowHeight)\r\n        }\r\n        rowHeight = Math.max(currentPrevRowHeight, height)\r\n        currentPrevRowHeight = rowHeight\r\n        if (title.text.length > 0) {\r\n          this.createFigure(\r\n            'text',\r\n            { x, y: y + marginTop, text: title.text },\r\n            { color: title.color, size, family, weight }\r\n          )?.draw(ctx)\r\n          x += titleTextWidth\r\n        }\r\n        this.createFigure(\r\n          'text',\r\n          { x, y: y + marginTop, text: value.text },\r\n          { color: value.color, size, family, weight }\r\n        )?.draw(ctx)\r\n        x += (valueTextWidth + marginRight)\r\n      })\r\n    }\r\n    return [x, y, rowHeight, increaseHeight]\r\n  }\r\n\r\n  protected isDrawTooltip (crosshair: Crosshair, styles: TooltipStyle): boolean {\r\n    const showRule = styles.showRule\r\n    return showRule === TooltipShowRule.Always ||\r\n      (showRule === TooltipShowRule.FollowCross && isString(crosshair.paneId))\r\n  }\r\n\r\n  protected getIndicatorTooltipData (\r\n    dataList: KLineData[],\r\n    crosshair: Crosshair,\r\n    indicator: Indicator,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    styles: IndicatorStyle\r\n  ): IndicatorTooltipData {\r\n    const tooltipStyles = styles.tooltip\r\n    const name = tooltipStyles.showName ? indicator.shortName : ''\r\n    let calcParamsText = ''\r\n    const calcParams = indicator.calcParams\r\n    if (calcParams.length > 0 && tooltipStyles.showParams) {\r\n      calcParamsText = `(${calcParams.join(',')})`\r\n    }\r\n\r\n    const tooltipData: IndicatorTooltipData = { name, calcParamsText, values: [], icons: tooltipStyles.icons }\r\n\r\n    const dataIndex = crosshair.dataIndex as number\r\n    const result = indicator.result ?? []\r\n\r\n    const values: TooltipData[] = []\r\n    if (indicator.visible) {\r\n      const indicatorData = result[dataIndex] ?? {}\r\n      eachFigures(dataList, indicator, dataIndex, styles, (figure: IndicatorFigure, figureStyles: Required<IndicatorFigureStyle>) => {\r\n        if (isString(figure.title)) {\r\n          const color = figureStyles.color\r\n          let value = indicatorData[figure.key]\r\n          if (isValid(value)) {\r\n            value = formatPrecision(value, indicator.precision)\r\n            if (indicator.shouldFormatBigNumber) {\r\n              value = customApi.formatBigNumber(value)\r\n            }\r\n          }\r\n          values.push({ title: { text: figure.title, color }, value: { text: formatThousands(value ?? tooltipStyles.defaultValue, thousandsSeparator), color } })\r\n        }\r\n      })\r\n      tooltipData.values = values\r\n    }\r\n\r\n    if (indicator.createTooltipDataSource !== null) {\r\n      const widget = this.getWidget()\r\n      const pane = widget.getPane()\r\n      const chartStore = pane.getChart().getChartStore()\r\n      const { name: customName, calcParamsText: customCalcParamsText, values: customValues, icons: customIcons } = indicator.createTooltipDataSource({\r\n        kLineDataList: dataList,\r\n        indicator,\r\n        visibleRange: chartStore.getTimeScaleStore().getVisibleRange(),\r\n        bounding: widget.getBounding(),\r\n        crosshair,\r\n        defaultStyles: styles,\r\n        xAxis: pane.getChart().getXAxisPane().getAxisComponent(),\r\n        yAxis: pane.getAxisComponent()\r\n      })\r\n      if (isString(customName) && tooltipStyles.showName) {\r\n        tooltipData.name = customName\r\n      }\r\n      if (isString(customCalcParamsText) && tooltipStyles.showParams) {\r\n        tooltipData.calcParamsText = customCalcParamsText\r\n      }\r\n      if (isValid(customIcons)) {\r\n        tooltipData.icons = customIcons\r\n      }\r\n      if (isValid(customValues) && indicator.visible) {\r\n        const optimizedValues: TooltipData[] = []\r\n        const color = styles.tooltip.text.color\r\n        customValues.forEach(data => {\r\n          let title = { text: '', color }\r\n          if (isObject(data.title)) {\r\n            title = data.title\r\n          } else {\r\n            title.text = data.title\r\n          }\r\n          let value = { text: '', color }\r\n          if (isObject(data.value)) {\r\n            value = data.value\r\n          } else {\r\n            value.text = data.value\r\n          }\r\n          value.text = formatThousands(value.text, thousandsSeparator)\r\n          optimizedValues.push({ title, value })\r\n        })\r\n        tooltipData.values = optimizedValues\r\n      }\r\n    }\r\n    return tooltipData\r\n  }\r\n\r\n  protected classifyTooltipIcons (icons: TooltipIconStyle[]): TooltipIconStyle[][] {\r\n    const leftIcons: TooltipIconStyle[] = []\r\n    const middleIcons: TooltipIconStyle[] = []\r\n    const rightIcons: TooltipIconStyle[] = []\r\n    icons.forEach(icon => {\r\n      switch (icon.position) {\r\n        case TooltipIconPosition.Left: {\r\n          leftIcons.push(icon)\r\n          break\r\n        }\r\n        case TooltipIconPosition.Middle: {\r\n          middleIcons.push(icon)\r\n          break\r\n        }\r\n        case TooltipIconPosition.Right: {\r\n          rightIcons.push(icon)\r\n          break\r\n        }\r\n      }\r\n    })\r\n    return [leftIcons, middleIcons, rightIcons]\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Coordinate from '../common/Coordinate'\r\nimport Point from '../common/Point'\r\nimport Bounding from '../common/Bounding'\r\nimport BarSpace from '../common/BarSpace'\r\nimport Precision from '../common/Precision'\r\nimport { OverlayStyle } from '../common/Styles'\r\nimport { EventHandler, EventName, MouseTouchEvent, MouseTouchEventCallback } from '../common/SyntheticEvent'\r\nimport { isBoolean, isNumber, isValid } from '../common/utils/typeChecks'\r\n\r\nimport { CustomApi } from '../Options'\r\n\r\nimport Axis from '../component/Axis'\r\nimport XAxis from '../component/XAxis'\r\nimport YAxis from '../component/YAxis'\r\nimport Overlay, { OVERLAY_FIGURE_KEY_PREFIX, OverlayFigure, OverlayFigureIgnoreEventType, OverlayMode, getAllOverlayFigureIgnoreEventTypes } from '../component/Overlay'\r\n\r\nimport OverlayStore, { ProgressOverlayInfo, EventOverlayInfo, EventOverlayInfoFigureType } from '../store/OverlayStore'\r\nimport TimeScaleStore from '../store/TimeScaleStore'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport View from './View'\r\n\r\nexport default class OverlayView<C extends Axis = YAxis> extends View<C> {\r\n  constructor (widget: DrawWidget<DrawPane<C>>) {\r\n    super(widget)\r\n    this._initEvent()\r\n  }\r\n\r\n  private _initEvent (): void {\r\n    const pane = this.getWidget().getPane()\r\n    const paneId = pane.getId()\r\n    const overlayStore = pane.getChart().getChartStore().getOverlayStore()\r\n    this.registerEvent('mouseMoveEvent', (event: MouseTouchEvent) => {\r\n      const progressInstanceInfo = overlayStore.getProgressInstanceInfo()\r\n      if (progressInstanceInfo !== null) {\r\n        const overlay = progressInstanceInfo.instance\r\n        let progressInstancePaneId = progressInstanceInfo.paneId\r\n        if (overlay.isStart()) {\r\n          overlayStore.updateProgressInstanceInfo(paneId)\r\n          progressInstancePaneId = paneId\r\n        }\r\n        const index = overlay.points.length - 1\r\n        const key = `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`\r\n        if (overlay.isDrawing() && progressInstancePaneId === paneId) {\r\n          overlay.eventMoveForDrawing(this._coordinateToPoint(progressInstanceInfo.instance, event))\r\n          overlay.onDrawing?.({ overlay, figureKey: key, figureIndex: index, ...event })\r\n        }\r\n        return this._figureMouseMoveEvent(\r\n          overlay,\r\n          EventOverlayInfoFigureType.Point,\r\n          key,\r\n          index,\r\n          0\r\n        )(event)\r\n      }\r\n      overlayStore.setHoverInstanceInfo({\r\n        paneId, instance: null, figureType: EventOverlayInfoFigureType.None, figureKey: '', figureIndex: -1, attrsIndex: -1\r\n      }, event)\r\n      return false\r\n    }).registerEvent('mouseClickEvent', (event: MouseTouchEvent) => {\r\n      const progressInstanceInfo = overlayStore.getProgressInstanceInfo()\r\n      if (progressInstanceInfo !== null) {\r\n        const overlay = progressInstanceInfo.instance\r\n        let progressInstancePaneId = progressInstanceInfo.paneId\r\n        if (overlay.isStart()) {\r\n          overlayStore.updateProgressInstanceInfo(paneId, true)\r\n          progressInstancePaneId = paneId\r\n        }\r\n        const index = overlay.points.length - 1\r\n        const key = `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`\r\n        if (overlay.isDrawing() && progressInstancePaneId === paneId) {\r\n          overlay.eventMoveForDrawing(this._coordinateToPoint(overlay, event))\r\n          overlay.onDrawing?.({ overlay, figureKey: key, figureIndex: index, ...event })\r\n          overlay.nextStep()\r\n          if (!overlay.isDrawing()) {\r\n            overlayStore.progressInstanceComplete()\r\n            overlay.onDrawEnd?.({ overlay, figureKey: key, figureIndex: index, ...event })\r\n          }\r\n        }\r\n        return this._figureMouseClickEvent(\r\n          overlay,\r\n          EventOverlayInfoFigureType.Point,\r\n          key,\r\n          index,\r\n          0\r\n        )(event)\r\n      }\r\n      overlayStore.setClickInstanceInfo({\r\n        paneId, instance: null, figureType: EventOverlayInfoFigureType.None, figureKey: '', figureIndex: -1, attrsIndex: -1\r\n      }, event)\r\n      return false\r\n    }).registerEvent('mouseDoubleClickEvent', (event: MouseTouchEvent) => {\r\n      const progressInstanceInfo = overlayStore.getProgressInstanceInfo()\r\n      if (progressInstanceInfo !== null) {\r\n        const overlay = progressInstanceInfo.instance\r\n        const progressInstancePaneId = progressInstanceInfo.paneId\r\n        if (overlay.isDrawing() && progressInstancePaneId === paneId) {\r\n          overlay.forceComplete()\r\n          if (!overlay.isDrawing()) {\r\n            overlayStore.progressInstanceComplete()\r\n            const index = overlay.points.length - 1\r\n            const key = `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`\r\n            overlay.onDrawEnd?.({ overlay, figureKey: key, figureIndex: index, ...event })\r\n          }\r\n        }\r\n        const index = overlay.points.length - 1\r\n        return this._figureMouseClickEvent(\r\n          overlay,\r\n          EventOverlayInfoFigureType.Point,\r\n          `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n          index,\r\n          0\r\n        )(event)\r\n      }\r\n      return false\r\n    }).registerEvent('mouseRightClickEvent', (event: MouseTouchEvent) => {\r\n      const progressInstanceInfo = overlayStore.getProgressInstanceInfo()\r\n      if (progressInstanceInfo !== null) {\r\n        const overlay = progressInstanceInfo.instance\r\n        if (overlay.isDrawing()) {\r\n          const index = overlay.points.length - 1\r\n          return this._figureMouseRightClickEvent(\r\n            overlay,\r\n            EventOverlayInfoFigureType.Point,\r\n            `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n            index,\r\n            0\r\n          )(event)\r\n        }\r\n      }\r\n      return false\r\n    }).registerEvent('mouseUpEvent', (event: MouseTouchEvent) => {\r\n      const { instance, figureIndex, figureKey } = overlayStore.getPressedInstanceInfo()\r\n      if (instance !== null) {\r\n        instance.onPressedMoveEnd?.({ overlay: instance, figureKey, figureIndex, ...event })\r\n      }\r\n      overlayStore.setPressedInstanceInfo({\r\n        paneId, instance: null, figureType: EventOverlayInfoFigureType.None, figureKey: '', figureIndex: -1, attrsIndex: -1\r\n      })\r\n      return false\r\n    }).registerEvent('pressedMouseMoveEvent', (event: MouseTouchEvent) => {\r\n      const { instance, figureType, figureIndex, figureKey } = overlayStore.getPressedInstanceInfo()\r\n      if (instance !== null) {\r\n        if (!instance.lock) {\r\n          if (!(instance.onPressedMoving?.({ overlay: instance, figureIndex, figureKey, ...event }) ?? false)) {\r\n            const point = this._coordinateToPoint(instance, event)\r\n            if (figureType === EventOverlayInfoFigureType.Point) {\r\n              instance.eventPressedPointMove(point, figureIndex)\r\n            } else {\r\n              instance.eventPressedOtherMove(point, this.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())\r\n            }\r\n          }\r\n        }\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n  }\r\n\r\n  private _createFigureEvents (\r\n    overlay: Overlay,\r\n    figureType: EventOverlayInfoFigureType,\r\n    figureKey: string,\r\n    figureIndex: number,\r\n    attrsIndex: number,\r\n    ignoreEvent?: boolean | OverlayFigureIgnoreEventType[]\r\n  ): EventHandler | undefined {\r\n    let eventHandler\r\n    if (!overlay.isDrawing()) {\r\n      let eventTypes: OverlayFigureIgnoreEventType[] = []\r\n      if (isValid(ignoreEvent)) {\r\n        if (isBoolean(ignoreEvent)) {\r\n          if (ignoreEvent) {\r\n            eventTypes = getAllOverlayFigureIgnoreEventTypes()\r\n          }\r\n        } else {\r\n          eventTypes = ignoreEvent\r\n        }\r\n      }\r\n      if (eventTypes.length === 0) {\r\n        return {\r\n          mouseMoveEvent: this._figureMouseMoveEvent(overlay, figureType, figureKey, figureIndex, attrsIndex),\r\n          mouseDownEvent: this._figureMouseDownEvent(overlay, figureType, figureKey, figureIndex, attrsIndex),\r\n          mouseClickEvent: this._figureMouseClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex),\r\n          mouseRightClickEvent: this._figureMouseRightClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex),\r\n          mouseDoubleClickEvent: this._figureMouseDoubleClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n        }\r\n      }\r\n      eventHandler = {}\r\n      // [\r\n      //   'mouseClickEvent', mouseDoubleClickEvent, 'mouseRightClickEvent',\r\n      //   'tapEvent', 'doubleTapEvent', 'mouseDownEvent',\r\n      //   'touchStartEvent', 'mouseMoveEvent', 'touchMoveEvent'\r\n      // ]\r\n      if (!eventTypes.includes('mouseMoveEvent') && !eventTypes.includes('touchMoveEvent')) {\r\n        eventHandler.mouseMoveEvent = this._figureMouseMoveEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n      }\r\n      if (!eventTypes.includes('mouseDownEvent') && !eventTypes.includes('touchStartEvent')) {\r\n        eventHandler.mouseDownEvent = this._figureMouseDownEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n      }\r\n      if (!eventTypes.includes('mouseClickEvent') && !eventTypes.includes('tapEvent')) {\r\n        eventHandler.mouseClickEvent = this._figureMouseClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n      }\r\n      if (!eventTypes.includes('mouseDoubleClickEvent') && !eventTypes.includes('doubleTapEvent')) {\r\n        eventHandler.mouseDoubleClickEvent = this._figureMouseDoubleClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n      }\r\n      if (!eventTypes.includes('mouseRightClickEvent')) {\r\n        eventHandler.mouseRightClickEvent = this._figureMouseRightClickEvent(overlay, figureType, figureKey, figureIndex, attrsIndex)\r\n      }\r\n    }\r\n    return eventHandler\r\n  }\r\n\r\n  private _figureMouseMoveEvent (overlay: Overlay, figureType: EventOverlayInfoFigureType, figureKey: string, figureIndex: number, attrsIndex: number): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const overlayStore = pane.getChart().getChartStore().getOverlayStore()\r\n      overlayStore.setHoverInstanceInfo(\r\n        { paneId: pane.getId(), instance: overlay, figureType, figureKey, figureIndex, attrsIndex }, event\r\n      )\r\n      return true\r\n    }\r\n  }\r\n\r\n  private _figureMouseDownEvent (overlay: Overlay, figureType: EventOverlayInfoFigureType, figureKey: string, figureIndex: number, attrsIndex: number): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const paneId = pane.getId()\r\n      const overlayStore = pane.getChart().getChartStore().getOverlayStore()\r\n      overlay.startPressedMove(this._coordinateToPoint(overlay, event))\r\n      overlay.onPressedMoveStart?.({ overlay, figureIndex, figureKey, ...event })\r\n      overlayStore.setPressedInstanceInfo({ paneId, instance: overlay, figureType, figureKey, figureIndex, attrsIndex })\r\n      return true\r\n    }\r\n  }\r\n\r\n  private _figureMouseClickEvent (overlay: Overlay, figureType: EventOverlayInfoFigureType, figureKey: string, figureIndex: number, attrsIndex: number): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const paneId = pane.getId()\r\n      const overlayStore = pane.getChart().getChartStore().getOverlayStore()\r\n      overlayStore.setClickInstanceInfo({ paneId, instance: overlay, figureType, figureKey, figureIndex, attrsIndex }, event)\r\n      return true\r\n    }\r\n  }\r\n\r\n  private _figureMouseDoubleClickEvent (overlay: Overlay, _figureType: EventOverlayInfoFigureType, figureKey: string, figureIndex: number, _attrsIndex: number): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      overlay.onDoubleClick?.({ ...event, figureIndex, figureKey, overlay })\r\n      return true\r\n    }\r\n  }\r\n\r\n  private _figureMouseRightClickEvent (overlay: Overlay, _figureType: EventOverlayInfoFigureType, figureKey: string, figureIndex: number, _attrsIndex: number): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      if (!(overlay.onRightClick?.({ overlay, figureIndex, figureKey, ...event }) ?? false)) {\r\n        const pane = this.getWidget().getPane()\r\n        const overlayStore = pane.getChart().getChartStore().getOverlayStore()\r\n        overlayStore.removeInstance(overlay)\r\n      }\r\n      return true\r\n    }\r\n  }\r\n\r\n  private _coordinateToPoint (overlay: Overlay, coordinate: Coordinate): Partial<Point> {\r\n    const point: Partial<Point> = {}\r\n    const pane = this.getWidget().getPane()\r\n    const chart = pane.getChart()\r\n    const paneId = pane.getId()\r\n    const timeScaleStore = chart.getChartStore().getTimeScaleStore()\r\n    if (this.coordinateToPointTimestampDataIndexFlag()) {\r\n      const xAxis = chart.getXAxisPane().getAxisComponent()\r\n      const dataIndex = xAxis.convertFromPixel(coordinate.x)\r\n      const timestamp = timeScaleStore.dataIndexToTimestamp(dataIndex) ?? undefined\r\n      point.dataIndex = dataIndex\r\n      point.timestamp = timestamp\r\n    }\r\n    if (this.coordinateToPointValueFlag()) {\r\n      const yAxis = pane.getAxisComponent()\r\n      let value = yAxis.convertFromPixel(coordinate.y)\r\n      if (overlay.mode !== OverlayMode.Normal && paneId === PaneIdConstants.CANDLE && isNumber(point.dataIndex)) {\r\n        const kLineData = timeScaleStore.getDataByDataIndex(point.dataIndex)\r\n        if (kLineData !== null) {\r\n          const modeSensitivity = overlay.modeSensitivity\r\n          if (value > kLineData.high) {\r\n            if (overlay.mode === OverlayMode.WeakMagnet) {\r\n              const highY = yAxis.convertToPixel(kLineData.high)\r\n              const buffValue = yAxis.convertFromPixel(highY - modeSensitivity)\r\n              if (value < buffValue) {\r\n                value = kLineData.high\r\n              }\r\n            } else {\r\n              value = kLineData.high\r\n            }\r\n          } else if (value < kLineData.low) {\r\n            if (overlay.mode === OverlayMode.WeakMagnet) {\r\n              const lowY = yAxis.convertToPixel(kLineData.low)\r\n              const buffValue = yAxis.convertFromPixel(lowY - modeSensitivity)\r\n              if (value > buffValue) {\r\n                value = kLineData.low\r\n              }\r\n            } else {\r\n              value = kLineData.low\r\n            }\r\n          } else {\r\n            const max = Math.max(kLineData.open, kLineData.close)\r\n            const min = Math.min(kLineData.open, kLineData.close)\r\n            if (value > max) {\r\n              if (value - max < kLineData.high - value) {\r\n                value = max\r\n              } else {\r\n                value = kLineData.high\r\n              }\r\n            } else if (value < min) {\r\n              if (value - kLineData.low < min - value) {\r\n                value = kLineData.low\r\n              } else {\r\n                value = min\r\n              }\r\n            } else if (max - value < value - min) {\r\n              value = max\r\n            } else {\r\n              value = min\r\n            }\r\n          }\r\n        }\r\n      }\r\n      point.value = value\r\n    }\r\n    return point\r\n  }\r\n\r\n  protected coordinateToPointValueFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  protected coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  override dispatchEvent (name: EventName, event: MouseTouchEvent, other?: number): boolean {\r\n    if (this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()) {\r\n      return this.onEvent(name, event, other)\r\n    }\r\n    return super.dispatchEvent(name, event, other)\r\n  }\r\n\r\n  override checkEventOn (): boolean {\r\n    return true\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const paneId = pane.getId()\r\n    const chart = pane.getChart()\r\n    const yAxis = pane.getAxisComponent() as unknown as Nullable<YAxis>\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = chart.getChartStore()\r\n    const customApi = chartStore.getCustomApi()\r\n    const thousandsSeparator = chartStore.getThousandsSeparator()\r\n    const timeScaleStore = chartStore.getTimeScaleStore()\r\n    const dateTimeFormat = timeScaleStore.getDateTimeFormat()\r\n    const barSpace = timeScaleStore.getBarSpace()\r\n    const precision = chartStore.getPrecision()\r\n    const defaultStyles = chartStore.getStyles().overlay\r\n    const overlayStore = chartStore.getOverlayStore()\r\n    const hoverInstanceInfo = overlayStore.getHoverInstanceInfo()\r\n    const clickInstanceInfo = overlayStore.getClickInstanceInfo()\r\n    const overlays = this.getCompleteOverlays(overlayStore, paneId)\r\n    overlays.forEach(overlay => {\r\n      if (overlay.visible) {\r\n        this._drawOverlay(\r\n          ctx, overlay, bounding, barSpace, precision,\r\n          dateTimeFormat, customApi, thousandsSeparator,\r\n          defaultStyles, xAxis, yAxis,\r\n          hoverInstanceInfo, clickInstanceInfo, timeScaleStore\r\n        )\r\n      }\r\n    })\r\n    const progressInstanceInfo = overlayStore.getProgressInstanceInfo()\r\n    if (progressInstanceInfo !== null) {\r\n      const overlay = this.getProgressOverlay(progressInstanceInfo, paneId)\r\n      // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\r\n      if (overlay !== null && overlay.visible) {\r\n        this._drawOverlay(\r\n          ctx, overlay, bounding, barSpace,\r\n          precision, dateTimeFormat, customApi, thousandsSeparator,\r\n          defaultStyles, xAxis, yAxis,\r\n          hoverInstanceInfo, clickInstanceInfo, timeScaleStore\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  private _drawOverlay (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: Overlay,\r\n    bounding: Bounding,\r\n    barSpace: BarSpace,\r\n    precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    defaultStyles: OverlayStyle,\r\n    xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>,\r\n    hoverInstanceInfo: EventOverlayInfo,\r\n    clickInstanceInfo: EventOverlayInfo,\r\n    timeScaleStore: TimeScaleStore\r\n  ): void {\r\n    const { points } = overlay\r\n    const coordinates = points.map(point => {\r\n      let dataIndex = point.dataIndex\r\n      if (isNumber(point.timestamp)) {\r\n        dataIndex = timeScaleStore.timestampToDataIndex(point.timestamp)\r\n      }\r\n      const coordinate = { x: 0, y: 0 }\r\n      if (isNumber(dataIndex)) {\r\n        coordinate.x = xAxis?.convertToPixel(dataIndex) ?? 0\r\n      }\r\n      if (isNumber(point.value)) {\r\n        coordinate.y = yAxis?.convertToPixel(point.value) ?? 0\r\n      }\r\n      return coordinate\r\n    })\r\n    if (coordinates.length > 0) {\r\n      const figures = new Array<OverlayFigure>().concat(\r\n        this.getFigures(\r\n          overlay, coordinates, bounding, barSpace, precision, thousandsSeparator, dateTimeFormat, defaultStyles, xAxis, yAxis\r\n        )\r\n      )\r\n      this.drawFigures(\r\n        ctx,\r\n        overlay,\r\n        figures,\r\n        defaultStyles\r\n      )\r\n    }\r\n    this.drawDefaultFigures(\r\n      ctx,\r\n      overlay,\r\n      coordinates,\r\n      bounding,\r\n      precision,\r\n      dateTimeFormat,\r\n      customApi,\r\n      thousandsSeparator,\r\n      defaultStyles,\r\n      xAxis,\r\n      yAxis,\r\n      hoverInstanceInfo,\r\n      clickInstanceInfo\r\n    )\r\n  }\r\n\r\n  protected drawFigures (ctx: CanvasRenderingContext2D, overlay: Overlay, figures: OverlayFigure[], defaultStyles: OverlayStyle): void {\r\n    figures.forEach((figure, figureIndex) => {\r\n      const { type, styles, attrs, ignoreEvent } = figure\r\n      const attrsArray = [].concat(attrs)\r\n      attrsArray.forEach((ats, attrsIndex) => {\r\n        const events = this._createFigureEvents(overlay, EventOverlayInfoFigureType.Other, figure.key ?? '', figureIndex, attrsIndex, ignoreEvent)\r\n        const ss = { ...defaultStyles[type], ...overlay.styles?.[type], ...styles }\r\n        this.createFigure(\r\n          type, ats, ss, events\r\n        )?.draw(ctx)\r\n      })\r\n    })\r\n  }\r\n\r\n  protected getCompleteOverlays (overlayStore: OverlayStore, paneId: string): Overlay[] {\r\n    return overlayStore.getInstances(paneId)\r\n  }\r\n\r\n  protected getProgressOverlay (info: ProgressOverlayInfo, paneId: string): Nullable<Overlay> {\r\n    if (info.paneId === paneId) {\r\n      return info.instance\r\n    }\r\n    return null\r\n  }\r\n\r\n  protected getFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    barSpace: BarSpace,\r\n    precision: Precision,\r\n    thousandsSeparator: string,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    defaultStyles: OverlayStyle,\r\n    xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    return overlay.createPointFigures?.({ overlay, coordinates, bounding, barSpace, precision, thousandsSeparator, dateTimeFormat, defaultStyles, xAxis, yAxis }) ?? []\r\n  }\r\n\r\n  protected drawDefaultFigures (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    _bounding: Bounding,\r\n    _precision: Precision,\r\n    _dateTimeFormat: Intl.DateTimeFormat,\r\n    _customApi: CustomApi,\r\n    _thousandsSeparator: string,\r\n    defaultStyles: OverlayStyle,\r\n    _xAxis: Nullable<XAxis>,\r\n    _yAxis: Nullable<YAxis>,\r\n    hoverInstanceInfo: EventOverlayInfo,\r\n    clickInstanceInfo: EventOverlayInfo\r\n  ): void {\r\n    if (overlay.needDefaultPointFigure) {\r\n      if (\r\n        (hoverInstanceInfo.instance?.id === overlay.id && hoverInstanceInfo.figureType !== EventOverlayInfoFigureType.None) ||\r\n        (clickInstanceInfo.instance?.id === overlay.id && clickInstanceInfo.figureType !== EventOverlayInfoFigureType.None)\r\n      ) {\r\n        const styles = overlay.styles\r\n        const pointStyles = { ...defaultStyles.point, ...styles?.point }\r\n        coordinates.forEach(({ x, y }, index) => {\r\n          let radius = pointStyles.radius\r\n          let color = pointStyles.color\r\n          let borderColor = pointStyles.borderColor\r\n          let borderSize = pointStyles.borderSize\r\n          if (\r\n            hoverInstanceInfo.instance?.id === overlay.id &&\r\n            hoverInstanceInfo.figureType === EventOverlayInfoFigureType.Point &&\r\n            hoverInstanceInfo.figureIndex === index\r\n          ) {\r\n            radius = pointStyles.activeRadius\r\n            color = pointStyles.activeColor\r\n            borderColor = pointStyles.activeBorderColor\r\n            borderSize = pointStyles.activeBorderSize\r\n          }\r\n          this.createFigure(\r\n            'circle',\r\n            { x, y, r: radius + borderSize },\r\n            { color: borderColor },\r\n            this._createFigureEvents(overlay, EventOverlayInfoFigureType.Point, `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`, index, 0)\r\n          )?.draw(ctx)\r\n          this.createFigure(\r\n            'circle',\r\n            { x, y, r: radius },\r\n            { color }\r\n          )?.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport GridView from '../view/GridView'\r\nimport IndicatorView from '../view/IndicatorView'\r\nimport CrosshairLineView from '../view/CrosshairLineView'\r\nimport IndicatorTooltipView from '../view/IndicatorTooltipView'\r\nimport OverlayView from '../view/OverlayView'\r\n\r\nexport default class IndicatorWidget extends DrawWidget<DrawPane<YAxis>> {\r\n  private readonly _gridView = new GridView(this)\r\n  private readonly _indicatorView = new IndicatorView(this)\r\n  private readonly _crosshairLineView = new CrosshairLineView(this)\r\n  private readonly _tooltipView = this.createTooltipView()\r\n  private readonly _overlayView = new OverlayView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.addChild(this._tooltipView)\r\n    this.addChild(this._overlayView)\r\n    this.getContainer().style.cursor = 'crosshair'\r\n    this.registerEvent('mouseMoveEvent', () => {\r\n      pane.getChart().getChartStore().getTooltipStore().setActiveIcon()\r\n      return false\r\n    })\r\n  }\r\n\r\n  getName (): string {\r\n    return WidgetNameConstants.MAIN\r\n  }\r\n\r\n  protected updateMain (ctx: CanvasRenderingContext2D): void {\r\n    this.updateMainContent(ctx)\r\n    this._indicatorView.draw(ctx)\r\n    this._gridView.draw(ctx)\r\n  }\r\n\r\n  protected createTooltipView (): IndicatorTooltipView {\r\n    return new IndicatorTooltipView(this)\r\n  }\r\n\r\n  protected updateMainContent (_ctx: CanvasRenderingContext2D): void {}\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    this._overlayView.draw(ctx)\r\n    this._crosshairLineView.draw(ctx)\r\n    this._tooltipView.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../common/Coordinate'\r\nimport VisibleData from '../common/VisibleData'\r\nimport BarSpace from '../common/BarSpace'\r\nimport { GradientColor } from '../common/Styles'\r\n\r\nimport ChildrenView from './ChildrenView'\r\n\r\nimport { isNumber, isArray } from '../common/utils/typeChecks'\r\n\r\nexport default class CandleAreaView extends ChildrenView {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const bounding = widget.getBounding()\r\n    const yAxis = pane.getAxisComponent()\r\n    const candleAreaStyles = chart.getStyles().candle.area\r\n    const lineCoordinates: Coordinate[] = []\r\n    const areaCoordinates: Coordinate[] = []\r\n    let minY = Number.MAX_SAFE_INTEGER\r\n    this.eachChildren((data: VisibleData, barSpace: BarSpace, i: number) => {\r\n      const { data: kLineData, x } = data\r\n      const { halfGapBar } = barSpace\r\n      const value = kLineData[candleAreaStyles.value]\r\n      if (isNumber(value)) {\r\n        const y = yAxis.convertToPixel(value)\r\n        if (i === 0) {\r\n          const startX = x - halfGapBar\r\n          areaCoordinates.push({ x: startX, y: bounding.height })\r\n          areaCoordinates.push({ x: startX, y })\r\n          lineCoordinates.push({ x: startX, y })\r\n        }\r\n        lineCoordinates.push({ x, y })\r\n        areaCoordinates.push({ x, y })\r\n        minY = Math.min(minY, y)\r\n      }\r\n    })\r\n    const areaCoordinateCount = areaCoordinates.length\r\n    if (areaCoordinateCount > 0) {\r\n      const lastCoordinate: Coordinate = areaCoordinates[areaCoordinateCount - 1]\r\n      const endX = lastCoordinate.x\r\n      lineCoordinates.push({ x: endX, y: lastCoordinate.y })\r\n      areaCoordinates.push({ x: endX, y: lastCoordinate.y })\r\n      areaCoordinates.push({ x: endX, y: bounding.height })\r\n    }\r\n\r\n    if (lineCoordinates.length > 0) {\r\n      this.createFigure(\r\n        'line',\r\n        { coordinates: lineCoordinates },\r\n        {\r\n          color: candleAreaStyles.lineColor,\r\n          size: candleAreaStyles.lineSize\r\n        }\r\n      )?.draw(ctx)\r\n    }\r\n\r\n    if (areaCoordinates.length > 0) {\r\n      // Draw real-time background\r\n      const backgroundColor = candleAreaStyles.backgroundColor\r\n      let color: string | CanvasGradient\r\n      if (isArray<GradientColor>(backgroundColor)) {\r\n        const gradient = ctx.createLinearGradient(0, bounding.height, 0, minY)\r\n        try {\r\n          backgroundColor.forEach(({ offset, color }) => {\r\n            gradient.addColorStop(offset, color)\r\n          })\r\n        } catch (e) {\r\n        }\r\n        color = gradient\r\n      } else {\r\n        color = backgroundColor\r\n      }\r\n      this.createFigure(\r\n        'polygon',\r\n        { coordinates: areaCoordinates },\r\n        { color }\r\n      )?.draw(ctx)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Coordinate from '../common/Coordinate'\r\nimport VisibleData from '../common/VisibleData'\r\nimport { CandleHighLowPriceMarkStyle } from '../common/Styles'\r\n\r\nimport ChildrenView from './ChildrenView'\r\n\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\n\r\nexport default class CandleHighLowPriceView extends ChildrenView {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const highPriceMarkStyles = priceMarkStyles.high\r\n    const lowPriceMarkStyles = priceMarkStyles.low\r\n    if (priceMarkStyles.show && (highPriceMarkStyles.show || lowPriceMarkStyles.show)) {\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      const precision = chartStore.getPrecision()\r\n      const yAxis = pane.getAxisComponent()\r\n      let high = Number.MIN_SAFE_INTEGER\r\n      let highX = 0\r\n      let low = Number.MAX_SAFE_INTEGER\r\n      let lowX = 0\r\n      this.eachChildren((data: VisibleData) => {\r\n        const { data: kLineData, x } = data\r\n        if (high < kLineData.high) {\r\n          high = kLineData.high\r\n          highX = x\r\n        }\r\n        if (low > kLineData.low) {\r\n          low = kLineData.low\r\n          lowX = x\r\n        }\r\n      })\r\n      const highY = yAxis.convertToPixel(high)\r\n      const lowY = yAxis.convertToPixel(low)\r\n      if (highPriceMarkStyles.show && high !== Number.MIN_SAFE_INTEGER) {\r\n        this._drawMark(\r\n          ctx,\r\n          formatThousands(formatPrecision(high, precision.price), thousandsSeparator),\r\n          { x: highX, y: highY },\r\n          highY < lowY ? [-2, -5] : [2, 5],\r\n          highPriceMarkStyles\r\n        )\r\n      }\r\n      if (lowPriceMarkStyles.show && low !== Number.MAX_SAFE_INTEGER) {\r\n        this._drawMark(\r\n          ctx,\r\n          formatThousands(formatPrecision(low, precision.price), thousandsSeparator),\r\n          { x: lowX, y: lowY },\r\n          highY < lowY ? [2, 5] : [-2, -5],\r\n          lowPriceMarkStyles\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  private _drawMark (\r\n    ctx: CanvasRenderingContext2D,\r\n    text: string,\r\n    coordinate: Coordinate,\r\n    offsets: number[],\r\n    styles: CandleHighLowPriceMarkStyle\r\n  ): void {\r\n    const startX = coordinate.x\r\n    const startY = coordinate.y + offsets[0]\r\n    this.createFigure(\r\n      'line',\r\n      {\r\n        coordinates: [\r\n          { x: startX - 2, y: startY + offsets[0] },\r\n          { x: startX, y: startY },\r\n          { x: startX + 2, y: startY + offsets[0] }\r\n        ]\r\n      },\r\n      { color: styles.color }\r\n    )?.draw(ctx)\r\n\r\n    let lineEndX: number\r\n    let textStartX: number\r\n    let textAlign: string\r\n    const { width } = this.getWidget().getBounding()\r\n    if (startX > width / 2) {\r\n      lineEndX = startX - 5\r\n      textStartX = lineEndX - styles.textOffset\r\n      textAlign = 'right'\r\n    } else {\r\n      lineEndX = startX + 5\r\n      textAlign = 'left'\r\n      textStartX = lineEndX + styles.textOffset\r\n    }\r\n\r\n    const y = startY + offsets[1]\r\n    this.createFigure(\r\n      'line',\r\n      {\r\n        coordinates: [\r\n          { x: startX, y: startY },\r\n          { x: startX, y },\r\n          { x: lineEndX, y }\r\n        ]\r\n      },\r\n      { color: styles.color }\r\n    )?.draw(ctx)\r\n    this.createFigure(\r\n      'text',\r\n      {\r\n        x: textStartX,\r\n        y,\r\n        text,\r\n        align: textAlign,\r\n        baseline: 'middle'\r\n      },\r\n      {\r\n        color: styles.color,\r\n        size: styles.textSize,\r\n        family: styles.textFamily,\r\n        weight: styles.textWeight\r\n      }\r\n    )?.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport View from './View'\r\n\r\nexport default class CandleLastPriceView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const lastPriceMarkStyles = priceMarkStyles.last\r\n    const lastPriceMarkLineStyles = lastPriceMarkStyles.line\r\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkLineStyles.show) {\r\n      const yAxis = pane.getAxisComponent() as YAxis\r\n      const dataList = chartStore.getDataList()\r\n      const data = dataList[dataList.length - 1]\r\n      if (data != null) {\r\n        const { close, open } = data\r\n        const priceY = yAxis.convertToNicePixel(close)\r\n        let color: string\r\n        if (close > open) {\r\n          color = lastPriceMarkStyles.upColor\r\n        } else if (close < open) {\r\n          color = lastPriceMarkStyles.downColor\r\n        } else {\r\n          color = lastPriceMarkStyles.noChangeColor\r\n        }\r\n        this.createFigure(\r\n          'line',\r\n          {\r\n            coordinates: [\r\n              { x: 0, y: priceY },\r\n              { x: bounding.width, y: priceY }\r\n            ]\r\n          },\r\n          {\r\n            style: lastPriceMarkLineStyles.style,\r\n            color,\r\n            size: lastPriceMarkLineStyles.size,\r\n            dashedValue: lastPriceMarkLineStyles.dashedValue\r\n          }\r\n        )?.draw(ctx)\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Locales } from '../../Options'\r\n\r\nconst zhCN: Locales = {\r\n  time: 'Êó∂Èó¥Ôºö',\r\n  open: 'ÂºÄÔºö',\r\n  high: 'È´òÔºö',\r\n  low: '‰ΩéÔºö',\r\n  close: 'Êî∂Ôºö',\r\n  volume: 'Êàê‰∫§ÈáèÔºö',\r\n  turnover: 'Êàê‰∫§È¢ùÔºö',\r\n  change: 'Ê∂®ÂπÖÔºö'\r\n}\r\n\r\nexport default zhCN\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Locales } from '../../Options'\r\n\r\nconst enUS: Locales = {\r\n  time: 'Time: ',\r\n  open: 'Open: ',\r\n  high: 'High: ',\r\n  low: 'Low: ',\r\n  close: 'Close: ',\r\n  volume: 'Volume: ',\r\n  turnover: 'Turnover: ',\r\n  change: 'Change: '\r\n}\r\n\r\nexport default enUS\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { Locales } from '../../Options'\r\n\r\nimport zhCN from './zh-CN'\r\nimport enUS from './en-US'\r\n\r\nconst locales: Record<string, Locales> = {\r\n  'zh-CN': zhCN,\r\n  'en-US': enUS\r\n}\r\n\r\nfunction registerLocale (locale: string, ls: Locales): void {\r\n  locales[locale] = { ...locales[locale], ...ls }\r\n}\r\n\r\nfunction getSupportedLocales (): string[] {\r\n  return Object.keys(locales)\r\n}\r\n\r\nfunction i18n (key: string, locale: string): string {\r\n  return locales[locale]?.[key] ?? key\r\n}\r\n\r\nexport { i18n, registerLocale, getSupportedLocales }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Bounding from '../common/Bounding'\r\nimport KLineData from '../common/KLineData'\r\nimport Precision from '../common/Precision'\r\nimport Crosshair from '../common/Crosshair'\r\nimport {\r\n  Styles, CandleStyle, TooltipData, TooltipDataChild, TooltipShowType, CandleTooltipRectPosition,\r\n  CandleTooltipCustomCallbackData, YAxisPosition, PolygonType\r\n} from '../common/Styles'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { createFont } from '../common/utils/canvas'\r\nimport { isFunction, isObject, isValid } from '../common/utils/typeChecks'\r\n\r\nimport { CustomApi, FormatDateType } from '../Options'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nimport Indicator from '../component/Indicator'\r\n\r\nimport IndicatorTooltipView from './IndicatorTooltipView'\r\n\r\nimport { TooltipIcon } from '../store/TooltipStore'\r\n\r\nimport { i18n } from '../extension/i18n/index'\r\n\r\nexport default class CandleTooltipView extends IndicatorTooltipView {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const paneId = pane.getId()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const crosshair = chartStore.getTooltipStore().getCrosshair()\r\n    if (isValid(crosshair.kLineData)) {\r\n      const bounding = widget.getBounding()\r\n      const yAxisBounding = pane.getYAxisWidget()?.getBounding() as Bounding\r\n      const dataList = chartStore.getDataList()\r\n      const precision = chartStore.getPrecision()\r\n      const locale = chartStore.getLocale()\r\n      const customApi = chartStore.getCustomApi()\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      const activeIcon = chartStore.getTooltipStore().getActiveIcon()\r\n      const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n      const dateTimeFormat = chartStore.getTimeScaleStore().getDateTimeFormat()\r\n      const styles = chartStore.getStyles()\r\n      const candleStyles = styles.candle\r\n      const indicatorStyles = styles.indicator\r\n      if (\r\n        candleStyles.tooltip.showType === TooltipShowType.Rect &&\r\n        indicatorStyles.tooltip.showType === TooltipShowType.Rect\r\n      ) {\r\n        const isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip)\r\n        const isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, dataList, indicators,\r\n          bounding, yAxisBounding,\r\n          crosshair, precision,\r\n          dateTimeFormat, locale, customApi, thousandsSeparator,\r\n          isDrawCandleTooltip, isDrawIndicatorTooltip,\r\n          styles, 0\r\n        )\r\n      } else if (\r\n        candleStyles.tooltip.showType === TooltipShowType.Standard &&\r\n        indicatorStyles.tooltip.showType === TooltipShowType.Standard\r\n      ) {\r\n        const top = this._drawCandleStandardTooltip(\r\n          ctx, dataList, paneId, bounding, crosshair, activeIcon, precision,\r\n          dateTimeFormat, locale, customApi, thousandsSeparator, candleStyles\r\n        )\r\n        this.drawIndicatorTooltip(ctx, paneId, dataList, crosshair, activeIcon, indicators, customApi, thousandsSeparator, bounding, indicatorStyles, top)\r\n      } else if (\r\n        candleStyles.tooltip.showType === TooltipShowType.Rect &&\r\n        indicatorStyles.tooltip.showType === TooltipShowType.Standard\r\n      ) {\r\n        const top = this.drawIndicatorTooltip(ctx, paneId, dataList, crosshair, activeIcon, indicators, customApi, thousandsSeparator, bounding, indicatorStyles, 0)\r\n        const isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, dataList, indicators,\r\n          bounding, yAxisBounding,\r\n          crosshair, precision, dateTimeFormat,\r\n          locale, customApi, thousandsSeparator,\r\n          isDrawCandleTooltip, false,\r\n          styles, top\r\n        )\r\n      } else {\r\n        const top = this._drawCandleStandardTooltip(\r\n          ctx, dataList, paneId, bounding, crosshair, activeIcon, precision,\r\n          dateTimeFormat, locale, customApi, thousandsSeparator, candleStyles\r\n        )\r\n        const isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, dataList, indicators,\r\n          bounding, yAxisBounding,\r\n          crosshair, precision, dateTimeFormat,\r\n          locale, customApi, thousandsSeparator,\r\n          false, isDrawIndicatorTooltip,\r\n          styles, top\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  private _drawCandleStandardTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    dataList: KLineData[],\r\n    paneId: string,\r\n    bounding: Bounding,\r\n    crosshair: Crosshair,\r\n    activeTooltipIcon: Nullable<TooltipIcon>,\r\n    precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    locale: string,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    styles: CandleStyle\r\n  ): number {\r\n    const tooltipStyles = styles.tooltip\r\n    const tooltipTextStyles = tooltipStyles.text\r\n    let height = 0\r\n    if (this.isDrawTooltip(crosshair, tooltipStyles)) {\r\n      const dataIndex = crosshair.dataIndex ?? 0\r\n      const values = this._getCandleTooltipData(\r\n        { prev: dataList[dataIndex - 1] ?? null, current: crosshair.kLineData as KLineData, next: dataList[dataIndex + 1] ?? null },\r\n        precision, dateTimeFormat, locale, customApi, thousandsSeparator, styles\r\n      )\r\n      let x = 0\r\n      let y = 0\r\n      let prevRowHeight = 0\r\n      const [leftIcons, middleIcons, rightIcons] = this.classifyTooltipIcons(tooltipStyles.icons)\r\n      const [leftIconsNextStartX, leftIconsNextStartY, leftIconsLastRowHeight, leftIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n        ctx, bounding, { paneId, indicatorName: '', iconId: '' },\r\n        activeTooltipIcon, leftIcons, x, y, 0\r\n      )\r\n      x = leftIconsNextStartX\r\n      y = leftIconsNextStartY\r\n      height += leftIconsIncreaseHeight\r\n      prevRowHeight = leftIconsLastRowHeight\r\n\r\n      const [middleIconsNextStartX, middleIconsNextStartY, middleIconsLastRowHeight, middleIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n        ctx, bounding, { paneId, indicatorName: '', iconId: '' },\r\n        activeTooltipIcon, middleIcons, x, y, prevRowHeight\r\n      )\r\n      x = middleIconsNextStartX\r\n      y = middleIconsNextStartY\r\n      height += middleIconsIncreaseHeight\r\n      prevRowHeight = middleIconsLastRowHeight\r\n\r\n      if (values.length > 0) {\r\n        const [valuesNextStartX, valuesIconsNextStartY, valuesIconsLastRowHeight, valuesIconsIncreaseHeight] = this.drawStandardTooltipLabels(ctx, bounding, values, x, y, prevRowHeight, tooltipTextStyles)\r\n        x = valuesNextStartX\r\n        y = valuesIconsNextStartY\r\n        height += valuesIconsIncreaseHeight\r\n        prevRowHeight = valuesIconsLastRowHeight\r\n      }\r\n\r\n      const [rightIconsNextStartX, rightIconsNextStartY, rightIconsLastRowHeight, rightIconsIncreaseHeight] = this.drawStandardTooltipIcons(\r\n        ctx, bounding, { paneId, indicatorName: '', iconId: '' },\r\n        activeTooltipIcon, rightIcons, x, y, prevRowHeight\r\n      )\r\n      x = rightIconsNextStartX\r\n      y = rightIconsNextStartY\r\n      height += rightIconsIncreaseHeight\r\n      prevRowHeight = rightIconsLastRowHeight\r\n    }\r\n    return height\r\n  }\r\n\r\n  private _drawRectTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    dataList: KLineData[],\r\n    indicators: Indicator[],\r\n    bounding: Bounding,\r\n    yAxisBounding: Bounding,\r\n    crosshair: Crosshair,\r\n    precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    locale: string,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    isDrawCandleTooltip: boolean,\r\n    isDrawIndicatorTooltip: boolean,\r\n    styles: Styles,\r\n    top: number\r\n  ): void {\r\n    const candleStyles = styles.candle\r\n    const indicatorStyles = styles.indicator\r\n    const candleTooltipStyles = candleStyles.tooltip\r\n    const indicatorTooltipStyles = indicatorStyles.tooltip\r\n    if (isDrawCandleTooltip || isDrawIndicatorTooltip) {\r\n      const dataIndex = crosshair.dataIndex ?? 0\r\n      const candleTooltipDatas = this._getCandleTooltipData(\r\n        { prev: dataList[dataIndex - 1] ?? null, current: crosshair.kLineData as KLineData, next: dataList[dataIndex + 1] ?? null },\r\n        precision, dateTimeFormat, locale, customApi, thousandsSeparator, candleStyles\r\n      )\r\n      const {\r\n        marginLeft: baseTextMarginLeft,\r\n        marginRight: baseTextMarginRight,\r\n        marginTop: baseTextMarginTop,\r\n        marginBottom: baseTextMarginBottom,\r\n        size: baseTextSize,\r\n        weight: baseTextWeight,\r\n        family: baseTextFamily\r\n      } = candleTooltipStyles.text\r\n\r\n      const {\r\n        position: rectPosition,\r\n        paddingLeft: rectPaddingLeft,\r\n        paddingRight: rectPaddingRight,\r\n        paddingTop: rectPaddingTop,\r\n        paddingBottom: rectPaddingBottom,\r\n        offsetLeft: rectOffsetLeft,\r\n        offsetRight: rectOffsetRight,\r\n        offsetTop: rectOffsetTop,\r\n        offsetBottom: rectOffsetBottom,\r\n        borderSize: rectBorderSize,\r\n        borderRadius: rectBorderRadius,\r\n        borderColor: rectBorderColor,\r\n        color: rectBackgroundColor\r\n      } = candleTooltipStyles.rect\r\n\r\n      let maxTextWidth = 0\r\n      let rectWidth = 0\r\n      let rectHeight = 0\r\n      if (isDrawCandleTooltip) {\r\n        ctx.font = createFont(baseTextSize, baseTextWeight, baseTextFamily)\r\n        candleTooltipDatas.forEach(data => {\r\n          const title = data.title as TooltipDataChild\r\n          const value = data.value as TooltipDataChild\r\n          const text = `${title.text}${value.text}`\r\n          const labelWidth = ctx.measureText(text).width + baseTextMarginLeft + baseTextMarginRight\r\n          maxTextWidth = Math.max(maxTextWidth, labelWidth)\r\n        })\r\n        rectHeight += ((baseTextMarginBottom + baseTextMarginTop + baseTextSize) * candleTooltipDatas.length)\r\n      }\r\n\r\n      const {\r\n        marginLeft: indicatorTextMarginLeft,\r\n        marginRight: indicatorTextMarginRight,\r\n        marginTop: indicatorTextMarginTop,\r\n        marginBottom: indicatorTextMarginBottom,\r\n        size: indicatorTextSize,\r\n        weight: indicatorTextWeight,\r\n        family: indicatorTextFamily\r\n      } = indicatorTooltipStyles.text\r\n      const indicatorTooltipDataValuess: TooltipData[][] = []\r\n      if (isDrawIndicatorTooltip) {\r\n        ctx.font = createFont(indicatorTextSize, indicatorTextWeight, indicatorTextFamily)\r\n        indicators.forEach(indicator => {\r\n          const tooltipDataValues = this.getIndicatorTooltipData(dataList, crosshair, indicator, customApi, thousandsSeparator, indicatorStyles).values ?? []\r\n          indicatorTooltipDataValuess.push(tooltipDataValues)\r\n          tooltipDataValues.forEach(data => {\r\n            const title = data.title as TooltipDataChild\r\n            const value = data.value as TooltipDataChild\r\n            const text = `${title.text}${value.text}`\r\n            const textWidth = ctx.measureText(text).width + indicatorTextMarginLeft + indicatorTextMarginRight\r\n            maxTextWidth = Math.max(maxTextWidth, textWidth)\r\n            rectHeight += (indicatorTextMarginTop + indicatorTextMarginBottom + indicatorTextSize)\r\n          })\r\n        })\r\n      }\r\n      rectWidth += maxTextWidth\r\n      if (rectWidth !== 0 && rectHeight !== 0) {\r\n        rectWidth += (rectBorderSize * 2 + rectPaddingLeft + rectPaddingRight)\r\n        rectHeight += (rectBorderSize * 2 + rectPaddingTop + rectPaddingBottom)\r\n        const centerX = bounding.width / 2\r\n        const isPointer = rectPosition === CandleTooltipRectPosition.Pointer && crosshair.paneId === PaneIdConstants.CANDLE\r\n        const isLeft = (crosshair.realX ?? 0) > centerX\r\n        let rectX: number = 0\r\n        if (isPointer) {\r\n          const realX = crosshair.realX as number\r\n          if (isLeft) {\r\n            rectX = realX - rectOffsetRight - rectWidth\r\n          } else {\r\n            rectX = realX + rectOffsetLeft\r\n          }\r\n        } else {\r\n          if (isLeft) {\r\n            rectX = rectOffsetLeft\r\n            if (styles.yAxis.inside && styles.yAxis.position === YAxisPosition.Left) {\r\n              rectX += yAxisBounding.width\r\n            }\r\n          } else {\r\n            rectX = bounding.width - rectOffsetRight - rectWidth\r\n            if (styles.yAxis.inside && styles.yAxis.position === YAxisPosition.Right) {\r\n              rectX -= yAxisBounding.width\r\n            }\r\n          }\r\n        }\r\n\r\n        let rectY = top + rectOffsetTop\r\n        if (isPointer) {\r\n          const y = crosshair.y as number\r\n          rectY = y - rectHeight / 2\r\n          if (rectY + rectHeight > bounding.height - rectOffsetBottom) {\r\n            rectY = bounding.height - rectOffsetBottom - rectHeight\r\n          }\r\n          if (rectY < top + rectOffsetTop) {\r\n            rectY = top + rectOffsetTop\r\n          }\r\n        }\r\n        this.createFigure(\r\n          'rect',\r\n          {\r\n            x: rectX,\r\n            y: rectY,\r\n            width: rectWidth,\r\n            height: rectHeight\r\n          },\r\n          {\r\n            style: PolygonType.StrokeFill,\r\n            color: rectBackgroundColor,\r\n            borderColor: rectBorderColor,\r\n            borderSize: rectBorderSize,\r\n            borderRadius: rectBorderRadius\r\n          }\r\n        )?.draw(ctx)\r\n        const candleTextX = rectX + rectBorderSize + rectPaddingLeft + baseTextMarginLeft\r\n        let textY = rectY + rectBorderSize + rectPaddingTop\r\n        if (isDrawCandleTooltip) {\r\n          // render candle texts\r\n          candleTooltipDatas.forEach(data => {\r\n            textY += baseTextMarginTop\r\n            const title = data.title as TooltipDataChild\r\n            this.createFigure(\r\n              'text',\r\n              {\r\n                x: candleTextX,\r\n                y: textY,\r\n                text: title.text\r\n              },\r\n              {\r\n                color: title.color,\r\n                size: baseTextSize,\r\n                family: baseTextFamily,\r\n                weight: baseTextWeight\r\n              }\r\n            )?.draw(ctx)\r\n            const value = data.value as TooltipDataChild\r\n            this.createFigure(\r\n              'text',\r\n              {\r\n                x: rectX + rectWidth - rectBorderSize - baseTextMarginRight - rectPaddingRight,\r\n                y: textY,\r\n                text: value.text,\r\n                align: 'right'\r\n              },\r\n              {\r\n                color: value.color,\r\n                size: baseTextSize,\r\n                family: baseTextFamily,\r\n                weight: baseTextWeight\r\n              }\r\n            )?.draw(ctx)\r\n            textY += (baseTextSize + baseTextMarginBottom)\r\n          })\r\n        }\r\n        if (isDrawIndicatorTooltip) {\r\n          // render indicator texts\r\n          const indicatorTextX = rectX + rectBorderSize + rectPaddingLeft + indicatorTextMarginLeft\r\n          indicatorTooltipDataValuess.forEach(datas => {\r\n            datas.forEach(data => {\r\n              textY += indicatorTextMarginTop\r\n              const title = data.title as TooltipDataChild\r\n              const value = data.value as TooltipDataChild\r\n              this.createFigure(\r\n                'text',\r\n                {\r\n                  x: indicatorTextX,\r\n                  y: textY,\r\n                  text: title.text\r\n                },\r\n                {\r\n                  color: title.color,\r\n                  size: indicatorTextSize,\r\n                  family: indicatorTextFamily,\r\n                  weight: indicatorTextWeight\r\n                }\r\n              )?.draw(ctx)\r\n\r\n              this.createFigure(\r\n                'text',\r\n                {\r\n                  x: rectX + rectWidth - rectBorderSize - indicatorTextMarginRight - rectPaddingRight,\r\n                  y: textY,\r\n                  text: value.text,\r\n                  align: 'right'\r\n                },\r\n                {\r\n                  color: value.color,\r\n                  size: indicatorTextSize,\r\n                  family: indicatorTextFamily,\r\n                  weight: indicatorTextWeight\r\n                }\r\n              )?.draw(ctx)\r\n              textY += (indicatorTextSize + indicatorTextMarginBottom)\r\n            })\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getCandleTooltipData (\r\n    data: CandleTooltipCustomCallbackData,\r\n    precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    locale: string,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    styles: CandleStyle\r\n  ): TooltipData[] {\r\n    const tooltipStyles = styles.tooltip\r\n    const textColor = tooltipStyles.text.color\r\n    const current = data.current\r\n    const prevClose = data.prev?.close ?? current.close\r\n    const changeValue = current.close - prevClose\r\n    const { price: pricePrecision, volume: volumePrecision } = precision\r\n    const mapping = {\r\n      '{time}': customApi.formatDate(dateTimeFormat, current.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Tooltip),\r\n      '{open}': formatThousands(formatPrecision(current.open, pricePrecision), thousandsSeparator),\r\n      '{high}': formatThousands(formatPrecision(current.high, pricePrecision), thousandsSeparator),\r\n      '{low}': formatThousands(formatPrecision(current.low, pricePrecision), thousandsSeparator),\r\n      '{close}': formatThousands(formatPrecision(current.close, pricePrecision), thousandsSeparator),\r\n      '{volume}': formatThousands(\r\n        customApi.formatBigNumber(formatPrecision(current.volume ?? tooltipStyles.defaultValue, volumePrecision)),\r\n        thousandsSeparator\r\n      ),\r\n      '{turnover}': formatThousands(\r\n        formatPrecision(current.turnover ?? tooltipStyles.defaultValue, pricePrecision),\r\n        thousandsSeparator\r\n      ),\r\n      '{change}': prevClose === 0 ? tooltipStyles.defaultValue : `${formatPrecision(changeValue / prevClose * 100)}%`\r\n    }\r\n    const labelValues = (\r\n      isFunction(tooltipStyles.custom)\r\n        ? tooltipStyles.custom?.(data, styles)\r\n        : tooltipStyles.custom\r\n    ) ?? [\r\n      { title: 'time', value: '{time}' },\r\n      { title: 'open', value: '{open}' },\r\n      { title: 'high', value: '{high}' },\r\n      { title: 'low', value: '{low}' },\r\n      { title: 'close', value: '{close}' },\r\n      { title: 'volume', value: '{volume}' }\r\n    ]\r\n    return labelValues.map(({ title, value }) => {\r\n      let t: TooltipDataChild = { text: '', color: '' }\r\n      if (isObject(title)) {\r\n        t = { ...title }\r\n      } else {\r\n        t.text = title\r\n        t.color = textColor\r\n      }\r\n      t.text = i18n(t.text, locale)\r\n      let v: TooltipDataChild = { text: tooltipStyles.defaultValue, color: '' }\r\n      if (isObject(value)) {\r\n        v = { ...value }\r\n      } else {\r\n        v.text = value\r\n        v.color = textColor\r\n      }\r\n      const match = v.text.match(/{(\\S*)}/)\r\n      if (match !== null && match.length > 1) {\r\n        const key = `{${match[1]}}`\r\n        v.text = v.text.replace(key, mapping[key] ?? tooltipStyles.defaultValue)\r\n        if (key === '{change}') {\r\n          v.color = changeValue === 0 ? styles.priceMark.last.noChangeColor : (changeValue > 0 ? styles.priceMark.last.upColor : styles.priceMark.last.downColor)\r\n        }\r\n      }\r\n      return { title: t, value: v }\r\n    })\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport IndicatorWidget from './IndicatorWidget'\r\n\r\nimport CandleBarView from '../view/CandleBarView'\r\nimport CandleAreaView from '../view/CandleAreaView'\r\nimport CandleHighLowPriceView from '../view/CandleHighLowPriceView'\r\nimport CandleLastPriceLineView from '../view/CandleLastPriceLineView'\r\n\r\nimport IndicatorTooltipView from '../view/IndicatorTooltipView'\r\nimport CandleTooltipView from '../view/CandleTooltipView'\r\n\r\nimport { CandleType } from '../common/Styles'\r\n\r\nimport AxisPane from '../pane/DrawPane'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nexport default class CandleWidget extends IndicatorWidget {\r\n  private readonly _candleBarView = new CandleBarView(this)\r\n  private readonly _candleAreaView = new CandleAreaView(this)\r\n  private readonly _candleHighLowPriceView = new CandleHighLowPriceView(this)\r\n  private readonly _candleLastPriceLineView = new CandleLastPriceLineView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: AxisPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.addChild(this._candleBarView)\r\n  }\r\n\r\n  override updateMainContent (ctx: CanvasRenderingContext2D): void {\r\n    const candleStyles = this.getPane().getChart().getStyles().candle\r\n    if (candleStyles.type !== CandleType.Area) {\r\n      this._candleBarView.draw(ctx)\r\n      this._candleHighLowPriceView.draw(ctx)\r\n    } else {\r\n      this._candleAreaView.draw(ctx)\r\n    }\r\n    this._candleLastPriceLineView.draw(ctx)\r\n  }\r\n\r\n  override createTooltipView (): IndicatorTooltipView {\r\n    return new CandleTooltipView(this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport { LineAttrs } from '../extension/figure/line'\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nimport Axis, { AxisTick } from '../component/Axis'\r\n\r\nimport View from './View'\r\n\r\nexport default abstract class AxisView<C extends Axis = Axis> extends View<C> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const axis = pane.getAxisComponent()\r\n    const styles: AxisStyle = this.getAxisStyles(pane.getChart().getStyles())\r\n    if (styles.show) {\r\n      if (styles.axisLine.show) {\r\n        this.createFigure('line', this.createAxisLine(bounding, styles), styles.axisLine)?.draw(ctx)\r\n      }\r\n      const ticks = axis.getTicks()\r\n      if (styles.tickLine.show) {\r\n        const lines = this.createTickLines(ticks, bounding, styles)\r\n        lines.forEach(line => {\r\n          this.createFigure('line', line, styles.tickLine)?.draw(ctx)\r\n        })\r\n      }\r\n      if (styles.tickText.show) {\r\n        const texts = this.createTickTexts(ticks, bounding, styles)\r\n        texts.forEach(text => {\r\n          this.createFigure('text', text, styles.tickText)?.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  protected abstract getAxisStyles (styles: Styles): AxisStyle\r\n\r\n  protected abstract createAxisLine (bounding: Bounding, styles: AxisStyle): LineAttrs\r\n  protected abstract createTickLines (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): LineAttrs[]\r\n  protected abstract createTickTexts (tick: AxisTick[], bounding: Bounding, styles: AxisStyle): TextAttrs[]\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport { LineAttrs } from '../extension/figure/line'\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nimport { AxisTick } from '../component/Axis'\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport AxisView from './AxisView'\r\n\r\nexport default class YAxisView extends AxisView<YAxis> {\r\n  override getAxisStyles (styles: Styles): AxisStyle {\r\n    return styles.yAxis\r\n  }\r\n\r\n  override createAxisLine (bounding: Bounding, styles: AxisStyle): LineAttrs {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const size = styles.axisLine.size\r\n    let x: number\r\n    if (yAxis.isFromZero()) {\r\n      x = size / 2\r\n    } else {\r\n      x = bounding.width - size\r\n    }\r\n    return {\r\n      coordinates: [\r\n        { x, y: 0 },\r\n        { x, y: bounding.height }\r\n      ]\r\n    }\r\n  }\r\n\r\n  override createTickLines (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): LineAttrs[] {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const axisLineStyles = styles.axisLine\r\n    const tickLineStyles = styles.tickLine\r\n\r\n    let startX = 0\r\n    let endX = 0\r\n    if (yAxis.isFromZero()) {\r\n      startX = 0\r\n      if (axisLineStyles.show) {\r\n        startX += axisLineStyles.size\r\n      }\r\n      endX = startX + tickLineStyles.length\r\n    } else {\r\n      startX = bounding.width\r\n      if (axisLineStyles.show) {\r\n        startX -= axisLineStyles.size\r\n      }\r\n      endX = startX - tickLineStyles.length\r\n    }\r\n    return ticks.map(tick => ({\r\n      coordinates: [\r\n        { x: startX, y: tick.coord },\r\n        { x: endX, y: tick.coord }\r\n      ]\r\n    }))\r\n  }\r\n\r\n  override createTickTexts (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): TextAttrs[] {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const axisLineStyles = styles.axisLine\r\n    const tickLineStyles = styles.tickLine\r\n    const tickTextStyles = styles.tickText\r\n\r\n    let x = 0\r\n    if (yAxis.isFromZero()) {\r\n      x = tickTextStyles.marginStart\r\n      if (axisLineStyles.show) {\r\n        x += axisLineStyles.size\r\n      }\r\n      if (tickLineStyles.show) {\r\n        x += tickLineStyles.length\r\n      }\r\n    } else {\r\n      x = bounding.width - tickTextStyles.marginEnd\r\n      if (axisLineStyles.show) {\r\n        x -= axisLineStyles.size\r\n      }\r\n      if (tickLineStyles.show) {\r\n        x -= tickLineStyles.length\r\n      }\r\n    }\r\n    const textAlign = this.getWidget().getPane().getAxisComponent().isFromZero() ? 'left' : 'right'\r\n    return ticks.map(tick => ({\r\n      x,\r\n      y: tick.coord,\r\n      text: tick.text,\r\n      align: textAlign,\r\n      baseline: 'middle'\r\n    }))\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { YAxisType } from '../common/Styles'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport View from './View'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nexport default class CandleLastPriceLabelView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const lastPriceMarkStyles = priceMarkStyles.last\r\n    const lastPriceMarkTextStyles = lastPriceMarkStyles.text\r\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkTextStyles.show) {\r\n      const precision = chartStore.getPrecision()\r\n      const yAxis = pane.getAxisComponent() as YAxis\r\n      const dataList = chartStore.getDataList()\r\n      const visibleDataList = chartStore.getVisibleDataList()\r\n      const data = dataList[dataList.length - 1]\r\n      if (isValid(data)) {\r\n        const { close, open } = data\r\n        const priceY = yAxis.convertToNicePixel(close)\r\n        let backgroundColor: string\r\n        if (close > open) {\r\n          backgroundColor = lastPriceMarkStyles.upColor\r\n        } else if (close < open) {\r\n          backgroundColor = lastPriceMarkStyles.downColor\r\n        } else {\r\n          backgroundColor = lastPriceMarkStyles.noChangeColor\r\n        }\r\n        let text: string\r\n        if (yAxis.getType() === YAxisType.Percentage) {\r\n          const fromData = visibleDataList[0].data\r\n          const fromClose = fromData.close\r\n          text = `${((close - fromClose) / fromClose * 100).toFixed(2)}%`\r\n        } else {\r\n          text = formatPrecision(close, precision.price)\r\n        }\r\n        text = formatThousands(text, chartStore.getThousandsSeparator())\r\n        let x: number\r\n        let textAlgin: CanvasTextAlign\r\n        if (yAxis.isFromZero()) {\r\n          x = 0\r\n          textAlgin = 'left'\r\n        } else {\r\n          x = bounding.width\r\n          textAlgin = 'right'\r\n        }\r\n        this.createFigure(\r\n          'text',\r\n          {\r\n            x,\r\n            y: priceY,\r\n            text,\r\n            align: textAlgin,\r\n            baseline: 'middle'\r\n          },\r\n          {\r\n            ...lastPriceMarkTextStyles,\r\n            backgroundColor\r\n          }\r\n        )?.draw(ctx)\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport { eachFigures, IndicatorFigure, IndicatorFigureStyle } from '../component/Indicator'\r\n\r\nimport View from './View'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nexport default class IndicatorLastValueView extends View<YAxis> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const customApi = chartStore.getCustomApi()\r\n    const defaultStyles = chartStore.getStyles().indicator\r\n    const lastValueMarkStyles = defaultStyles.lastValueMark\r\n    const lastValueMarkTextStyles = lastValueMarkStyles.text\r\n    if (lastValueMarkStyles.show) {\r\n      const yAxis = pane.getAxisComponent()\r\n      const dataList = chartStore.getDataList()\r\n      const dataIndex = dataList.length - 1\r\n      const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      indicators.forEach(indicator => {\r\n        const result = indicator.result\r\n        const indicatorData = result[dataIndex]\r\n        if (isValid(indicatorData) && indicator.visible) {\r\n          const precision = indicator.precision\r\n          eachFigures(dataList, indicator, dataIndex, defaultStyles, (figure: IndicatorFigure, figureStyles: Required<IndicatorFigureStyle>) => {\r\n            const value = indicatorData[figure.key]\r\n            if (isValid<number>(value)) {\r\n              const y = yAxis.convertToNicePixel(value)\r\n              let text = formatPrecision(value, precision)\r\n              if (indicator.shouldFormatBigNumber) {\r\n                text = customApi.formatBigNumber(text)\r\n              }\r\n              text = formatThousands(text, thousandsSeparator)\r\n              let x: number\r\n              let textAlign: CanvasTextAlign\r\n              if (yAxis.isFromZero()) {\r\n                x = 0\r\n                textAlign = 'left'\r\n              } else {\r\n                x = bounding.width\r\n                textAlign = 'right'\r\n              }\r\n\r\n              this.createFigure(\r\n                'text',\r\n                {\r\n                  x,\r\n                  y,\r\n                  text,\r\n                  align: textAlign,\r\n                  baseline: 'middle'\r\n                },\r\n                {\r\n                  ...lastValueMarkTextStyles,\r\n                  backgroundColor: figureStyles.color\r\n                }\r\n              )?.draw(ctx)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Coordinate from '../common/Coordinate'\r\nimport Bounding from '../common/Bounding'\r\nimport BarSpace from '../common/BarSpace'\r\nimport Precision from '../common/Precision'\r\nimport { OverlayStyle } from '../common/Styles'\r\nimport { CustomApi } from '../Options'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { isNumber } from '../common/utils/typeChecks'\r\n\r\nimport Axis from '../component/Axis'\r\nimport XAxis from '../component/XAxis'\r\nimport YAxis from '../component/YAxis'\r\nimport Overlay, { OverlayFigure } from '../component/Overlay'\r\n\r\nimport { EventOverlayInfo } from '../store/OverlayStore'\r\n\r\nimport OverlayView from './OverlayView'\r\n\r\nexport default class OverlayYAxisView<C extends Axis = YAxis> extends OverlayView<C> {\r\n  override coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return false\r\n  }\r\n\r\n  override drawDefaultFigures (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    defaultStyles: OverlayStyle,\r\n    xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>,\r\n    _hoverInstanceInfo: EventOverlayInfo,\r\n    clickInstanceInfo: EventOverlayInfo\r\n  ): void {\r\n    this.drawFigures(\r\n      ctx,\r\n      overlay,\r\n      this.getDefaultFigures(overlay, coordinates, bounding, precision, dateTimeFormat, customApi, thousandsSeparator, xAxis, yAxis, clickInstanceInfo),\r\n      defaultStyles\r\n    )\r\n  }\r\n\r\n  protected getDefaultFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    precision: Precision,\r\n    _dateTimeFormat: Intl.DateTimeFormat,\r\n    _customApi: CustomApi,\r\n    thousandsSeparator: string,\r\n    _xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>,\r\n    clickInstanceInfo: EventOverlayInfo\r\n  ): OverlayFigure[] {\r\n    const figures: OverlayFigure[] = []\r\n    if (\r\n      overlay.needDefaultYAxisFigure &&\r\n      overlay.id === clickInstanceInfo.instance?.id &&\r\n      clickInstanceInfo.paneId === this.getWidget().getPane().getId()\r\n    ) {\r\n      let topY = Number.MAX_SAFE_INTEGER\r\n      let bottomY = Number.MIN_SAFE_INTEGER\r\n      const isFromZero = yAxis?.isFromZero() ?? false\r\n      let textAlign: CanvasTextAlign\r\n      let x: number\r\n      if (isFromZero) {\r\n        textAlign = 'left'\r\n        x = 0\r\n      } else {\r\n        textAlign = 'right'\r\n        x = bounding.width\r\n      }\r\n      coordinates.forEach((coordinate, index) => {\r\n        const point = overlay.points[index]\r\n        if (isNumber(point.value)) {\r\n          topY = Math.min(topY, coordinate.y)\r\n          bottomY = Math.max(bottomY, coordinate.y)\r\n          const text = formatThousands(formatPrecision(point.value, precision.price), thousandsSeparator)\r\n          figures.push({ type: 'text', attrs: { x, y: coordinate.y, text, align: textAlign, baseline: 'middle' }, ignoreEvent: true })\r\n        }\r\n      })\r\n      if (coordinates.length > 1) {\r\n        figures.unshift({ type: 'rect', attrs: { x: 0, y: topY, width: bounding.width, height: bottomY - topY }, ignoreEvent: true })\r\n      }\r\n    }\r\n    return figures\r\n  }\r\n\r\n  override getFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    barSpace: BarSpace,\r\n    precision: Precision,\r\n    thousandsSeparator: string,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    defaultStyles: OverlayStyle,\r\n    xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    return overlay.createYAxisFigures?.({ overlay, coordinates, bounding, barSpace, precision, thousandsSeparator, dateTimeFormat, defaultStyles, xAxis, yAxis }) ?? []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport Crosshair from '../common/Crosshair'\r\nimport { CrosshairStyle, CrosshairDirectionStyle, YAxisType, StateTextStyle } from '../common/Styles'\r\nimport { isString } from '../common/utils/typeChecks'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\nimport { createFont } from '../common/utils/canvas'\r\n\r\nimport Axis from '../component/Axis'\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nimport ChartStore from '../store/ChartStore'\r\n\r\nimport View from './View'\r\n\r\nexport default class CrosshairHorizontalLabelView<C extends Axis = YAxis> extends View<C> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getTooltipStore().getCrosshair()\r\n    const styles = chartStore.getStyles().crosshair\r\n    if (isString(crosshair.paneId) && this.compare(crosshair, pane.getId())) {\r\n      if (styles.show) {\r\n        const directionStyles = this.getDirectionStyles(styles)\r\n        const textStyles = directionStyles.text\r\n        if (directionStyles.show && textStyles.show) {\r\n          const axis = pane.getAxisComponent()\r\n          const text = this.getText(crosshair, chartStore, axis)\r\n          ctx.font = createFont(textStyles.size, textStyles.weight, textStyles.family)\r\n          this.createFigure(\r\n            'text',\r\n            this.getTextAttrs(text, ctx.measureText(text).width, crosshair, bounding, axis, textStyles),\r\n            textStyles\r\n          )?.draw(ctx)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  protected compare (crosshair: Crosshair, paneId: string): boolean {\r\n    return crosshair.paneId === paneId\r\n  }\r\n\r\n  protected getDirectionStyles (styles: CrosshairStyle): CrosshairDirectionStyle {\r\n    return styles.horizontal\r\n  }\r\n\r\n  protected getText (crosshair: Crosshair, chartStore: ChartStore, axis: Axis): string {\r\n    const yAxis = axis as unknown as YAxis\r\n    const value = axis.convertFromPixel(crosshair.y as number)\r\n    let text: string\r\n    if (yAxis.getType() === YAxisType.Percentage) {\r\n      const visibleDataList = chartStore.getVisibleDataList()\r\n      const fromData = visibleDataList[0]?.data ?? {}\r\n      text = `${((value - fromData.close) / fromData.close * 100).toFixed(2)}%`\r\n    } else {\r\n      const indicators = chartStore.getIndicatorStore().getInstances(crosshair.paneId as string)\r\n      let precision = 0\r\n      let shouldFormatBigNumber = false\r\n      if (yAxis.isInCandle()) {\r\n        precision = chartStore.getPrecision().price\r\n      } else {\r\n        indicators.forEach(indicator => {\r\n          precision = Math.max(indicator.precision, precision)\r\n          if (!shouldFormatBigNumber) {\r\n            shouldFormatBigNumber = indicator.shouldFormatBigNumber\r\n          }\r\n        })\r\n      }\r\n      text = formatPrecision(value, precision)\r\n      if (shouldFormatBigNumber) {\r\n        text = chartStore.getCustomApi().formatBigNumber(text)\r\n      }\r\n    }\r\n    return formatThousands(text, chartStore.getThousandsSeparator())\r\n  }\r\n\r\n  protected getTextAttrs (text: string, _textWidth: number, crosshair: Crosshair, bounding: Bounding, axis: Axis, _styles: StateTextStyle): TextAttrs {\r\n    const yAxis = axis as unknown as YAxis\r\n    let x: number\r\n    let textAlign: CanvasTextAlign\r\n    if (yAxis.isFromZero()) {\r\n      x = 0\r\n      textAlign = 'left'\r\n    } else {\r\n      x = bounding.width\r\n      textAlign = 'right'\r\n    }\r\n\r\n    return { x, y: crosshair.y as number, text, align: textAlign, baseline: 'middle' }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport YAxisView from '../view/YAxisView'\r\nimport CandleLastPriceLabelView from '../view/CandleLastPriceLabelView'\r\nimport IndicatorLastValueView from '../view/IndicatorLastValueView'\r\nimport OverlayYAxisView from '../view/OverlayYAxisView'\r\nimport CrosshairHorizontalLabelView from '../view/CrosshairHorizontalLabelView'\r\n\r\nexport default class YAxisWidget extends DrawWidget<DrawPane<YAxis>> {\r\n  private readonly _yAxisView = new YAxisView(this)\r\n  private readonly _candleLastPriceLabelView = new CandleLastPriceLabelView(this)\r\n  private readonly _indicatorLastValueView = new IndicatorLastValueView(this)\r\n  private readonly _overlayYAxisView = new OverlayYAxisView(this)\r\n  private readonly _crosshairHorizontalLabelView = new CrosshairHorizontalLabelView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.getContainer().style.cursor = 'ns-resize'\r\n    this.addChild(this._overlayYAxisView)\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.Y_AXIS\r\n  }\r\n\r\n  override updateMain (ctx: CanvasRenderingContext2D): void {\r\n    this._yAxisView.draw(ctx)\r\n    if (this.getPane().getAxisComponent().isInCandle()) {\r\n      this._candleLastPriceLabelView.draw(ctx)\r\n    }\r\n    this._indicatorLastValueView.draw(ctx)\r\n  }\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    this._overlayYAxisView.draw(ctx)\r\n    this._crosshairHorizontalLabelView.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport { getPrecision, nice, round } from '../common/utils/number'\r\n\r\nexport interface AxisTick {\r\n  coord: number\r\n  value: number | string\r\n  text: string\r\n}\r\n\r\nexport interface AxisExtremum {\r\n  min: number\r\n  max: number\r\n  range: number\r\n  realMin: number\r\n  realMax: number\r\n  realRange: number\r\n}\r\n\r\nexport interface Axis {\r\n  convertToPixel: (value: number) => number\r\n  convertFromPixel: (px: number) => number\r\n}\r\n\r\nexport default abstract class AxisImp {\r\n  private readonly _parent: DrawPane<AxisImp>\r\n\r\n  private _extremum: AxisExtremum = { min: 0, max: 0, range: 0, realMin: 0, realMax: 0, realRange: 0 }\r\n  private _prevExtremum: AxisExtremum = { min: 0, max: 0, range: 0, realMin: 0, realMax: 0, realRange: 0 }\r\n  private _ticks: AxisTick[] = []\r\n\r\n  private _autoCalcTickFlag = true\r\n\r\n  constructor (parent: DrawPane<AxisImp>) {\r\n    this._parent = parent\r\n  }\r\n\r\n  getParent (): DrawPane<AxisImp> { return this._parent }\r\n\r\n  buildTicks (force: boolean): boolean {\r\n    if (this._autoCalcTickFlag) {\r\n      this._extremum = this.calcExtremum()\r\n    }\r\n    if (this._prevExtremum.min !== this._extremum.min || this._prevExtremum.max !== this._extremum.max || force) {\r\n      this._prevExtremum = this._extremum\r\n      this._ticks = this.optimalTicks(this._calcTicks())\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  getTicks (): AxisTick[] {\r\n    return this._ticks\r\n  }\r\n\r\n  getScrollZoomEnabled (): boolean {\r\n    return this.getParent().getOptions().axisOptions.scrollZoomEnabled ?? true\r\n  }\r\n\r\n  setExtremum (extremum: AxisExtremum): void {\r\n    this._autoCalcTickFlag = false\r\n    this._extremum = extremum\r\n  }\r\n\r\n  getExtremum (): AxisExtremum { return this._extremum }\r\n\r\n  setAutoCalcTickFlag (flag: boolean): void {\r\n    this._autoCalcTickFlag = flag\r\n  }\r\n\r\n  getAutoCalcTickFlag (): boolean { return this._autoCalcTickFlag }\r\n\r\n  private _calcTicks (): AxisTick[] {\r\n    const { realMin, realMax, realRange } = this._extremum\r\n    const ticks: AxisTick[] = []\r\n\r\n    if (realRange >= 0) {\r\n      const [interval, precision] = this._calcTickInterval(realRange)\r\n      const first = round(Math.ceil(realMin / interval) * interval, precision)\r\n      const last = round(Math.floor(realMax / interval) * interval, precision)\r\n      let n = 0\r\n      let f = first\r\n\r\n      if (interval !== 0) {\r\n        while (f <= last) {\r\n          const v = f.toFixed(precision)\r\n          ticks[n] = { text: v, coord: 0, value: v }\r\n          ++n\r\n          f += interval\r\n        }\r\n      }\r\n    }\r\n    return ticks\r\n  }\r\n\r\n  private _calcTickInterval (range: number): number[] {\r\n    const interval = nice(range / 8.0)\r\n    const precision = getPrecision(interval)\r\n    return [interval, precision]\r\n  }\r\n\r\n  protected abstract calcExtremum (): AxisExtremum\r\n\r\n  protected abstract optimalTicks (ticks: AxisTick[]): AxisTick[]\r\n\r\n  abstract getAutoSize (): number\r\n\r\n  abstract convertToPixel (value: number): number\r\n  abstract convertFromPixel (px: number): number\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { YAxisType, YAxisPosition, CandleType } from '../common/Styles'\r\nimport { isValid, isNumber } from '../common/utils/typeChecks'\r\nimport { index10, log10 } from '../common/utils/number'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport { formatPrecision, formatThousands } from '../common/utils/format'\r\n\r\nimport AxisImp, { Axis, AxisExtremum, AxisTick } from './Axis'\r\n\r\nimport { IndicatorFigure } from './Indicator'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\ninterface FiguresResult {\r\n  figures: IndicatorFigure[]\r\n  result: any[]\r\n}\r\n\r\nexport interface YAxis extends Axis {\r\n  isFromZero: () => boolean\r\n}\r\n\r\nexport default class YAxisImp extends AxisImp implements YAxis {\r\n  protected calcExtremum (): AxisExtremum {\r\n    const parent = this.getParent()\r\n    const chart = parent.getChart()\r\n    const chartStore = chart.getChartStore()\r\n    let min = Number.MAX_SAFE_INTEGER\r\n    let max = Number.MIN_SAFE_INTEGER\r\n    const figuresResultList: FiguresResult[] = []\r\n    let shouldOhlc = false\r\n    let specifyMin = Number.MAX_SAFE_INTEGER\r\n    let specifyMax = Number.MIN_SAFE_INTEGER\r\n    let indicatorPrecision = Number.MAX_SAFE_INTEGER\r\n    const indicators = chartStore.getIndicatorStore().getInstances(parent.getId())\r\n    indicators.forEach(indicator => {\r\n      if (!shouldOhlc) {\r\n        shouldOhlc = indicator.shouldOhlc ?? false\r\n      }\r\n      indicatorPrecision = Math.min(indicatorPrecision, indicator.precision)\r\n      if (indicator.minValue !== null) {\r\n        specifyMin = Math.min(specifyMin, indicator.minValue)\r\n      }\r\n      if (indicator.maxValue !== null) {\r\n        specifyMax = Math.max(specifyMax, indicator.maxValue)\r\n      }\r\n      figuresResultList.push({\r\n        figures: indicator.figures ?? [],\r\n        result: indicator.result ?? []\r\n      })\r\n    })\r\n\r\n    let precision = 4\r\n    const inCandle = this.isInCandle()\r\n    if (inCandle) {\r\n      const { price: pricePrecision } = chartStore.getPrecision()\r\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\r\n        precision = Math.min(indicatorPrecision, pricePrecision)\r\n      } else {\r\n        precision = pricePrecision\r\n      }\r\n    } else {\r\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\r\n        precision = indicatorPrecision\r\n      }\r\n    }\r\n    const visibleDataList = chartStore.getVisibleDataList()\r\n    const candleStyles = chart.getStyles().candle\r\n    const isArea = candleStyles.type === CandleType.Area\r\n    const areaValueKey = candleStyles.area.value\r\n    const shouldCompareHighLow = (inCandle && !isArea) || (!inCandle && shouldOhlc)\r\n    visibleDataList.forEach(({ dataIndex, data }) => {\r\n      if (shouldCompareHighLow) {\r\n        min = Math.min(min, data.low)\r\n        max = Math.max(max, data.high)\r\n      }\r\n      if (inCandle && isArea) {\r\n        const value = data[areaValueKey]\r\n        min = Math.min(min, value)\r\n        max = Math.max(max, value)\r\n      }\r\n      figuresResultList.forEach(({ figures, result }) => {\r\n        const indicatorData = result[dataIndex] ?? {}\r\n        figures.forEach(figure => {\r\n          const value = indicatorData[figure.key]\r\n          if (isValid<number>(value)) {\r\n            min = Math.min(min, value)\r\n            max = Math.max(max, value)\r\n          }\r\n        })\r\n      })\r\n    })\r\n    if (min !== Number.MAX_SAFE_INTEGER && max !== Number.MIN_SAFE_INTEGER) {\r\n      min = Math.min(specifyMin, min)\r\n      max = Math.max(specifyMax, max)\r\n    } else {\r\n      min = 0\r\n      max = 10\r\n    }\r\n\r\n    const type = this.getType()\r\n    let dif: number\r\n    switch (type) {\r\n      case YAxisType.Percentage: {\r\n        const fromData = visibleDataList[0]?.data\r\n        if (isNumber(fromData?.close)) {\r\n          min = (min - fromData.close) / fromData.close * 100\r\n          max = (max - fromData.close) / fromData.close * 100\r\n        }\r\n        dif = Math.pow(10, -2)\r\n        break\r\n      }\r\n      case YAxisType.Log: {\r\n        min = log10(min)\r\n        max = log10(max)\r\n        dif = 0.05 * index10(-precision)\r\n        break\r\n      }\r\n      default: {\r\n        dif = index10(-precision)\r\n      }\r\n    }\r\n    if (\r\n      min === max ||\r\n      Math.abs(min - max) < dif\r\n    ) {\r\n      const minCheck = specifyMin === min\r\n      const maxCheck = specifyMax === max\r\n      min = minCheck ? min : (maxCheck ? min - 8 * dif : min - 4 * dif)\r\n      max = maxCheck ? max : (minCheck ? max + 8 * dif : max + 4 * dif)\r\n    }\r\n\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const { gap: paneGap } = parent.getOptions()\r\n    let topRate = paneGap?.top ?? 0.2\r\n    if (topRate >= 1) {\r\n      topRate = topRate / height\r\n    }\r\n    let bottomRate = paneGap?.bottom ?? 0.1\r\n    if (bottomRate >= 1) {\r\n      bottomRate = bottomRate / height\r\n    }\r\n    let range = Math.abs(max - min)\r\n    // ‰øùËØÅÊØèÊ¨°ÂõæÂΩ¢ÁªòÂà∂‰∏ä‰∏ãÈÉΩÁïôÈó¥Èöô\r\n    min = min - range * bottomRate\r\n    max = max + range * topRate\r\n    range = Math.abs(max - min)\r\n    let realMin: number\r\n    let realMax: number\r\n    let realRange: number\r\n    if (type === YAxisType.Log) {\r\n      realMin = index10(min)\r\n      realMax = index10(max)\r\n      realRange = Math.abs(realMax - realMin)\r\n    } else {\r\n      realMin = min\r\n      realMax = max\r\n      realRange = range\r\n    }\r\n    return {\r\n      min, max, range, realMin, realMax, realRange\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂÜÖÈÉ®ÂÄºËΩ¨Êç¢ÊàêÂùêÊ†á\r\n   * @param value\r\n   * @return {number}\r\n   * @private\r\n   */\r\n  _innerConvertToPixel (value: number): number {\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const { min, range } = this.getExtremum()\r\n    const rate = (value - min) / range\r\n    return this.isReverse() ? Math.round(rate * height) : Math.round((1 - rate) * height)\r\n  }\r\n\r\n  /**\r\n   * ÊòØÂê¶ÊòØËú°ÁÉõÂõæËΩ¥\r\n   * @return {boolean}\r\n   */\r\n  isInCandle (): boolean {\r\n    return this.getParent().getId() === PaneIdConstants.CANDLE\r\n  }\r\n\r\n  /**\r\n   * yËΩ¥Á±ªÂûã\r\n   * @return {YAxisType}\r\n   */\r\n  getType (): YAxisType {\r\n    if (this.isInCandle()) {\r\n      return this.getParent().getChart().getStyles().yAxis.type\r\n    }\r\n    return YAxisType.Normal\r\n  }\r\n\r\n  getPosition (): string {\r\n    return this.getParent().getChart().getStyles().yAxis.position\r\n  }\r\n\r\n  /**\r\n   * ÊòØÂê¶ÂèçËΩ¨\r\n   * @return {boolean}\r\n   */\r\n  isReverse (): boolean {\r\n    if (this.isInCandle()) {\r\n      return this.getParent().getChart().getStyles().yAxis.reverse\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * ÊòØÂê¶‰ªéyËΩ¥0ÂºÄÂßã\r\n   * @return {boolean}\r\n   */\r\n  isFromZero (): boolean {\r\n    const yAxisStyles = this.getParent().getChart().getStyles().yAxis\r\n    const inside = yAxisStyles.inside\r\n    return (\r\n      (yAxisStyles.position === YAxisPosition.Left && inside) ||\r\n      (yAxisStyles.position === YAxisPosition.Right && !inside)\r\n    )\r\n  }\r\n\r\n  protected optimalTicks (ticks: AxisTick[]): AxisTick[] {\r\n    const pane = this.getParent()\r\n    const height = pane.getYAxisWidget()?.getBounding().height ?? 0\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const customApi = chartStore.getCustomApi()\r\n    const optimalTicks: AxisTick[] = []\r\n    const type = this.getType()\r\n    const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n    const thousandsSeparator = chartStore.getThousandsSeparator()\r\n    let precision = 0\r\n    let shouldFormatBigNumber = false\r\n    if (this.isInCandle()) {\r\n      precision = chartStore.getPrecision().price\r\n    } else {\r\n      indicators.forEach(tech => {\r\n        precision = Math.max(precision, tech.precision)\r\n        if (!shouldFormatBigNumber) {\r\n          shouldFormatBigNumber = tech.shouldFormatBigNumber\r\n        }\r\n      })\r\n    }\r\n    const textHeight = chartStore.getStyles().xAxis.tickText.size\r\n    let validY: number\r\n    ticks.forEach(({ value }) => {\r\n      let v: string\r\n      let y = this._innerConvertToPixel(+value)\r\n      switch (type) {\r\n        case YAxisType.Percentage: {\r\n          v = `${formatPrecision(value, 2)}%`\r\n          break\r\n        }\r\n        case YAxisType.Log: {\r\n          y = this._innerConvertToPixel(log10(+value))\r\n          v = formatPrecision(value, precision)\r\n          break\r\n        }\r\n        default: {\r\n          v = formatPrecision(value, precision)\r\n          if (shouldFormatBigNumber) {\r\n            v = customApi.formatBigNumber(value)\r\n          }\r\n          break\r\n        }\r\n      }\r\n      v = formatThousands(v, thousandsSeparator)\r\n      const validYNumber = isNumber(validY)\r\n      if (\r\n        y > textHeight &&\r\n        y < height - textHeight &&\r\n        ((validYNumber && (Math.abs(validY - y) > textHeight * 2)) || !validYNumber)) {\r\n        optimalTicks.push({ text: v, coord: y, value })\r\n        validY = y\r\n      }\r\n    })\r\n    return optimalTicks\r\n  }\r\n\r\n  override getAutoSize (): number {\r\n    const pane = this.getParent()\r\n    const chart = pane.getChart()\r\n    const styles = chart.getStyles()\r\n    const yAxisStyles = styles.yAxis\r\n    const width = yAxisStyles.size\r\n    if (width !== 'auto') {\r\n      return width\r\n    }\r\n    const chartStore = chart.getChartStore()\r\n    const customApi = chartStore.getCustomApi()\r\n    let yAxisWidth = 0\r\n    if (yAxisStyles.show) {\r\n      if (yAxisStyles.axisLine.show) {\r\n        yAxisWidth += yAxisStyles.axisLine.size\r\n      }\r\n      if (yAxisStyles.tickLine.show) {\r\n        yAxisWidth += yAxisStyles.tickLine.length\r\n      }\r\n      if (yAxisStyles.tickText.show) {\r\n        let textWidth = 0\r\n        this.getTicks().forEach(tick => {\r\n          textWidth = Math.max(textWidth, calcTextWidth(tick.text, yAxisStyles.tickText.size, yAxisStyles.tickText.weight, yAxisStyles.tickText.family))\r\n        })\r\n        yAxisWidth += (yAxisStyles.tickText.marginStart + yAxisStyles.tickText.marginEnd + textWidth)\r\n      }\r\n    }\r\n    const crosshairStyles = styles.crosshair\r\n    let crosshairVerticalTextWidth = 0\r\n    if (\r\n      crosshairStyles.show &&\r\n      crosshairStyles.horizontal.show &&\r\n      crosshairStyles.horizontal.text.show\r\n    ) {\r\n      const indicators = chartStore.getIndicatorStore().getInstances(pane.getId())\r\n      let techPrecision = 0\r\n      let shouldFormatBigNumber = false\r\n      indicators.forEach(tech => {\r\n        techPrecision = Math.max(tech.precision, techPrecision)\r\n        if (!shouldFormatBigNumber) {\r\n          shouldFormatBigNumber = tech.shouldFormatBigNumber\r\n        }\r\n      })\r\n      let precision = 2\r\n      if (this.getType() !== YAxisType.Percentage) {\r\n        if (this.isInCandle()) {\r\n          const { price: pricePrecision } = chartStore.getPrecision()\r\n          const lastValueMarkStyles = styles.indicator.lastValueMark\r\n          if (lastValueMarkStyles.show && lastValueMarkStyles.text.show) {\r\n            precision = Math.max(techPrecision, pricePrecision)\r\n          } else {\r\n            precision = pricePrecision\r\n          }\r\n        } else {\r\n          precision = techPrecision\r\n        }\r\n      }\r\n      let valueText = formatPrecision(this.getExtremum().max, precision)\r\n      if (shouldFormatBigNumber) {\r\n        valueText = customApi.formatBigNumber(valueText)\r\n      }\r\n      crosshairVerticalTextWidth += (\r\n        crosshairStyles.horizontal.text.paddingLeft +\r\n        crosshairStyles.horizontal.text.paddingRight +\r\n        crosshairStyles.horizontal.text.borderSize * 2 +\r\n        calcTextWidth(\r\n          valueText,\r\n          crosshairStyles.horizontal.text.size,\r\n          crosshairStyles.horizontal.text.weight,\r\n          crosshairStyles.horizontal.text.family\r\n        )\r\n      )\r\n    }\r\n    return Math.max(yAxisWidth, crosshairVerticalTextWidth)\r\n  }\r\n\r\n  convertFromPixel (pixel: number): number {\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const { min, range } = this.getExtremum()\r\n    const rate = this.isReverse() ? pixel / height : 1 - pixel / height\r\n    const value = rate * range + min\r\n    switch (this.getType()) {\r\n      case YAxisType.Percentage: {\r\n        const chartStore = this.getParent().getChart().getChartStore()\r\n        const visibleDataList = chartStore.getVisibleDataList()\r\n        const fromData = visibleDataList[0]?.data\r\n        if (isNumber(fromData?.close)) {\r\n          return fromData.close * value / 100 + fromData.close\r\n        }\r\n        return 0\r\n      }\r\n      case YAxisType.Log: {\r\n        return index10(value)\r\n      }\r\n      default: {\r\n        return value\r\n      }\r\n    }\r\n  }\r\n\r\n  convertToRealValue (value: number): number {\r\n    let v = value\r\n    if (this.getType() === YAxisType.Log) {\r\n      v = index10(value)\r\n    }\r\n    return v\r\n  }\r\n\r\n  convertToPixel (value: number): number {\r\n    let v = value\r\n    switch (this.getType()) {\r\n      case YAxisType.Percentage: {\r\n        const chartStore = this.getParent().getChart().getChartStore()\r\n        const visibleDataList = chartStore.getVisibleDataList()\r\n        const fromData = visibleDataList[0]?.data\r\n        if (isNumber(fromData?.close)) {\r\n          v = (value - fromData.close) / fromData.close * 100\r\n        }\r\n        break\r\n      }\r\n      case YAxisType.Log: {\r\n        v = log10(value)\r\n        break\r\n      }\r\n      default: {\r\n        v = value\r\n      }\r\n    }\r\n    return this._innerConvertToPixel(v)\r\n  }\r\n\r\n  convertToNicePixel (value: number): number {\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const pixel = this.convertToPixel(value)\r\n    return Math.round(Math.max(height * 0.05, Math.min(pixel, height * 0.98)))\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport Nullable from '../common/Nullable'\r\nimport Updater, { UpdateLevel } from '../common/Updater'\r\nimport Bounding, { getDefaultBounding } from '../common/Bounding'\r\n\r\nimport Chart from '../Chart'\r\n\r\nimport { createDom } from '../common/utils/dom'\r\nexport default abstract class Pane implements Updater {\r\n  private _rootContainer: HTMLElement\r\n  private _container: HTMLElement\r\n  private readonly _id: string\r\n  private readonly _chart: Chart\r\n\r\n  private readonly _bounding: Bounding = getDefaultBounding()\r\n\r\n  constructor (rootContainer: HTMLElement, afterElement: Nullable<HTMLElement>, chart: Chart, id: string) {\r\n    this._chart = chart\r\n    this._id = id\r\n    this._init(rootContainer, afterElement)\r\n  }\r\n\r\n  private _init (rootContainer: HTMLElement, afterElement: Nullable<HTMLElement>): void {\r\n    this._rootContainer = rootContainer\r\n    this._container = createDom('div', {\r\n      width: '100%',\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n      boxSizing: 'border-box'\r\n    })\r\n    if (afterElement !== null) {\r\n      rootContainer.insertBefore(this._container, afterElement)\r\n    } else {\r\n      rootContainer.appendChild(this._container)\r\n    }\r\n  }\r\n\r\n  getContainer (): HTMLElement {\r\n    return this._container\r\n  }\r\n\r\n  getId (): string {\r\n    return this._id\r\n  }\r\n\r\n  getChart (): Chart {\r\n    return this._chart\r\n  }\r\n\r\n  getBounding (): Bounding {\r\n    return this._bounding\r\n  }\r\n\r\n  update (level?: UpdateLevel): void {\r\n    if (this._bounding.height !== this._container.offsetHeight) {\r\n      this._container.style.height = `${this._bounding.height}px`\r\n    }\r\n    this.updateImp(level ?? UpdateLevel.Drawer, this._container, this._bounding)\r\n  }\r\n\r\n  destroy (): void {\r\n    this._rootContainer.removeChild(this._container)\r\n  }\r\n\r\n  abstract setBounding (...bounding: Array<Partial<Bounding>>): Pane\r\n\r\n  abstract getImage (includeOverlay: boolean): HTMLCanvasElement\r\n\r\n  abstract updateImp (level: UpdateLevel, container: HTMLElement, bounding: Bounding): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DeepRequired from '../common/DeepRequired'\r\nimport Nullable from '../common/Nullable'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport Bounding from '../common/Bounding'\r\n\r\nimport { isValid, merge } from '../common/utils/typeChecks'\r\n\r\nimport Axis from '../component/Axis'\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport YAxisWidget from '../widget/YAxisWidget'\r\n\r\nimport Pane from './Pane'\r\nimport { PaneOptions, PANE_MIN_HEIGHT, PaneIdConstants } from './types'\r\n\r\nimport Chart from '../Chart'\r\n\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\nimport PickPartial from '../common/PickPartial'\r\n\r\nexport default abstract class DrawPane<C extends Axis = Axis> extends Pane {\r\n  private readonly _mainWidget: DrawWidget<DrawPane<C>>\r\n  private readonly _yAxisWidget: Nullable<YAxisWidget> = null\r\n\r\n  private readonly _axis: C = this.createAxisComponent()\r\n\r\n  private readonly _options: PickPartial<DeepRequired<Omit<PaneOptions, 'id' | 'height'>>, 'position'> = { minHeight: PANE_MIN_HEIGHT, dragEnabled: true, gap: { top: 0.2, bottom: 0.1 }, axisOptions: { scrollZoomEnabled: true } }\r\n\r\n  constructor (rootContainer: HTMLElement, afterElement: Nullable<HTMLElement>, chart: Chart, id: string) {\r\n    super(rootContainer, afterElement, chart, id)\r\n    const container = this.getContainer()\r\n    this._mainWidget = this.createMainWidget(container)\r\n    this._yAxisWidget = this.createYAxisWidget(container)\r\n  }\r\n\r\n  setOptions (options: Omit<PaneOptions, 'id' | 'height'>): DrawPane<C> {\r\n    merge(this._options, options)\r\n    let container: HTMLElement\r\n    let cursor: string\r\n    if (this.getId() === PaneIdConstants.X_AXIS) {\r\n      container = this.getMainWidget().getContainer()\r\n      cursor = 'ew-resize'\r\n    } else {\r\n      container = this.getYAxisWidget()?.getContainer() as HTMLElement\r\n      cursor = 'ns-resize'\r\n    }\r\n    if (options.axisOptions?.scrollZoomEnabled ?? true) {\r\n      container.style.cursor = cursor\r\n    } else {\r\n      container.style.cursor = 'default'\r\n    }\r\n    return this\r\n  }\r\n\r\n  getOptions (): PickPartial<DeepRequired<Omit<PaneOptions, 'id' | 'height'>>, 'position'> { return this._options }\r\n\r\n  getAxisComponent (): C {\r\n    return this._axis\r\n  }\r\n\r\n  override setBounding (rootBounding: Partial<Bounding>, mainBounding?: Partial<Bounding>, yAxisBounding?: Partial<Bounding>): DrawPane {\r\n    merge(this.getBounding(), rootBounding)\r\n    const contentBounding: Partial<Bounding> = {}\r\n    if (isValid(rootBounding.height)) {\r\n      contentBounding.height = rootBounding.height\r\n    }\r\n    if (isValid(rootBounding.top)) {\r\n      contentBounding.top = rootBounding.top\r\n    }\r\n    this._mainWidget.setBounding(contentBounding)\r\n    this._yAxisWidget?.setBounding(contentBounding)\r\n    if (isValid(mainBounding)) {\r\n      this._mainWidget.setBounding(mainBounding)\r\n    }\r\n    if (isValid(yAxisBounding)) {\r\n      this._yAxisWidget?.setBounding(yAxisBounding)\r\n    }\r\n    return this\r\n  }\r\n\r\n  getMainWidget (): DrawWidget<DrawPane<C>> { return this._mainWidget }\r\n\r\n  getYAxisWidget (): Nullable<YAxisWidget> { return this._yAxisWidget }\r\n\r\n  override updateImp (level: UpdateLevel): void {\r\n    this._mainWidget.update(level)\r\n    this._yAxisWidget?.update(level)\r\n  }\r\n\r\n  override getImage (includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    const mainBounding = this._mainWidget.getBounding()\r\n    ctx.drawImage(\r\n      this._mainWidget.getImage(includeOverlay),\r\n      mainBounding.left, 0,\r\n      mainBounding.width, mainBounding.height\r\n    )\r\n    if (this._yAxisWidget !== null) {\r\n      const yAxisBounding = this._yAxisWidget.getBounding()\r\n      ctx.drawImage(\r\n        this._yAxisWidget.getImage(includeOverlay),\r\n        yAxisBounding.left, 0,\r\n        yAxisBounding.width, yAxisBounding.height\r\n      )\r\n    }\r\n    return canvas\r\n  }\r\n\r\n  protected abstract createAxisComponent (): C\r\n\r\n  protected createYAxisWidget (_container: HTMLElement): Nullable<YAxisWidget> { return null }\r\n\r\n  protected abstract createMainWidget (container: HTMLElement): DrawWidget<DrawPane<C>>\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport IndicatorWidget from '../widget/IndicatorWidget'\r\nimport YAxisWidget from '../widget/YAxisWidget'\r\n\r\nimport YAxis from '../component/YAxis'\r\n\r\nimport DrawPane from './DrawPane'\r\n\r\nexport default class IndicatorPane extends DrawPane<YAxis> {\r\n  override createAxisComponent (): YAxis {\r\n    return new YAxis(this)\r\n  }\r\n\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<YAxis>> {\r\n    return new IndicatorWidget(container, this)\r\n  }\r\n\r\n  override createYAxisWidget (container: HTMLElement): Nullable<YAxisWidget> {\r\n    return new YAxisWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport CandleWidget from '../widget/CandleWidget'\r\n\r\nimport DrawPane from './DrawPane'\r\nimport IndicatorPane from './IndicatorPane'\r\nimport YAxis from '../component/YAxis'\r\n\r\nexport default class CandlePane extends IndicatorPane {\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<YAxis>> {\r\n    return new CandleWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport { LineAttrs } from '../extension/figure/line'\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nimport { AxisTick } from '../component/Axis'\r\nimport XAxis from '../component/XAxis'\r\n\r\nimport AxisView from './AxisView'\r\n\r\nexport default class XAxisView extends AxisView<XAxis> {\r\n  override getAxisStyles (styles: Styles): AxisStyle {\r\n    return styles.xAxis\r\n  }\r\n\r\n  override createAxisLine (bounding: Bounding, styles: AxisStyle): LineAttrs {\r\n    const correction = styles.axisLine.size / 2\r\n    return {\r\n      coordinates: [\r\n        { x: 0, y: correction },\r\n        { x: bounding.width, y: correction }\r\n      ]\r\n    }\r\n  }\r\n\r\n  override createTickLines (ticks: AxisTick[], _bounding: Bounding, styles: AxisStyle): LineAttrs[] {\r\n    const tickLineStyles = styles.tickLine\r\n    const axisLineSize = styles.axisLine.size\r\n    return ticks.map(tick => ({\r\n      coordinates: [\r\n        { x: tick.coord, y: 0 },\r\n        { x: tick.coord, y: axisLineSize + tickLineStyles.length }\r\n      ]\r\n    }))\r\n  }\r\n\r\n  override createTickTexts (ticks: AxisTick[], _bounding: Bounding, styles: AxisStyle): TextAttrs[] {\r\n    const tickTickStyles = styles.tickText\r\n    const axisLineSize = styles.axisLine.size\r\n    const tickLineLength = styles.tickLine.length\r\n    return ticks.map(tick => ({\r\n      x: tick.coord,\r\n      y: axisLineSize + tickLineLength + tickTickStyles.marginStart,\r\n      text: tick.text,\r\n      align: 'center',\r\n      baseline: 'top'\r\n    }))\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport Coordinate from '../common/Coordinate'\r\nimport Bounding from '../common/Bounding'\r\nimport BarSpace from '../common/BarSpace'\r\nimport Precision from '../common/Precision'\r\nimport { OverlayStyle } from '../common/Styles'\r\nimport { isNumber } from '../common/utils/typeChecks'\r\n\r\nimport { CustomApi, FormatDateType } from '../Options'\r\n\r\nimport XAxis from '../component/XAxis'\r\nimport YAxis from '../component/YAxis'\r\nimport Overlay, { OverlayFigure } from '../component/Overlay'\r\n\r\nimport OverlayStore, { EventOverlayInfo, ProgressOverlayInfo } from '../store/OverlayStore'\r\n\r\nimport OverlayYAxisView from './OverlayYAxisView'\r\n\r\nexport default class OverlayXAxisView extends OverlayYAxisView<XAxis> {\r\n  override coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  override coordinateToPointValueFlag (): boolean {\r\n    return false\r\n  }\r\n\r\n  override getCompleteOverlays (overlayStore: OverlayStore): Overlay[] {\r\n    return overlayStore.getInstances()\r\n  }\r\n\r\n  override getProgressOverlay (info: ProgressOverlayInfo): Overlay {\r\n    return info.instance\r\n  }\r\n\r\n  override getDefaultFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    _precision: Precision,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    customApi: CustomApi,\r\n    _thousandsSeparator: string,\r\n    _xAxis: Nullable<XAxis>,\r\n    _yAxis: Nullable<YAxis>,\r\n    clickInstanceInfo: EventOverlayInfo\r\n  ): OverlayFigure[] {\r\n    const figures: OverlayFigure[] = []\r\n    if (overlay.needDefaultXAxisFigure && overlay.id === clickInstanceInfo.instance?.id) {\r\n      let leftX = Number.MAX_SAFE_INTEGER\r\n      let rightX = Number.MIN_SAFE_INTEGER\r\n      coordinates.forEach((coordinate, index) => {\r\n        leftX = Math.min(leftX, coordinate.x)\r\n        rightX = Math.max(rightX, coordinate.x)\r\n        const point = overlay.points[index]\r\n        if (isNumber(point.timestamp)) {\r\n          const text = customApi.formatDate(dateTimeFormat, point.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair)\r\n          figures.push({ type: 'text', attrs: { x: coordinate.x, y: 0, text, align: 'center' }, ignoreEvent: true })\r\n        }\r\n      })\r\n      if (coordinates.length > 1) {\r\n        figures.unshift({ type: 'rect', attrs: { x: leftX, y: 0, width: rightX - leftX, height: bounding.height }, ignoreEvent: true })\r\n      }\r\n    }\r\n    return figures\r\n  }\r\n\r\n  override getFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[],\r\n    bounding: Bounding,\r\n    barSpace: BarSpace,\r\n    precision: Precision,\r\n    thousandsSeparator: string,\r\n    dateTimeFormat: Intl.DateTimeFormat,\r\n    defaultStyles: OverlayStyle,\r\n    xAxis: Nullable<XAxis>,\r\n    yAxis: Nullable<YAxis>\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    return overlay.createXAxisFigures?.({ overlay, coordinates, bounding, barSpace, precision, thousandsSeparator, dateTimeFormat, defaultStyles, xAxis, yAxis }) ?? []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport Crosshair from '../common/Crosshair'\r\nimport { CrosshairStyle, CrosshairDirectionStyle, StateTextStyle } from '../common/Styles'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport { FormatDateType } from '../Options'\r\n\r\nimport Axis from '../component/Axis'\r\nimport XAxis from '../component/XAxis'\r\n\r\nimport ChartStore from '../store/ChartStore'\r\n\r\nimport CrosshairHorizontalLabelView from './CrosshairHorizontalLabelView'\r\nimport { TextAttrs } from '../extension/figure/text'\r\n\r\nexport default class CrosshairVerticalLabelView extends CrosshairHorizontalLabelView<XAxis> {\r\n  override compare (crosshair: Crosshair): boolean {\r\n    return isValid(crosshair.kLineData) && crosshair.dataIndex === crosshair.realDataIndex\r\n  }\r\n\r\n  override getDirectionStyles (styles: CrosshairStyle): CrosshairDirectionStyle {\r\n    return styles.vertical\r\n  }\r\n\r\n  override getText (crosshair: Crosshair, chartStore: ChartStore): string {\r\n    const timestamp = crosshair.kLineData?.timestamp as number\r\n    return chartStore.getCustomApi().formatDate(chartStore.getTimeScaleStore().getDateTimeFormat(), timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair)\r\n  }\r\n\r\n  override getTextAttrs (text: string, textWidth: number, crosshair: Crosshair, bounding: Bounding, _axis: Axis, styles: StateTextStyle): TextAttrs {\r\n    const x = crosshair.realX as number\r\n    let optimalX: number\r\n    let align: CanvasTextAlign = 'center'\r\n    if (x - textWidth / 2 - styles.paddingLeft < 0) {\r\n      optimalX = 0\r\n      align = 'left'\r\n    } else if (x + textWidth / 2 + styles.paddingRight > bounding.width) {\r\n      optimalX = bounding.width\r\n      align = 'right'\r\n    } else {\r\n      optimalX = x\r\n    }\r\n    return { x: optimalX, y: 0, text, align, baseline: 'top' }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport DrawPane from '../pane/DrawPane'\r\n\r\nimport XAxis from '../component/XAxis'\r\n\r\nimport XAxisView from '../view/XAxisView'\r\nimport OverlayXAxisView from '../view/OverlayXAxisView'\r\nimport CrosshairVerticalLabelView from '../view/CrosshairVerticalLabelView'\r\n\r\nexport default class XAxisWidget extends DrawWidget<DrawPane<XAxis>> {\r\n  private readonly _xAxisView = new XAxisView(this)\r\n  private readonly _overlayXAxisView = new OverlayXAxisView(this)\r\n  private readonly _crosshairVerticalLabelView = new CrosshairVerticalLabelView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<XAxis>) {\r\n    super(rootContainer, pane)\r\n    this.getContainer().style.cursor = 'ew-resize'\r\n    this.addChild(this._overlayXAxisView)\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.X_AXIS\r\n  }\r\n\r\n  override updateMain (ctx: CanvasRenderingContext2D): void {\r\n    this._xAxisView.draw(ctx)\r\n  }\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    this._overlayXAxisView.draw(ctx)\r\n    this._crosshairVerticalLabelView.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport { FormatDate, FormatDateType } from '../Options'\r\n\r\nimport AxisImp, { Axis, AxisExtremum, AxisTick } from './Axis'\r\n\r\nexport type XAxis = Axis\r\n\r\nexport default class XAxisImp extends AxisImp {\r\n  protected calcExtremum (): AxisExtremum {\r\n    const chartStore = this.getParent().getChart().getChartStore()\r\n    const { from, to } = chartStore.getTimeScaleStore().getVisibleRange()\r\n    const min = from\r\n    const max = to - 1\r\n    const range = to - from\r\n    return {\r\n      min, max, range, realMin: min, realMax: max, realRange: range\r\n    }\r\n  }\r\n\r\n  protected optimalTicks (ticks: AxisTick[]): AxisTick[] {\r\n    const chart = this.getParent().getChart()\r\n    const chartStore = chart.getChartStore()\r\n    const formatDate = chartStore.getCustomApi().formatDate\r\n    const optimalTicks: AxisTick[] = []\r\n    const tickLength = ticks.length\r\n    const dataList = chartStore.getDataList()\r\n    if (tickLength > 0) {\r\n      const dateTimeFormat = chartStore.getTimeScaleStore().getDateTimeFormat()\r\n      const tickTextStyles = chart.getStyles().xAxis.tickText\r\n      const defaultLabelWidth = calcTextWidth('00-00 00:00', tickTextStyles.size, tickTextStyles.weight, tickTextStyles.family)\r\n      const pos = parseInt(ticks[0].value as string, 10)\r\n      const x = this.convertToPixel(pos)\r\n      let tickCountDif = 1\r\n      if (tickLength > 1) {\r\n        const nextPos = parseInt(ticks[1].value as string, 10)\r\n        const nextX = this.convertToPixel(nextPos)\r\n        const xDif = Math.abs(nextX - x)\r\n        if (xDif < defaultLabelWidth) {\r\n          tickCountDif = Math.ceil(defaultLabelWidth / xDif)\r\n        }\r\n      }\r\n      for (let i = 0; i < tickLength; i += tickCountDif) {\r\n        const pos = parseInt(ticks[i].value as string, 10)\r\n        const kLineData = dataList[pos]\r\n        const timestamp = kLineData.timestamp\r\n        let text = formatDate(dateTimeFormat, timestamp, 'HH:mm', FormatDateType.XAxis)\r\n        if (i !== 0) {\r\n          const prevPos = parseInt(ticks[i - tickCountDif].value as string, 10)\r\n          const prevKLineData = dataList[prevPos]\r\n          const prevTimestamp = prevKLineData.timestamp\r\n          text = this._optimalTickLabel(formatDate, dateTimeFormat, timestamp, prevTimestamp) ?? text\r\n        }\r\n        const x = this.convertToPixel(pos)\r\n        optimalTicks.push({ text, coord: x, value: timestamp })\r\n      }\r\n      const optimalTickLength = optimalTicks.length\r\n      if (optimalTickLength === 1) {\r\n        optimalTicks[0].text = formatDate(dateTimeFormat, optimalTicks[0].value as number, 'YYYY-MM-DD HH:mm', FormatDateType.XAxis)\r\n      } else {\r\n        const firstTimestamp = optimalTicks[0].value as number\r\n        const secondTimestamp = optimalTicks[1].value as number\r\n        if (isValid(optimalTicks[2])) {\r\n          const thirdText = optimalTicks[2].text\r\n          if (/^[0-9]{2}-[0-9]{2}$/.test(thirdText)) {\r\n            optimalTicks[0].text = formatDate(dateTimeFormat, firstTimestamp, 'MM-DD', FormatDateType.XAxis)\r\n          } else if (/^[0-9]{4}-[0-9]{2}$/.test(thirdText)) {\r\n            optimalTicks[0].text = formatDate(dateTimeFormat, firstTimestamp, 'YYYY-MM', FormatDateType.XAxis)\r\n          } else if (/^[0-9]{4}$/.test(thirdText)) {\r\n            optimalTicks[0].text = formatDate(dateTimeFormat, firstTimestamp, 'YYYY', FormatDateType.XAxis)\r\n          }\r\n        } else {\r\n          optimalTicks[0].text = this._optimalTickLabel(formatDate, dateTimeFormat, firstTimestamp, secondTimestamp) ?? optimalTicks[0].text\r\n        }\r\n      }\r\n    }\r\n    return optimalTicks\r\n  }\r\n\r\n  private _optimalTickLabel (formatDate: FormatDate, dateTimeFormat: Intl.DateTimeFormat, timestamp: number, comparedTimestamp: number): Nullable<string> {\r\n    const year = formatDate(dateTimeFormat, timestamp, 'YYYY', FormatDateType.XAxis)\r\n    const month = formatDate(dateTimeFormat, timestamp, 'YYYY-MM', FormatDateType.XAxis)\r\n    const day = formatDate(dateTimeFormat, timestamp, 'MM-DD', FormatDateType.XAxis)\r\n    if (year !== formatDate(dateTimeFormat, comparedTimestamp, 'YYYY', FormatDateType.XAxis)) {\r\n      return year\r\n    } else if (month !== formatDate(dateTimeFormat, comparedTimestamp, 'YYYY-MM', FormatDateType.XAxis)) {\r\n      return month\r\n    } else if (day !== formatDate(dateTimeFormat, comparedTimestamp, 'MM-DD', FormatDateType.XAxis)) {\r\n      return day\r\n    }\r\n    return null\r\n  }\r\n\r\n  override getAutoSize (): number {\r\n    const styles = this.getParent().getChart().getStyles()\r\n    const xAxisStyles = styles.xAxis\r\n    const height = xAxisStyles.size\r\n    if (height !== 'auto') {\r\n      return height\r\n    }\r\n    const crosshairStyles = styles.crosshair\r\n    let xAxisHeight = 0\r\n    if (xAxisStyles.show) {\r\n      if (xAxisStyles.axisLine.show) {\r\n        xAxisHeight += xAxisStyles.axisLine.size\r\n      }\r\n      if (xAxisStyles.tickLine.show) {\r\n        xAxisHeight += xAxisStyles.tickLine.length\r\n      }\r\n      if (xAxisStyles.tickText.show) {\r\n        xAxisHeight += (xAxisStyles.tickText.marginStart + xAxisStyles.tickText.marginEnd + xAxisStyles.tickText.size)\r\n      }\r\n    }\r\n    let crosshairVerticalTextHeight = 0\r\n    if (\r\n      crosshairStyles.show &&\r\n      crosshairStyles.vertical.show &&\r\n      crosshairStyles.vertical.text.show\r\n    ) {\r\n      crosshairVerticalTextHeight += (\r\n        crosshairStyles.vertical.text.paddingTop +\r\n        crosshairStyles.vertical.text.paddingBottom +\r\n        crosshairStyles.vertical.text.borderSize * 2 +\r\n        crosshairStyles.vertical.text.size\r\n      )\r\n    }\r\n    return Math.max(xAxisHeight, crosshairVerticalTextHeight)\r\n  }\r\n\r\n  convertTimestampFromPixel (pixel: number): Nullable<number> {\r\n    const timeScaleStore = this.getParent().getChart().getChartStore().getTimeScaleStore()\r\n    const dataIndex = timeScaleStore.coordinateToDataIndex(pixel)\r\n    return timeScaleStore.dataIndexToTimestamp(dataIndex)\r\n  }\r\n\r\n  convertTimestampToPixel (timestamp: number): number {\r\n    const timeScaleStore = this.getParent().getChart().getChartStore().getTimeScaleStore()\r\n    const dataIndex = timeScaleStore.timestampToDataIndex(timestamp)\r\n    return timeScaleStore.dataIndexToCoordinate(dataIndex)\r\n  }\r\n\r\n  convertFromPixel (pixel: number): number {\r\n    return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(pixel)\r\n  }\r\n\r\n  convertToPixel (value: number): number {\r\n    return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(value)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport DrawWidget from '../widget/DrawWidget'\r\nimport XAxisWidget from '../widget/XAxisWidget'\r\n\r\nimport XAxis from '../component/XAxis'\r\n\r\nimport DrawPane from './DrawPane'\r\n\r\nexport default class XAxisPane extends DrawPane<XAxis> {\r\n  override createAxisComponent (): XAxis {\r\n    return new XAxis(this)\r\n  }\r\n\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<XAxis>> {\r\n    return new XAxisWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Bounding from '../common/Bounding'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport { MouseTouchEvent } from '../common/SyntheticEvent'\r\nimport { ActionType } from '../common/Action'\r\nimport { createDom } from '../common/utils/dom'\r\nimport { throttle } from '../common/utils/performance'\r\n\r\nimport Widget from './Widget'\r\nimport { WidgetNameConstants, REAL_SEPARATOR_HEIGHT } from './types'\r\n\r\nimport SeparatorPane from '../pane/SeparatorPane'\r\n\r\nimport AxisPane from '../pane/DrawPane'\r\n\r\nexport default class SeparatorWidget extends Widget<SeparatorPane> {\r\n  private _dragFlag = false\r\n  private _dragStartY = 0\r\n\r\n  private _topPaneHeight = 0\r\n  private _bottomPaneHeight = 0\r\n\r\n  constructor (rootContainer: HTMLElement, pane: SeparatorPane) {\r\n    super(rootContainer, pane)\r\n    this.registerEvent('touchStartEvent', this._mouseDownEvent.bind(this))\r\n      .registerEvent('touchMoveEvent', this._pressedMouseMoveEvent.bind(this))\r\n      .registerEvent('touchEndEvent', this._mouseUpEvent.bind(this))\r\n      .registerEvent('mouseDownEvent', this._mouseDownEvent.bind(this))\r\n      .registerEvent('mouseUpEvent', this._mouseUpEvent.bind(this))\r\n      .registerEvent('pressedMouseMoveEvent', this._pressedMouseMoveEvent.bind(this))\r\n      .registerEvent('mouseEnterEvent', this._mouseEnterEvent.bind(this))\r\n      .registerEvent('mouseLeaveEvent', this._mouseLeaveEvent.bind(this))\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.SEPARATOR\r\n  }\r\n\r\n  override checkEventOn (): boolean {\r\n    return true\r\n  }\r\n\r\n  private _mouseDownEvent (event: MouseTouchEvent): boolean {\r\n    this._dragFlag = true\r\n    this._dragStartY = event.pageY\r\n    const pane = this.getPane()\r\n    this._topPaneHeight = pane.getTopPane().getBounding().height\r\n    this._bottomPaneHeight = pane.getBottomPane().getBounding().height\r\n    return true\r\n  }\r\n\r\n  private _mouseUpEvent (): boolean {\r\n    this._dragFlag = false\r\n    return this._mouseLeaveEvent()\r\n  }\r\n\r\n  private readonly _pressedMouseMoveEvent = throttle(this._pressedTouchMouseMoveEvent, 20)\r\n\r\n  private _pressedTouchMouseMoveEvent (event: MouseTouchEvent): boolean {\r\n    const dragDistance = event.pageY - this._dragStartY\r\n    const currentPane = this.getPane()\r\n    const topPane = currentPane.getTopPane()\r\n    const bottomPane = currentPane.getBottomPane()\r\n    const isUpDrag = dragDistance < 0\r\n    if (topPane !== null && bottomPane !== null && bottomPane.getOptions().dragEnabled) {\r\n      let reducedPane: AxisPane\r\n      let increasedPane: AxisPane\r\n      let startDragReducedPaneHeight: number\r\n      let startDragIncreasedPaneHeight: number\r\n      if (isUpDrag) {\r\n        reducedPane = topPane\r\n        increasedPane = bottomPane\r\n        startDragReducedPaneHeight = this._topPaneHeight\r\n        startDragIncreasedPaneHeight = this._bottomPaneHeight\r\n      } else {\r\n        reducedPane = bottomPane\r\n        increasedPane = topPane\r\n        startDragReducedPaneHeight = this._bottomPaneHeight\r\n        startDragIncreasedPaneHeight = this._topPaneHeight\r\n      }\r\n      const reducedPaneMinHeight = reducedPane.getOptions().minHeight\r\n      if (startDragReducedPaneHeight > reducedPaneMinHeight) {\r\n        const reducedPaneHeight = Math.max(startDragReducedPaneHeight - Math.abs(dragDistance), reducedPaneMinHeight)\r\n        const diffHeight = startDragReducedPaneHeight - reducedPaneHeight\r\n        reducedPane.setBounding({ height: reducedPaneHeight })\r\n        increasedPane.setBounding({ height: startDragIncreasedPaneHeight + diffHeight })\r\n        const chart = currentPane.getChart()\r\n        chart.getChartStore().getActionStore().execute(ActionType.OnPaneDrag, { paneId: currentPane.getId })\r\n        chart.adjustPaneViewport(true, true, true, true, true)\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  private _mouseEnterEvent (): boolean {\r\n    const pane = this.getPane()\r\n    const bottomPane = pane.getBottomPane()\r\n    if (bottomPane?.getOptions().dragEnabled ?? false) {\r\n      const chart = pane.getChart()\r\n      const styles = chart.getStyles().separator\r\n      this.getContainer().style.background = styles.activeBackgroundColor\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _mouseLeaveEvent (): boolean {\r\n    if (!this._dragFlag) {\r\n      this.getContainer().style.background = ''\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  override createContainer (): HTMLElement {\r\n    return createDom('div', {\r\n      width: '100%',\r\n      height: `${REAL_SEPARATOR_HEIGHT}px`,\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'absolute',\r\n      top: '-3px',\r\n      zIndex: '20',\r\n      boxSizing: 'border-box',\r\n      cursor: 'ns-resize'\r\n    })\r\n  }\r\n\r\n  override updateImp (container: HTMLElement, _bounding: Bounding, level: UpdateLevel): void {\r\n    if (level === UpdateLevel.All || level === UpdateLevel.Separator) {\r\n      const styles = this.getPane().getChart().getStyles().separator\r\n      container.style.top = `${-Math.floor((REAL_SEPARATOR_HEIGHT - styles.size) / 2)}px`\r\n      container.style.height = `${REAL_SEPARATOR_HEIGHT}px`\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from '../common/Nullable'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport Bounding from '../common/Bounding'\r\nimport { merge } from '../common/utils/typeChecks'\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\n\r\nimport Chart from '../Chart'\r\n\r\nimport DrawPane from './DrawPane'\r\nimport Pane from './Pane'\r\n\r\nimport SeparatorWidget from '../widget/SeparatorWidget'\r\n\r\nexport default class SeparatorPane extends Pane {\r\n  private _topPane: DrawPane\r\n  private _bottomPane: DrawPane\r\n\r\n  private readonly _separatorWidget: SeparatorWidget\r\n\r\n  constructor (rootContainer: HTMLElement, afterElement: Nullable<HTMLElement>, chart: Chart, id: string, topPane: DrawPane, bottomPane: DrawPane) {\r\n    super(rootContainer, afterElement, chart, id)\r\n    this.getContainer().style.overflow = ''\r\n    this._topPane = topPane\r\n    this._bottomPane = bottomPane\r\n    this._separatorWidget = new SeparatorWidget(this.getContainer(), this)\r\n  }\r\n\r\n  override setBounding (rootBounding: Partial<Bounding>): Pane {\r\n    merge(this.getBounding(), rootBounding)\r\n    return this\r\n  }\r\n\r\n  getTopPane (): DrawPane {\r\n    return this._topPane\r\n  }\r\n\r\n  setTopPane (pane: DrawPane): Pane {\r\n    this._topPane = pane\r\n    return this\r\n  }\r\n\r\n  getBottomPane (): DrawPane {\r\n    return this._bottomPane\r\n  }\r\n\r\n  setBottomPane (pane: DrawPane): Pane {\r\n    this._bottomPane = pane\r\n    return this\r\n  }\r\n\r\n  getWidget (): SeparatorWidget { return this._separatorWidget }\r\n\r\n  override getImage (_includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n\r\n    const styles = this.getChart().getStyles().separator\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n    ctx.fillStyle = styles.color\r\n    ctx.fillRect(0, 0, width, height)\r\n    return canvas\r\n  }\r\n\r\n  override updateImp (level: UpdateLevel, container: HTMLElement, bounding: Bounding): void {\r\n    if (level === UpdateLevel.All || level === UpdateLevel.Separator) {\r\n      const styles = this.getChart().getStyles().separator\r\n      container.style.backgroundColor = styles.color\r\n      container.style.height = `${bounding.height}px`\r\n      container.style.marginLeft = `${bounding.left}px`\r\n      container.style.width = `${bounding.width}px`\r\n      this._separatorWidget.update(level)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport function isFF (): boolean {\r\n  if (typeof window === 'undefined') {\r\n    return false\r\n  }\r\n  return (window.navigator.userAgent.toLowerCase().indexOf('firefox') ?? -1) > -1\r\n}\r\n\r\nexport function isIOS (): boolean {\r\n  if (typeof window === 'undefined') {\r\n    return false\r\n  }\r\n  return /iPhone|iPad|iPod/.test(window.navigator.platform)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * This file uses most of the logic of lightweight-charts/mouse-event-handler.ts(https://github.com/tradingview/lightweight-charts) for reference.\r\n * Makes some modifications to add some events.\r\n * The use of the source code of this file is also subject to the terms\r\n * and consitions of the license of \"lightweight-charts\" (Apache License V2, see\r\n * </licenses/LICENSE-lightweight-charts>).\r\n */\r\n\r\nimport Coordinate from './Coordinate'\r\n\r\nimport Nullable from './Nullable'\r\n\r\nimport { isFF, isIOS } from './utils/platform'\r\nimport { isValid } from './utils/typeChecks'\r\n\r\nexport type MouseTouchEventCallback = (event: MouseTouchEvent, other?: number) => boolean\r\n\r\nexport interface EventHandler {\r\n  pinchStartEvent?: MouseTouchEventCallback\r\n  pinchEvent?: MouseTouchEventCallback\r\n  pinchEndEvent?: MouseTouchEventCallback\r\n\r\n  mouseWheelHortEvent?: MouseTouchEventCallback\r\n  mouseWheelVertEvent?: MouseTouchEventCallback\r\n\r\n  mouseClickEvent?: MouseTouchEventCallback\r\n  mouseRightClickEvent?: MouseTouchEventCallback\r\n  tapEvent?: MouseTouchEventCallback\r\n\r\n  mouseDoubleClickEvent?: MouseTouchEventCallback\r\n  doubleTapEvent?: MouseTouchEventCallback\r\n\r\n  mouseDownEvent?: MouseTouchEventCallback\r\n  touchStartEvent?: MouseTouchEventCallback\r\n\r\n  mouseUpEvent?: MouseTouchEventCallback\r\n  touchEndEvent?: MouseTouchEventCallback\r\n\r\n  mouseDownOutsideEvent?: MouseTouchEventCallback\r\n\r\n  mouseEnterEvent?: MouseTouchEventCallback\r\n  mouseLeaveEvent?: MouseTouchEventCallback\r\n\r\n  mouseMoveEvent?: MouseTouchEventCallback\r\n\r\n  pressedMouseMoveEvent?: MouseTouchEventCallback\r\n  touchMoveEvent?: MouseTouchEventCallback\r\n\r\n  longTapEvent?: MouseTouchEventCallback\r\n}\r\n\r\nexport type EventName = keyof EventHandler\r\n\r\nexport interface MouseTouchEvent extends Coordinate {\r\n  pageX: number\r\n  pageY: number\r\n  isTouch?: boolean\r\n  preventDefault?: () => void\r\n}\r\n\r\nexport interface EventOptions {\r\n  treatVertDragAsPageScroll: () => boolean\r\n  treatHorzDragAsPageScroll: () => boolean\r\n}\r\n\r\n// we can use `const name = 500;` but with `const enum` this values will be inlined into code\r\n// so we do not need to have it as variables\r\nconst enum Delay {\r\n  ResetClick = 500,\r\n  LongTap = 500,\r\n  PreventFiresTouchEvents = 500,\r\n}\r\n\r\nconst enum ManhattanDistance {\r\n  CancelClick = 5,\r\n  CancelTap = 5,\r\n  DoubleClick = 5,\r\n  DoubleTap = 30,\r\n}\r\n\r\nconst enum MouseEventButton {\r\n  Left = 0,\r\n  Middle = 1,\r\n  Right = 2,\r\n}\r\n\r\nexport const TOUCH_MIN_RADIUS = 10\r\n\r\ntype TimerId = ReturnType<typeof setTimeout>\r\n\r\ninterface MouseTouchMoveWithDownInfo {\r\n  xOffset: number\r\n  yOffset: number\r\n  manhattanDistance: number\r\n}\r\n\r\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\r\nexport default class SyntheticEvent {\r\n  private readonly _target: HTMLElement\r\n  private readonly _handler: EventHandler\r\n\r\n  private readonly _options: EventOptions\r\n\r\n  private _clickCount: number = 0\r\n  private _clickTimeoutId: Nullable<TimerId> = null\r\n  private _clickCoordinate: Coordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n\r\n  private _tapCount: number = 0\r\n  private _tapTimeoutId: Nullable<TimerId> = null\r\n  private _tapCoordinate: Coordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n\r\n  private _longTapTimeoutId: Nullable<TimerId> = null\r\n  private _longTapActive: boolean = false\r\n\r\n  private _mouseMoveStartCoordinate: Nullable<Coordinate> = null\r\n\r\n  private _touchMoveStartCoordinate: Nullable<Coordinate> = null\r\n  private _touchMoveExceededManhattanDistance: boolean = false\r\n\r\n  private _cancelClick: boolean = false\r\n  private _cancelTap: boolean = false\r\n\r\n  private _unsubscribeOutsideMouseEvents: Nullable<() => void> = null\r\n  private _unsubscribeOutsideTouchEvents: Nullable<() => void> = null\r\n  private _unsubscribeMobileSafariEvents: Nullable<() => void> = null\r\n\r\n  private _unsubscribeMousemove: Nullable<() => void> = null\r\n\r\n  private _unsubscribeMouseWheel: Nullable<() => void> = null\r\n\r\n  private _unsubscribeContextMenu: Nullable<() => void> = null\r\n\r\n  private _unsubscribeRootMouseEvents: Nullable<() => void> = null\r\n  private _unsubscribeRootTouchEvents: Nullable<() => void> = null\r\n\r\n  private _startPinchMiddleCoordinate: Nullable<Coordinate> = null\r\n  private _startPinchDistance: number = 0\r\n  private _pinchPrevented: boolean = false\r\n  private _preventTouchDragProcess: boolean = false\r\n\r\n  private _mousePressed: boolean = false\r\n\r\n  private _lastTouchEventTimeStamp: number = 0\r\n\r\n  // for touchstart/touchmove/touchend events we handle only first touch\r\n  // i.e. we don't support several active touches at the same time (except pinch event)\r\n  private _activeTouchId: Nullable<number> = null\r\n\r\n  // accept all mouse leave events if it's not an iOS device\r\n  // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\r\n  private _acceptMouseLeave: boolean = !isIOS()\r\n\r\n  constructor (\r\n    target: HTMLElement,\r\n    handler: EventHandler,\r\n    options: EventOptions\r\n  ) {\r\n    this._target = target\r\n    this._handler = handler\r\n    this._options = options\r\n\r\n    this._init()\r\n  }\r\n\r\n  destroy (): void {\r\n    if (this._unsubscribeOutsideMouseEvents !== null) {\r\n      this._unsubscribeOutsideMouseEvents()\r\n      this._unsubscribeOutsideMouseEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeOutsideTouchEvents !== null) {\r\n      this._unsubscribeOutsideTouchEvents()\r\n      this._unsubscribeOutsideTouchEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeMousemove !== null) {\r\n      this._unsubscribeMousemove()\r\n      this._unsubscribeMousemove = null\r\n    }\r\n\r\n    if (this._unsubscribeMouseWheel !== null) {\r\n      this._unsubscribeMouseWheel()\r\n      this._unsubscribeMouseWheel = null\r\n    }\r\n\r\n    if (this._unsubscribeContextMenu !== null) {\r\n      this._unsubscribeContextMenu()\r\n      this._unsubscribeContextMenu = null\r\n    }\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeMobileSafariEvents !== null) {\r\n      this._unsubscribeMobileSafariEvents()\r\n      this._unsubscribeMobileSafariEvents = null\r\n    }\r\n\r\n    this._clearLongTapTimeout()\r\n    this._resetClickTimeout()\r\n  }\r\n\r\n  private _mouseEnterHandler (enterEvent: MouseEvent): void {\r\n    this._unsubscribeMousemove?.()\r\n    this._unsubscribeMouseWheel?.()\r\n    this._unsubscribeContextMenu?.()\r\n\r\n    const boundMouseMoveHandler = this._mouseMoveHandler.bind(this)\r\n    this._unsubscribeMousemove = () => {\r\n      this._target.removeEventListener('mousemove', boundMouseMoveHandler)\r\n    }\r\n    this._target.addEventListener('mousemove', boundMouseMoveHandler)\r\n\r\n    const boundMouseWheel = this._mouseWheelHandler.bind(this)\r\n    this._unsubscribeMouseWheel = () => {\r\n      this._target.removeEventListener('wheel', boundMouseWheel)\r\n    }\r\n    this._target.addEventListener('wheel', boundMouseWheel, { passive: false })\r\n\r\n    const boundContextMenu = this._contextMenuHandler.bind(this)\r\n    this._unsubscribeContextMenu = () => {\r\n      this._target.removeEventListener('contextmenu', boundContextMenu)\r\n    }\r\n    this._target.addEventListener('contextmenu', boundContextMenu, { passive: false })\r\n\r\n    if (this._firesTouchEvents(enterEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(enterEvent), this._handler.mouseEnterEvent)\r\n    this._acceptMouseLeave = true\r\n  }\r\n\r\n  private _resetClickTimeout (): void {\r\n    if (this._clickTimeoutId !== null) {\r\n      clearTimeout(this._clickTimeoutId)\r\n    }\r\n\r\n    this._clickCount = 0\r\n    this._clickTimeoutId = null\r\n    this._clickCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n  }\r\n\r\n  private _resetTapTimeout (): void {\r\n    if (this._tapTimeoutId !== null) {\r\n      clearTimeout(this._tapTimeoutId)\r\n    }\r\n\r\n    this._tapCount = 0\r\n    this._tapTimeoutId = null\r\n    this._tapCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n  }\r\n\r\n  private _mouseMoveHandler (moveEvent: MouseEvent): void {\r\n    if (this._mousePressed || this._touchMoveStartCoordinate !== null) {\r\n      return\r\n    }\r\n\r\n    if (this._firesTouchEvents(moveEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(moveEvent), this._handler.mouseMoveEvent)\r\n    this._acceptMouseLeave = true\r\n  }\r\n\r\n  private _mouseWheelHandler (wheelEvent: WheelEvent): void {\r\n    if (Math.abs(wheelEvent.deltaX) > Math.abs(wheelEvent.deltaY)) {\r\n      if (!isValid(this._handler.mouseWheelHortEvent)) {\r\n        return\r\n      }\r\n      this._preventDefault(wheelEvent)\r\n      if (Math.abs(wheelEvent.deltaX) === 0) {\r\n        return\r\n      }\r\n      this._handler.mouseWheelHortEvent(this._makeCompatEvent(wheelEvent), -wheelEvent.deltaX)\r\n    } else {\r\n      if (!isValid(this._handler.mouseWheelVertEvent)) {\r\n        return\r\n      }\r\n      let deltaY = -(wheelEvent.deltaY / 100)\r\n      if (deltaY === 0) {\r\n        return\r\n      }\r\n      this._preventDefault(wheelEvent)\r\n\r\n      switch (wheelEvent.deltaMode) {\r\n        case wheelEvent.DOM_DELTA_PAGE:\r\n          deltaY *= 120\r\n          break\r\n\r\n        case wheelEvent.DOM_DELTA_LINE:\r\n          deltaY *= 32\r\n          break\r\n      }\r\n\r\n      if (deltaY !== 0) {\r\n        const scale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY))\r\n        this._handler.mouseWheelVertEvent(this._makeCompatEvent(wheelEvent), scale)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _contextMenuHandler (mouseEvent: MouseEvent): void {\r\n    this._preventDefault(mouseEvent)\r\n  }\r\n\r\n  private _touchMoveHandler (moveEvent: TouchEvent): void {\r\n    const touch = this._touchWithId(moveEvent.changedTouches, this._activeTouchId)\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(moveEvent)\r\n\r\n    if (this._startPinchMiddleCoordinate !== null) {\r\n      return\r\n    }\r\n\r\n    if (this._preventTouchDragProcess) {\r\n      return\r\n    }\r\n\r\n    // prevent pinch if move event comes faster than the second touch\r\n    this._pinchPrevented = true\r\n\r\n    const moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._touchMoveStartCoordinate as Coordinate)\r\n    const { xOffset, yOffset, manhattanDistance } = moveInfo\r\n\r\n    if (!this._touchMoveExceededManhattanDistance && manhattanDistance < ManhattanDistance.CancelTap) {\r\n      return\r\n    }\r\n\r\n    if (!this._touchMoveExceededManhattanDistance) {\r\n      // first time when current position exceeded manhattan distance\r\n\r\n      // vertical drag is more important than horizontal drag\r\n      // because we scroll the page vertically often than horizontally\r\n      const correctedXOffset = xOffset * 0.5\r\n\r\n      // a drag can be only if touch page scroll isn't allowed\r\n      const isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertDragAsPageScroll()\r\n      const isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzDragAsPageScroll()\r\n\r\n      // if drag event happened then we should revert preventDefault state to original one\r\n      // and try to process the drag event\r\n      // else we shouldn't prevent default of the event and ignore processing the drag event\r\n      if (!isVertDrag && !isHorzDrag) {\r\n        this._preventTouchDragProcess = true\r\n      }\r\n\r\n      this._touchMoveExceededManhattanDistance = true\r\n      // if manhattan distance is more that 5 - we should cancel tap event\r\n      this._cancelTap = true\r\n      this._clearLongTapTimeout()\r\n      this._resetTapTimeout()\r\n    }\r\n\r\n    if (!this._preventTouchDragProcess) {\r\n      this._processEvent(this._makeCompatEvent(moveEvent, touch), this._handler.touchMoveEvent)\r\n\r\n      // we should prevent default in case of touch only\r\n      // to prevent scroll of the page\r\n      // preventDefault(moveEvent)\r\n    }\r\n  }\r\n\r\n  private _mouseMoveWithDownHandler (moveEvent: MouseEvent): void {\r\n    if (moveEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(moveEvent), this._mouseMoveStartCoordinate as Coordinate)\r\n    const { manhattanDistance } = moveInfo\r\n\r\n    if (manhattanDistance >= ManhattanDistance.CancelClick) {\r\n      // if manhattan distance is more that 5 - we should cancel click event\r\n      this._cancelClick = true\r\n      this._resetClickTimeout()\r\n    }\r\n    if (this._cancelClick) {\r\n      // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\r\n      this._processEvent(this._makeCompatEvent(moveEvent), this._handler.pressedMouseMoveEvent)\r\n    }\r\n  }\r\n\r\n  private _mouseTouchMoveWithDownInfo (currentCoordinate: Coordinate, startCoordinate: Coordinate): MouseTouchMoveWithDownInfo {\r\n    const xOffset = Math.abs(startCoordinate.x - currentCoordinate.x)\r\n    const yOffset = Math.abs(startCoordinate.y - currentCoordinate.y)\r\n\r\n    const manhattanDistance = xOffset + yOffset\r\n\r\n    return { xOffset, yOffset, manhattanDistance }\r\n  }\r\n\r\n  /**\r\n   * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\r\n   * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\r\n   * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\r\n   */\r\n  private readonly _onFirefoxOutsideMouseUp = (mouseUpEvent: MouseEvent): void => {\r\n    this._mouseUpHandler(mouseUpEvent)\r\n  }\r\n\r\n  /**\r\n   * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\r\n   * There are two possible solutions:\r\n   * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\r\n   * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\r\n   * https://developer.apple.com/forums/thread/125073\r\n   */\r\n  private readonly _onMobileSafariDoubleClick = (dblClickEvent: MouseEvent): void => {\r\n    if (this._firesTouchEvents(dblClickEvent)) {\r\n      ++this._tapCount\r\n\r\n      if (this._tapTimeoutId !== null && this._tapCount > 1) {\r\n        const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(dblClickEvent), this._tapCoordinate)\r\n        if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\r\n          this._processEvent(this._makeCompatEvent(dblClickEvent), this._handler.doubleTapEvent)\r\n        }\r\n        this._resetTapTimeout()\r\n      }\r\n    } else {\r\n      ++this._clickCount\r\n\r\n      if (this._clickTimeoutId !== null && this._clickCount > 1) {\r\n        const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(dblClickEvent), this._clickCoordinate)\r\n        if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\r\n          this._processEvent(this._makeCompatEvent(dblClickEvent), this._handler.mouseDoubleClickEvent)\r\n        }\r\n        this._resetClickTimeout()\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line complexity\r\n  private _touchEndHandler (touchEndEvent: TouchEvent): void {\r\n    let touch = this._touchWithId(touchEndEvent.changedTouches, this._activeTouchId)\r\n    if (touch === null && touchEndEvent.touches.length === 0) {\r\n      // something went wrong, somehow we missed the required touchend event\r\n      // probably the browser has not sent this event\r\n      touch = touchEndEvent.changedTouches[0]\r\n    }\r\n\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._activeTouchId = null\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(touchEndEvent)\r\n    this._clearLongTapTimeout()\r\n    this._touchMoveStartCoordinate = null\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    const compatEvent = this._makeCompatEvent(touchEndEvent, touch)\r\n    this._processEvent(compatEvent, this._handler.touchEndEvent)\r\n    ++this._tapCount\r\n\r\n    if (this._tapTimeoutId !== null && this._tapCount > 1) {\r\n      // check that both clicks are near enough\r\n      const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._tapCoordinate)\r\n      if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\r\n        this._processEvent(compatEvent, this._handler.doubleTapEvent)\r\n      }\r\n      this._resetTapTimeout()\r\n    } else {\r\n      if (!this._cancelTap) {\r\n        this._processEvent(compatEvent, this._handler.tapEvent)\r\n\r\n        // do not fire mouse events if tap handler was executed\r\n        // prevent click event on new dom element (who appeared after tap)\r\n        if (isValid(this._handler.tapEvent)) {\r\n          this._preventDefault(touchEndEvent)\r\n        }\r\n      }\r\n    }\r\n\r\n    // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\r\n    // we handle mouseDoubleClickEvent here ourselves\r\n    if (this._tapCount === 0) {\r\n      this._preventDefault(touchEndEvent)\r\n    }\r\n\r\n    if (touchEndEvent.touches.length === 0) {\r\n      if (this._longTapActive) {\r\n        this._longTapActive = false\r\n        // prevent native click event\r\n        this._preventDefault(touchEndEvent)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _mouseUpHandler (mouseUpEvent: MouseEvent): void {\r\n    if (mouseUpEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const compatEvent = this._makeCompatEvent(mouseUpEvent)\r\n\r\n    this._mouseMoveStartCoordinate = null\r\n    this._mousePressed = false\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    if (isFF()) {\r\n      const rootElement = this._target.ownerDocument.documentElement\r\n      rootElement.removeEventListener('mouseleave', this._onFirefoxOutsideMouseUp)\r\n    }\r\n\r\n    if (this._firesTouchEvents(mouseUpEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(compatEvent, this._handler.mouseUpEvent)\r\n    ++this._clickCount\r\n\r\n    if (this._clickTimeoutId !== null && this._clickCount > 1) {\r\n      // check that both clicks are near enough\r\n      const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(mouseUpEvent), this._clickCoordinate)\r\n      if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\r\n        this._processEvent(compatEvent, this._handler.mouseDoubleClickEvent)\r\n      }\r\n      this._resetClickTimeout()\r\n    } else {\r\n      if (!this._cancelClick) {\r\n        this._processEvent(compatEvent, this._handler.mouseClickEvent)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _clearLongTapTimeout (): void {\r\n    if (this._longTapTimeoutId === null) {\r\n      return\r\n    }\r\n\r\n    clearTimeout(this._longTapTimeoutId)\r\n    this._longTapTimeoutId = null\r\n  }\r\n\r\n  private _touchStartHandler (downEvent: TouchEvent): void {\r\n    if (this._activeTouchId !== null) {\r\n      return\r\n    }\r\n    const touch = downEvent.changedTouches[0]\r\n    this._activeTouchId = touch.identifier\r\n\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(downEvent)\r\n\r\n    const rootElement = this._target.ownerDocument.documentElement\r\n\r\n    this._cancelTap = false\r\n    this._touchMoveExceededManhattanDistance = false\r\n    this._preventTouchDragProcess = false\r\n\r\n    this._touchMoveStartCoordinate = this._getCoordinate(touch)\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    {\r\n      const boundTouchMoveWithDownHandler = this._touchMoveHandler.bind(this)\r\n      const boundTouchEndHandler = this._touchEndHandler.bind(this)\r\n\r\n      this._unsubscribeRootTouchEvents = () => {\r\n        rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler)\r\n        rootElement.removeEventListener('touchend', boundTouchEndHandler)\r\n      }\r\n\r\n      rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler, { passive: false })\r\n      rootElement.addEventListener('touchend', boundTouchEndHandler, { passive: false })\r\n\r\n      this._clearLongTapTimeout()\r\n      this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), Delay.LongTap)\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(downEvent, touch), this._handler.touchStartEvent)\r\n\r\n    if (this._tapTimeoutId === null) {\r\n      this._tapCount = 0\r\n      this._tapTimeoutId = setTimeout(this._resetTapTimeout.bind(this), Delay.ResetClick)\r\n      this._tapCoordinate = this._getCoordinate(touch)\r\n    }\r\n  }\r\n\r\n  private _mouseDownHandler (downEvent: MouseEvent): void {\r\n    if (downEvent.button === MouseEventButton.Right) {\r\n      this._preventDefault(downEvent)\r\n      this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseRightClickEvent)\r\n      return\r\n    }\r\n\r\n    if (downEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const rootElement = this._target.ownerDocument.documentElement\r\n    if (isFF()) {\r\n      rootElement.addEventListener('mouseleave', this._onFirefoxOutsideMouseUp)\r\n    }\r\n\r\n    this._cancelClick = false\r\n\r\n    this._mouseMoveStartCoordinate = this._getCoordinate(downEvent)\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    {\r\n      const boundMouseMoveWithDownHandler = this._mouseMoveWithDownHandler.bind(this)\r\n      const boundMouseUpHandler = this._mouseUpHandler.bind(this)\r\n\r\n      this._unsubscribeRootMouseEvents = () => {\r\n        rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler)\r\n        rootElement.removeEventListener('mouseup', boundMouseUpHandler)\r\n      }\r\n\r\n      rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler)\r\n      rootElement.addEventListener('mouseup', boundMouseUpHandler)\r\n    }\r\n\r\n    this._mousePressed = true\r\n\r\n    if (this._firesTouchEvents(downEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseDownEvent)\r\n\r\n    if (this._clickTimeoutId === null) {\r\n      this._clickCount = 0\r\n      this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), Delay.ResetClick)\r\n      this._clickCoordinate = this._getCoordinate(downEvent)\r\n    }\r\n  }\r\n\r\n  private _init (): void {\r\n    this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this))\r\n\r\n    // Do not show context menu when something went wrong\r\n    this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this))\r\n\r\n    {\r\n      const doc = this._target.ownerDocument\r\n\r\n      const outsideHandler = (event: MouseEvent | TouchEvent): void => {\r\n        if (this._handler.mouseDownOutsideEvent == null) {\r\n          return\r\n        }\r\n\r\n        if (event.composed && this._target.contains(event.composedPath()[0] as Element)) {\r\n          return\r\n        }\r\n\r\n        if ((event.target !== null) && this._target.contains(event.target as Element)) {\r\n          return\r\n        }\r\n\r\n        this._handler.mouseDownOutsideEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n      }\r\n\r\n      this._unsubscribeOutsideTouchEvents = () => {\r\n        doc.removeEventListener('touchstart', outsideHandler)\r\n      }\r\n\r\n      this._unsubscribeOutsideMouseEvents = () => {\r\n        doc.removeEventListener('mousedown', outsideHandler)\r\n      }\r\n\r\n      doc.addEventListener('mousedown', outsideHandler)\r\n      doc.addEventListener('touchstart', outsideHandler, { passive: true })\r\n    }\r\n\r\n    if (isIOS()) {\r\n      this._unsubscribeMobileSafariEvents = () => {\r\n        this._target.removeEventListener('dblclick', this._onMobileSafariDoubleClick)\r\n      }\r\n      this._target.addEventListener('dblclick', this._onMobileSafariDoubleClick)\r\n    }\r\n\r\n    this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this))\r\n\r\n    this._target.addEventListener('touchstart', this._touchStartHandler.bind(this), { passive: true })\r\n\r\n    this._target.addEventListener('mousedown', (e: MouseEvent) => {\r\n      if (e.button === MouseEventButton.Middle) {\r\n        // prevent incorrect scrolling event\r\n        e.preventDefault()\r\n        return false\r\n      }\r\n      return undefined\r\n    })\r\n\r\n    this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this))\r\n    this._initPinch()\r\n\r\n    // Hey mobile Safari, what's up?\r\n    // If mobile Safari doesn't have any touchmove handler with passive=false\r\n    // it treats a touchstart and the following touchmove events as cancelable=false,\r\n    // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\r\n    // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\r\n    this._target.addEventListener('touchmove', () => {}, { passive: false })\r\n  }\r\n\r\n  private _initPinch (): void {\r\n    if (!isValid(this._handler.pinchStartEvent) &&\r\n      !isValid(this._handler.pinchEvent) &&\r\n      !isValid(this._handler.pinchEndEvent)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    this._target.addEventListener(\r\n      'touchstart',\r\n      (event: TouchEvent) => this._checkPinchState(event.touches),\r\n      { passive: true }\r\n    )\r\n\r\n    this._target.addEventListener(\r\n      'touchmove',\r\n      (event: TouchEvent) => {\r\n        if (event.touches.length !== 2 || this._startPinchMiddleCoordinate === null) {\r\n          return\r\n        }\r\n        if (isValid(this._handler.pinchEvent)) {\r\n          const currentDistance = this._getTouchDistance(event.touches[0], event.touches[1])\r\n          const scale = currentDistance / this._startPinchDistance\r\n          this._handler.pinchEvent({ ...this._startPinchMiddleCoordinate, pageX: 0, pageY: 0 }, scale)\r\n          this._preventDefault(event)\r\n        }\r\n      },\r\n      { passive: false }\r\n    )\r\n\r\n    this._target.addEventListener('touchend', (event: TouchEvent) => {\r\n      this._checkPinchState(event.touches)\r\n    })\r\n  }\r\n\r\n  private _checkPinchState (touches: TouchList): void {\r\n    if (touches.length === 1) {\r\n      this._pinchPrevented = false\r\n    }\r\n\r\n    if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\r\n      this._stopPinch()\r\n    } else {\r\n      this._startPinch(touches)\r\n    }\r\n  }\r\n\r\n  private _startPinch (touches: TouchList): void {\r\n    const box = this._target.getBoundingClientRect() ?? { left: 0, top: 0 }\r\n    this._startPinchMiddleCoordinate = {\r\n      x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\r\n      y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2\r\n    }\r\n\r\n    this._startPinchDistance = this._getTouchDistance(touches[0], touches[1])\r\n\r\n    if (isValid(this._handler.pinchStartEvent)) {\r\n      this._handler.pinchStartEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n    }\r\n\r\n    this._clearLongTapTimeout()\r\n  }\r\n\r\n  private _stopPinch (): void {\r\n    if (this._startPinchMiddleCoordinate === null) {\r\n      return\r\n    }\r\n\r\n    this._startPinchMiddleCoordinate = null\r\n\r\n    if (isValid(this._handler.pinchEndEvent)) {\r\n      this._handler.pinchEndEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n    }\r\n  }\r\n\r\n  private _mouseLeaveHandler (event: MouseEvent): void {\r\n    this._unsubscribeMousemove?.()\r\n    this._unsubscribeMouseWheel?.()\r\n    this._unsubscribeContextMenu?.()\r\n\r\n    if (this._firesTouchEvents(event)) {\r\n      return\r\n    }\r\n\r\n    if (!this._acceptMouseLeave) {\r\n      // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\r\n      // just ignore this event if there was no mouse move or mouse enter events\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(event), this._handler.mouseLeaveEvent)\r\n\r\n    // accept all mouse leave events if it's not an iOS device\r\n    this._acceptMouseLeave = !isIOS()\r\n  }\r\n\r\n  private _longTapHandler (event: TouchEvent): void {\r\n    const touch = this._touchWithId(event.touches, this._activeTouchId)\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(event, touch), this._handler.longTapEvent)\r\n    this._cancelTap = true\r\n\r\n    // long tap is active until touchend event with 0 touches occurred\r\n    this._longTapActive = true\r\n  }\r\n\r\n  private _firesTouchEvents (e: MouseEvent): boolean {\r\n    // @ts-expect-error\r\n    if (isValid(e.sourceCapabilities?.firesTouchEvents)) {\r\n      // @ts-expect-error\r\n      return e.sourceCapabilities.firesTouchEvents\r\n    }\r\n\r\n    return this._eventTimeStamp(e) < this._lastTouchEventTimeStamp + Delay.PreventFiresTouchEvents\r\n  }\r\n\r\n  private _processEvent (event: MouseTouchEvent, callback?: MouseTouchEventCallback): void {\r\n    callback?.call(this._handler, event)\r\n  }\r\n\r\n  private _makeCompatEvent (event: MouseEvent | TouchEvent, touch?: Touch): MouseTouchEvent {\r\n    // TouchEvent has no clientX/Y coordinates:\r\n    // We have to use the last Touch instead\r\n    const eventLike = touch ?? (event as MouseEvent)\r\n    const box = this._target.getBoundingClientRect() ?? { left: 0, top: 0 }\r\n\r\n    return {\r\n      x: eventLike.clientX - box.left,\r\n      y: eventLike.clientY - box.top,\r\n\r\n      pageX: eventLike.pageX,\r\n      pageY: eventLike.pageY,\r\n\r\n      isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click',\r\n\r\n      preventDefault: () => {\r\n        if (event.type !== 'touchstart') {\r\n          // touchstart is passive and cannot be prevented\r\n          this._preventDefault(event)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getTouchDistance (p1: Touch, p2: Touch): number {\r\n    const xDiff = p1.clientX - p2.clientX\r\n    const yDiff = p1.clientY - p2.clientY\r\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff)\r\n  }\r\n\r\n  private _preventDefault (event: Event): void {\r\n    if (event.cancelable) {\r\n      event.preventDefault()\r\n    }\r\n  }\r\n\r\n  private _getCoordinate (eventLike: Touch | MouseEvent): Coordinate {\r\n    return {\r\n      x: eventLike.pageX,\r\n      y: eventLike.pageY\r\n    }\r\n  }\r\n\r\n  private _eventTimeStamp (e: TouchEvent | MouseEvent): number {\r\n    // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\r\n    return e.timeStamp ?? performance.now()\r\n  }\r\n\r\n  private _touchWithId (touches: TouchList, id: Nullable<number>): Nullable<Touch> {\r\n    for (let i = 0; i < touches.length; ++i) {\r\n      if (touches[i].identifier === id) {\r\n        return touches[i]\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from './common/Nullable'\r\nimport SyntheticEvent, { EventHandler, MouseTouchEvent, TOUCH_MIN_RADIUS } from './common/SyntheticEvent'\r\nimport Coordinate from './common/Coordinate'\r\nimport { UpdateLevel } from './common/Updater'\r\nimport Crosshair from './common/Crosshair'\r\nimport { requestAnimationFrame, cancelAnimationFrame } from './common/utils/compatible'\r\n\r\nimport { AxisExtremum } from './component/Axis'\r\nimport YAxis from './component/YAxis'\r\nimport XAxis from './component/XAxis'\r\n\r\nimport Chart from './Chart'\r\nimport Pane from './pane/Pane'\r\nimport { PaneIdConstants } from './pane/types'\r\nimport Widget from './widget/Widget'\r\nimport { WidgetNameConstants, REAL_SEPARATOR_HEIGHT } from './widget/types'\r\nimport DrawPane from './pane/DrawPane'\r\n\r\ninterface EventTriggerWidgetInfo {\r\n  pane: Nullable<Pane>\r\n  widget: Nullable<Widget>\r\n}\r\n\r\nexport default class Event implements EventHandler {\r\n  private readonly _container: HTMLElement\r\n  private readonly _chart: Chart\r\n  private readonly _event: SyntheticEvent\r\n\r\n  // ÊÉØÊÄßÊªöÂä®ÂºÄÂßãÊó∂Èó¥\r\n  private _flingStartTime = new Date().getTime()\r\n  // ÊÉØÊÄßÊªöÂä®ÂÆöÊó∂Âô®\r\n  private _flingScrollRequestId: Nullable<number> = null\r\n  // ÂºÄÂßãÊªöÂä®Êó∂ÂùêÊ†áÁÇπ\r\n  private _startScrollCoordinate: Nullable<Coordinate> = null\r\n  // ÂºÄÂßãËß¶Êë∏Êó∂ÂùêÊ†á\r\n  private _touchCoordinate: Nullable<Coordinate> = null\r\n  // ÊòØÂê¶ÊòØÂèñÊ∂à‰∫ÜÂçÅÂ≠óÂÖâÊ†á\r\n  private _touchCancelCrosshair = false\r\n  // ÊòØÂê¶Áº©ÊîæËøá\r\n  private _touchZoomed = false\r\n  // Áî®Êù•ËÆ∞ÂΩïÊçèÂêàÁº©ÊîæÁöÑÂ∞∫ÂØ∏\r\n  private _pinchScale = 1\r\n\r\n  private _mouseDownWidget: Nullable<Widget> = null\r\n\r\n  private _prevYAxisExtremum: Nullable<AxisExtremum> = null\r\n\r\n  private _xAxisStartScaleCoordinate: Nullable<Coordinate> = null\r\n  private _xAxisStartScaleDistance = 0\r\n  private _xAxisScale = 1\r\n\r\n  private _yAxisStartScaleDistance = 0\r\n\r\n  private _mouseMoveTriggerWidgetInfo: EventTriggerWidgetInfo = { pane: null, widget: null }\r\n\r\n  private readonly _boundKeyBoardDownEvent: ((event: KeyboardEvent) => void) = (event: KeyboardEvent) => {\r\n    if (event.shiftKey) {\r\n      switch (event.code) {\r\n        case 'Equal': {\r\n          this._chart.getChartStore().getTimeScaleStore().zoom(0.5)\r\n          break\r\n        }\r\n        case 'Minus': {\r\n          this._chart.getChartStore().getTimeScaleStore().zoom(-0.5)\r\n          break\r\n        }\r\n        case 'ArrowLeft': {\r\n          const timeScaleStore = this._chart.getChartStore().getTimeScaleStore()\r\n          timeScaleStore.startScroll()\r\n          timeScaleStore.scroll(-3 * timeScaleStore.getBarSpace().bar)\r\n          break\r\n        }\r\n        case 'ArrowRight': {\r\n          const timeScaleStore = this._chart.getChartStore().getTimeScaleStore()\r\n          timeScaleStore.startScroll()\r\n          timeScaleStore.scroll(3 * timeScaleStore.getBarSpace().bar)\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor (container: HTMLElement, chart: Chart) {\r\n    this._container = container\r\n    this._chart = chart\r\n    this._event = new SyntheticEvent(container, this, {\r\n      treatVertDragAsPageScroll: () => false,\r\n      treatHorzDragAsPageScroll: () => false\r\n    })\r\n    container.addEventListener('keydown', this._boundKeyBoardDownEvent)\r\n  }\r\n\r\n  pinchStartEvent (): boolean {\r\n    this._touchZoomed = true\r\n    this._pinchScale = 1\r\n    return true\r\n  }\r\n\r\n  pinchEvent (e: MouseTouchEvent, scale: number): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (pane?.getId() !== PaneIdConstants.X_AXIS && widget?.getName() === WidgetNameConstants.MAIN) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const zoomScale = (scale - this._pinchScale) * 5\r\n      this._pinchScale = scale\r\n      this._chart.getChartStore().getTimeScaleStore().zoom(zoomScale, { x: event.x, y: event.y })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseWheelHortEvent (_: MouseTouchEvent, distance: number): boolean {\r\n    const timeScaleStore = this._chart.getChartStore().getTimeScaleStore()\r\n    timeScaleStore.startScroll()\r\n    timeScaleStore.scroll(distance)\r\n    return true\r\n  }\r\n\r\n  mouseWheelVertEvent (e: MouseTouchEvent, scale: number): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    const isTouch = e.isTouch ?? false\r\n    const event = this._makeWidgetEvent(e, widget)\r\n    let zoomCoordinate: Nullable<Coordinate> = null\r\n    const name = widget?.getName()\r\n    if (isTouch) {\r\n      if (name === WidgetNameConstants.MAIN || name === WidgetNameConstants.X_AXIS) {\r\n        zoomCoordinate = { x: event.x, y: event.y }\r\n      } else {\r\n        const bounding = this._chart.getCandlePane().getBounding()\r\n        zoomCoordinate = { x: bounding.width / 2, y: bounding.height / 2 }\r\n      }\r\n    } else {\r\n      if (name === WidgetNameConstants.MAIN) {\r\n        zoomCoordinate = { x: event.x, y: event.y }\r\n      }\r\n    }\r\n    if (zoomCoordinate !== null) {\r\n      this._chart.getChartStore().getTimeScaleStore().zoom(scale, { x: event.x, y: event.y })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseDownEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    this._mouseDownWidget = widget\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.SEPARATOR: {\r\n          return widget.dispatchEvent('mouseDownEvent', event)\r\n        }\r\n        case WidgetNameConstants.MAIN: {\r\n          const extremum = (pane as DrawPane<YAxis>).getAxisComponent().getExtremum() ?? null\r\n          this._prevYAxisExtremum = extremum === null ? extremum : { ...extremum }\r\n          this._startScrollCoordinate = { x: event.x, y: event.y }\r\n          this._chart.getChartStore().getTimeScaleStore().startScroll()\r\n          return widget.dispatchEvent('mouseDownEvent', event)\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseDownEvent', event)\r\n          if (consumed) {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          this._xAxisStartScaleCoordinate = { x: event.x, y: event.y }\r\n          this._xAxisStartScaleDistance = event.pageX\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseDownEvent', event)\r\n          if (consumed) {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          const extremum = (pane as DrawPane<YAxis>).getAxisComponent().getExtremum() ?? null\r\n          this._prevYAxisExtremum = extremum === null ? extremum : { ...extremum }\r\n          this._yAxisStartScaleDistance = event.pageY\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseMoveEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    const event = this._makeWidgetEvent(e, widget)\r\n    if (\r\n      this._mouseMoveTriggerWidgetInfo.pane?.getId() !== pane?.getId() ||\r\n      this._mouseMoveTriggerWidgetInfo.widget?.getName() !== widget?.getName()\r\n    ) {\r\n      widget?.dispatchEvent('mouseEnterEvent', event)\r\n      this._mouseMoveTriggerWidgetInfo.widget?.dispatchEvent('mouseLeaveEvent', event)\r\n      this._mouseMoveTriggerWidgetInfo = { pane, widget }\r\n    }\r\n    if (widget !== null) {\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const consumed = widget.dispatchEvent('mouseMoveEvent', event)\r\n          const chartStore = this._chart.getChartStore()\r\n          let crosshair: Crosshair | undefined = { x: event.x, y: event.y, paneId: pane?.getId() }\r\n          if (consumed && chartStore.getTooltipStore().getActiveIcon() !== null) {\r\n            crosshair = undefined\r\n            if (widget !== null) {\r\n              widget.getContainer().style.cursor = 'pointer'\r\n            }\r\n          }\r\n          this._chart.getChartStore().getTooltipStore().setCrosshair(crosshair)\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.SEPARATOR:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseMoveEvent', event)\r\n          this._chart.getChartStore().getTooltipStore().setCrosshair()\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  pressedMouseMoveEvent (e: MouseTouchEvent): boolean {\r\n    if (this._mouseDownWidget !== null && this._mouseDownWidget.getName() === WidgetNameConstants.SEPARATOR) {\r\n      return this._mouseDownWidget.dispatchEvent('pressedMouseMoveEvent', e)\r\n    }\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (\r\n      widget !== null &&\r\n      this._mouseDownWidget?.getPane().getId() === pane?.getId() &&\r\n      this._mouseDownWidget?.getName() === widget.getName()\r\n    ) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const bounding = widget.getBounding()\r\n          const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n          if (!consumed && this._startScrollCoordinate !== null) {\r\n            const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n            if (this._prevYAxisExtremum !== null && !yAxis.getAutoCalcTickFlag() && yAxis.getScrollZoomEnabled()) {\r\n              const { min, max, range } = this._prevYAxisExtremum\r\n              let distance: number\r\n              if (yAxis?.isReverse() ?? false) {\r\n                distance = this._startScrollCoordinate.y - event.y\r\n              } else {\r\n                distance = event.y - this._startScrollCoordinate.y\r\n              }\r\n              const scale = distance / bounding.height\r\n              const difRange = range * scale\r\n              const newMin = min + difRange\r\n              const newMax = max + difRange\r\n              const newRealMin = yAxis.convertToRealValue(newMin)\r\n              const newRealMax = yAxis.convertToRealValue(newMax)\r\n              yAxis.setExtremum({\r\n                min: newMin,\r\n                max: newMax,\r\n                range: newMax - newMin,\r\n                realMin: newRealMin,\r\n                realMax: newRealMax,\r\n                realRange: newRealMax - newRealMin\r\n              })\r\n            }\r\n            const distance = event.x - this._startScrollCoordinate.x\r\n            this._chart.getChartStore().getTimeScaleStore().scroll(distance)\r\n          }\r\n          this._chart.getChartStore().getTooltipStore().setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n          if (!consumed) {\r\n            const xAxis = (pane as DrawPane<XAxis>).getAxisComponent()\r\n            if (xAxis?.getScrollZoomEnabled() ?? true) {\r\n              const scale = this._xAxisStartScaleDistance / event.pageX\r\n              const zoomScale = (scale - this._xAxisScale) * 10\r\n              this._xAxisScale = scale\r\n              this._chart.getChartStore().getTimeScaleStore().zoom(zoomScale, this._xAxisStartScaleCoordinate ?? undefined)\r\n            }\r\n          } else {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n          if (!consumed) {\r\n            const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n            if (this._prevYAxisExtremum !== null && yAxis.getScrollZoomEnabled()) {\r\n              const { min, max, range } = this._prevYAxisExtremum\r\n              const scale = event.pageY / this._yAxisStartScaleDistance\r\n              const newRange = range * scale\r\n              const difRange = (newRange - range) / 2\r\n              const newMin = min - difRange\r\n              const newMax = max + difRange\r\n              const newRealMin = yAxis.convertToRealValue(newMin)\r\n              const newRealMax = yAxis.convertToRealValue(newMax)\r\n              yAxis.setExtremum({\r\n                min: newMin,\r\n                max: newMax,\r\n                range: newRange,\r\n                realMin: newRealMin,\r\n                realMax: newRealMax,\r\n                realRange: newRealMax - newRealMin\r\n              })\r\n              this._chart.adjustPaneViewport(false, true, true, true)\r\n            }\r\n          } else {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseUpEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    let consumed: boolean = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN:\r\n        case WidgetNameConstants.SEPARATOR:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          consumed = widget.dispatchEvent('mouseUpEvent', event)\r\n          break\r\n        }\r\n      }\r\n      if (consumed) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    this._mouseDownWidget = null\r\n    this._startScrollCoordinate = null\r\n    this._prevYAxisExtremum = null\r\n    this._xAxisStartScaleCoordinate = null\r\n    this._xAxisStartScaleDistance = 0\r\n    this._xAxisScale = 1\r\n    this._yAxisStartScaleDistance = 0\r\n    return consumed\r\n  }\r\n\r\n  mouseClickEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      return widget.dispatchEvent('mouseClickEvent', event)\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseRightClickEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    let consumed: boolean = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          consumed = widget.dispatchEvent('mouseRightClickEvent', event)\r\n          break\r\n        }\r\n      }\r\n      if (consumed) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseDoubleClickEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const event = this._makeWidgetEvent(e, widget)\r\n          return widget.dispatchEvent('mouseDoubleClickEvent', event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n          if (!yAxis.getAutoCalcTickFlag()) {\r\n            yAxis.setAutoCalcTickFlag(true)\r\n            this._chart.adjustPaneViewport(false, true, true, true)\r\n            return true\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseLeaveEvent (): boolean {\r\n    this._chart.getChartStore().getTooltipStore().setCrosshair()\r\n    return true\r\n  }\r\n\r\n  touchStartEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const chartStore = this._chart.getChartStore()\r\n          const tooltipStore = chartStore.getTooltipStore()\r\n          if (widget.dispatchEvent('mouseDownEvent', event)) {\r\n            this._touchCancelCrosshair = true\r\n            this._touchCoordinate = null\r\n            tooltipStore.setCrosshair(undefined, true)\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n            return true\r\n          }\r\n          if (this._flingScrollRequestId !== null) {\r\n            cancelAnimationFrame(this._flingScrollRequestId)\r\n            this._flingScrollRequestId = null\r\n          }\r\n          this._flingStartTime = new Date().getTime()\r\n          this._startScrollCoordinate = { x: event.x, y: event.y }\r\n          chartStore.getTimeScaleStore().startScroll()\r\n          this._touchZoomed = false\r\n          if (this._touchCoordinate !== null) {\r\n            const xDif = event.x - this._touchCoordinate.x\r\n            const yDif = event.y - this._touchCoordinate.y\r\n            const radius = Math.sqrt(xDif * xDif + yDif * yDif)\r\n            if (radius < TOUCH_MIN_RADIUS) {\r\n              this._touchCoordinate = { x: event.x, y: event.y }\r\n              tooltipStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n            } else {\r\n              this._touchCoordinate = null\r\n              this._touchCancelCrosshair = true\r\n              tooltipStore.setCrosshair()\r\n            }\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseDownEvent', event)\r\n          if (consumed) {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  touchMoveEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      const chartStore = this._chart.getChartStore()\r\n      const tooltipStore = chartStore.getTooltipStore()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          if (widget.dispatchEvent('pressedMouseMoveEvent', event)) {\r\n            event.preventDefault?.()\r\n            tooltipStore.setCrosshair(undefined, true)\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n            return true\r\n          }\r\n          if (this._touchCoordinate !== null) {\r\n            event.preventDefault?.()\r\n            tooltipStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n          } else {\r\n            if (\r\n              this._startScrollCoordinate !== null &&\r\n              Math.abs(this._startScrollCoordinate.x - event.x) > this._startScrollCoordinate.y - event.y\r\n            ) {\r\n              const distance = event.x - this._startScrollCoordinate.x\r\n              chartStore.getTimeScaleStore().scroll(distance)\r\n            }\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n          if (consumed) {\r\n            event.preventDefault?.()\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  touchEndEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          widget.dispatchEvent('mouseUpEvent', event)\r\n          if (this._startScrollCoordinate !== null) {\r\n            const time = new Date().getTime() - this._flingStartTime\r\n            const distance = event.x - this._startScrollCoordinate.x\r\n            let v = distance / (time > 0 ? time : 1) * 20\r\n            if (time < 200 && Math.abs(v) > 0) {\r\n              const timeScaleStore = this._chart.getChartStore().getTimeScaleStore()\r\n              const flingScroll: (() => void) = () => {\r\n                this._flingScrollRequestId = requestAnimationFrame(() => {\r\n                  timeScaleStore.startScroll()\r\n                  timeScaleStore.scroll(v)\r\n                  v = v * (1 - 0.025)\r\n                  if (Math.abs(v) < 1) {\r\n                    if (this._flingScrollRequestId !== null) {\r\n                      cancelAnimationFrame(this._flingScrollRequestId)\r\n                      this._flingScrollRequestId = null\r\n                    }\r\n                  } else {\r\n                    flingScroll()\r\n                  }\r\n                })\r\n              }\r\n              flingScroll()\r\n            }\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseUpEvent', event)\r\n          if (consumed) {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  tapEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    let consumed = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const result = widget.dispatchEvent('mouseClickEvent', event)\r\n      if (widget.getName() === WidgetNameConstants.MAIN) {\r\n        const event = this._makeWidgetEvent(e, widget)\r\n        const chartStore = this._chart.getChartStore()\r\n        const tooltipStore = chartStore.getTooltipStore()\r\n        if (result) {\r\n          this._touchCancelCrosshair = true\r\n          this._touchCoordinate = null\r\n          tooltipStore.setCrosshair(undefined, true)\r\n          consumed = true\r\n        } else {\r\n          if (!this._touchCancelCrosshair && !this._touchZoomed) {\r\n            this._touchCoordinate = { x: event.x, y: event.y }\r\n            tooltipStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() }, true)\r\n            consumed = true\r\n          }\r\n          this._touchCancelCrosshair = false\r\n        }\r\n      }\r\n      if (consumed || result) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    return consumed\r\n  }\r\n\r\n  doubleTapEvent (e: MouseTouchEvent): boolean {\r\n    return this.mouseDoubleClickEvent(e)\r\n  }\r\n\r\n  longTapEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null && widget.getName() === WidgetNameConstants.MAIN) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      this._touchCoordinate = { x: event.x, y: event.y }\r\n      this._chart.getChartStore().getTooltipStore().setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _findWidgetByEvent (event: MouseTouchEvent): EventTriggerWidgetInfo {\r\n    const { x, y } = event\r\n    const separatorPanes = this._chart.getAllSeparatorPanes()\r\n    const separatorSize = this._chart.getChartStore().getStyles().separator.size\r\n    for (const [, pane] of separatorPanes) {\r\n      const bounding = pane.getBounding()\r\n      const top = bounding.top - Math.round((REAL_SEPARATOR_HEIGHT - separatorSize) / 2)\r\n      if (\r\n        x >= bounding.left && x <= bounding.left + bounding.width &&\r\n        y >= top && y <= top + REAL_SEPARATOR_HEIGHT\r\n      ) {\r\n        return { pane, widget: pane.getWidget() }\r\n      }\r\n    }\r\n\r\n    const drawPanes = this._chart.getAllDrawPanes()\r\n\r\n    let pane: Nullable<DrawPane> = null\r\n    for (const p of drawPanes) {\r\n      const bounding = p.getBounding()\r\n      if (\r\n        x >= bounding.left && x <= bounding.left + bounding.width &&\r\n        y >= bounding.top && y <= bounding.top + bounding.height\r\n      ) {\r\n        pane = p\r\n        break\r\n      }\r\n    }\r\n    let widget: Nullable<Widget> = null\r\n    if (pane !== null) {\r\n      if (widget === null) {\r\n        const mainWidget = pane.getMainWidget()\r\n        const mainBounding = mainWidget.getBounding()\r\n        if (\r\n          x >= mainBounding.left && x <= mainBounding.left + mainBounding.width &&\r\n          y >= mainBounding.top && y <= mainBounding.top + mainBounding.height\r\n        ) {\r\n          widget = mainWidget\r\n        }\r\n      }\r\n      if (widget === null) {\r\n        const yAxisWidget = pane.getYAxisWidget()\r\n        if (yAxisWidget !== null) {\r\n          const yAxisBounding = yAxisWidget.getBounding()\r\n          if (\r\n            x >= yAxisBounding.left && x <= yAxisBounding.left + yAxisBounding.width &&\r\n            y >= yAxisBounding.top && y <= yAxisBounding.top + yAxisBounding.height\r\n          ) {\r\n            widget = yAxisWidget\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { pane, widget }\r\n  }\r\n\r\n  private _makeWidgetEvent (event: MouseTouchEvent, widget: Nullable<Widget>): MouseTouchEvent {\r\n    const bounding = widget?.getBounding() ?? null\r\n    return {\r\n      ...event,\r\n      x: event.x - (bounding?.left ?? 0),\r\n      y: event.y - (bounding?.top ?? 0)\r\n    }\r\n  }\r\n\r\n  destroy (): void {\r\n    this._container.removeEventListener('keydown', this._boundKeyBoardDownEvent)\r\n    this._event.destroy()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Nullable from './common/Nullable'\r\nimport DeepPartial from './common/DeepPartial'\r\nimport Bounding from './common/Bounding'\r\nimport KLineData from './common/KLineData'\r\nimport Coordinate from './common/Coordinate'\r\nimport Point from './common/Point'\r\nimport { UpdateLevel } from './common/Updater'\r\nimport { Styles, YAxisPosition } from './common/Styles'\r\n\r\nimport Crosshair from './common/Crosshair'\r\nimport { ActionType, ActionCallback } from './common/Action'\r\nimport LoadMoreCallback from './common/LoadMoreCallback'\r\nimport Precision from './common/Precision'\r\nimport VisibleRange from './common/VisibleRange'\r\n\r\nimport { createId } from './common/utils/id'\r\nimport { createDom } from './common/utils/dom'\r\nimport { getPixelRatio } from './common/utils/canvas'\r\nimport { isString, isArray, isValid, merge, isNumber } from './common/utils/typeChecks'\r\nimport { logWarn } from './common/utils/logger'\r\nimport { formatValue } from './common/utils/format'\r\nimport { binarySearchNearest } from './common/utils/number'\r\n\r\nimport ChartStore from './store/ChartStore'\r\n\r\nimport CandlePane from './pane/CandlePane'\r\nimport IndicatorPane from './pane/IndicatorPane'\r\nimport XAxisPane from './pane/XAxisPane'\r\nimport DrawPane from './pane/DrawPane'\r\nimport SeparatorPane from './pane/SeparatorPane'\r\n\r\nimport { PaneOptions, PanePosition, PANE_DEFAULT_HEIGHT, PaneIdConstants } from './pane/types'\r\n\r\nimport Axis from './component/Axis'\r\n\r\nimport { Indicator, IndicatorCreate } from './component/Indicator'\r\nimport { Overlay, OverlayCreate, OverlayRemove } from './component/Overlay'\r\n\r\nimport { getIndicatorClass } from './extension/indicator/index'\r\nimport { getStyles as getExtensionStyles } from './extension/styles/index'\r\n\r\nimport Event from './Event'\r\n\r\nimport { CustomApi, LayoutChildType, Options } from './Options'\r\n\r\nexport enum DomPosition {\r\n  Root = 'root',\r\n  Main = 'main',\r\n  YAxis = 'yAxis'\r\n}\r\n\r\nexport interface ConvertFinder {\r\n  paneId?: string\r\n  absolute?: boolean\r\n}\r\n\r\nexport interface Chart {\r\n  id: string\r\n  getDom: (paneId?: string, position?: DomPosition) => Nullable<HTMLElement>\r\n  getSize: (paneId?: string, position?: DomPosition) => Nullable<Bounding>\r\n  setLocale: (locale: string) => void\r\n  getLocale: () => string\r\n  setStyles: (styles: string | DeepPartial<Styles>) => void\r\n  getStyles: () => Styles\r\n  setCustomApi: (customApi: Partial<CustomApi>) => void\r\n  setPriceVolumePrecision: (pricePrecision: number, volumePrecision: number) => void\r\n  getPriceVolumePrecision: () => Precision\r\n  setTimezone: (timezone: string) => void\r\n  getTimezone: () => string\r\n  setOffsetRightDistance: (distance: number) => void\r\n  getOffsetRightDistance: () => number\r\n  setMaxOffsetLeftDistance: (distance: number) => void\r\n  setMaxOffsetRightDistance: (distance: number) => void\r\n  setLeftMinVisibleBarCount: (barCount: number) => void\r\n  setRightMinVisibleBarCount: (barCount: number) => void\r\n  setBarSpace: (space: number) => void\r\n  getBarSpace: () => number\r\n  getVisibleRange: () => VisibleRange\r\n  clearData: () => void\r\n  getDataList: () => KLineData[]\r\n  applyNewData: (dataList: KLineData[], more?: boolean, callback?: () => void) => void\r\n  applyMoreData: (dataList: KLineData[], more?: boolean, callback?: () => void) => void\r\n  updateData: (data: KLineData, callback?: () => void) => void\r\n  loadMore: (cb: LoadMoreCallback) => void\r\n  createIndicator: (value: string | IndicatorCreate, isStack?: boolean, paneOptions?: PaneOptions, callback?: () => void) => Nullable<string>\r\n  overrideIndicator: (override: IndicatorCreate, paneId?: string, callback?: () => void) => void\r\n  getIndicatorByPaneId: (paneId?: string, name?: string) => Nullable<Indicator> | Nullable<Map<string, Indicator>> | Map<string, Map<string, Indicator>>\r\n  removeIndicator: (paneId: string, name?: string) => void\r\n  createOverlay: (value: string | OverlayCreate | Array<string | OverlayCreate>, paneId?: string) => Nullable<string> | Array<Nullable<string>>\r\n  getOverlayById: (id: string) => Nullable<Overlay>\r\n  overrideOverlay: (override: Partial<OverlayCreate>) => void\r\n  removeOverlay: (remove?: string | OverlayRemove) => void\r\n  setPaneOptions: (options: PaneOptions) => void\r\n  setZoomEnabled: (enabled: boolean) => void\r\n  isZoomEnabled: () => boolean\r\n  setScrollEnabled: (enabled: boolean) => void\r\n  isScrollEnabled: () => boolean\r\n  scrollByDistance: (distance: number, animationDuration?: number) => void\r\n  scrollToRealTime: (animationDuration?: number) => void\r\n  scrollToDataIndex: (dataIndex: number, animationDuration?: number) => void\r\n  scrollToTimestamp: (timestamp: number, animationDuration?: number) => void\r\n  zoomAtCoordinate: (scale: number, coordinate?: Coordinate, animationDuration?: number) => void\r\n  zoomAtDataIndex: (scale: number, dataIndex: number, animationDuration?: number) => void\r\n  zoomAtTimestamp: (scale: number, timestamp: number, animationDuration?: number) => void\r\n  convertToPixel: (points: Partial<Point> | Array<Partial<Point>>, finder: ConvertFinder) => Partial<Coordinate> | Array<Partial<Coordinate>>\r\n  convertFromPixel: (coordinates: Array<Partial<Coordinate>>, finder: ConvertFinder) => Partial<Point> | Array<Partial<Point>>\r\n  executeAction: (type: ActionType, data: any) => void\r\n  subscribeAction: (type: ActionType, callback: ActionCallback) => void\r\n  unsubscribeAction: (type: ActionType, callback?: ActionCallback) => void\r\n  getConvertPictureUrl: (includeOverlay?: boolean, type?: string, backgroundColor?: string) => string\r\n  resize: () => void\r\n}\r\n\r\nexport default class ChartImp implements Chart {\r\n  id: string\r\n  private _container: HTMLElement\r\n  private _chartContainer: HTMLElement\r\n  private readonly _chartEvent: Event\r\n  private readonly _chartStore: ChartStore\r\n  private _drawPanes: DrawPane[] = []\r\n  private _candlePane: CandlePane\r\n  private _xAxisPane: XAxisPane\r\n  private readonly _separatorPanes: Map<DrawPane, SeparatorPane> = new Map()\r\n\r\n  constructor (container: HTMLElement, options?: Options) {\r\n    this._initContainer(container)\r\n    this._chartEvent = new Event(this._chartContainer, this)\r\n    this._chartStore = new ChartStore(this, options)\r\n    this._initPanes(options)\r\n    this.adjustPaneViewport(true, true, true)\r\n  }\r\n\r\n  private _initContainer (container: HTMLElement): void {\r\n    this._container = container\r\n    this._chartContainer = createDom('div', {\r\n      position: 'relative',\r\n      width: '100%',\r\n      outline: 'none',\r\n      borderStyle: 'none',\r\n      cursor: 'crosshair',\r\n      boxSizing: 'border-box',\r\n      userSelect: 'none',\r\n      webkitUserSelect: 'none',\r\n      // @ts-expect-error\r\n      msUserSelect: 'none',\r\n      MozUserSelect: 'none',\r\n      webkitTapHighlightColor: 'transparent'\r\n    })\r\n    this._chartContainer.tabIndex = 1\r\n    container.appendChild(this._chartContainer)\r\n  }\r\n\r\n  private _initPanes (options?: Options): void {\r\n    const layout = options?.layout ?? [{ type: LayoutChildType.Candle }]\r\n    let candlePaneInitialized = false\r\n    let xAxisPaneInitialized = false\r\n\r\n    const createXAxisPane: ((ops?: PaneOptions) => void) = (ops?: PaneOptions) => {\r\n      if (!xAxisPaneInitialized) {\r\n        const pane = this._createPane<XAxisPane>(XAxisPane, PaneIdConstants.X_AXIS, ops ?? {})\r\n        this._xAxisPane = pane\r\n        xAxisPaneInitialized = true\r\n      }\r\n    }\r\n\r\n    layout.forEach(child => {\r\n      switch (child.type) {\r\n        case LayoutChildType.Candle: {\r\n          if (!candlePaneInitialized) {\r\n            const paneOptions = child.options ?? {}\r\n            merge(paneOptions, { id: PaneIdConstants.CANDLE })\r\n            const pane = this._createPane<CandlePane>(CandlePane, PaneIdConstants.CANDLE, paneOptions)\r\n            this._candlePane = pane\r\n            const content = child.content ?? []\r\n            content.forEach(v => {\r\n              this.createIndicator(v, true, paneOptions)\r\n            })\r\n            candlePaneInitialized = true\r\n          }\r\n          break\r\n        }\r\n        case LayoutChildType.Indicator: {\r\n          const content = child.content ?? []\r\n          if (content.length > 0) {\r\n            let paneId: Nullable<string>\r\n            content.forEach(v => {\r\n              if (isValid(paneId)) {\r\n                this.createIndicator(v, true, { id: paneId })\r\n              } else {\r\n                paneId = this.createIndicator(v, true, child.options)\r\n              }\r\n            })\r\n          }\r\n          break\r\n        }\r\n        case LayoutChildType.XAxis: {\r\n          createXAxisPane(child.options)\r\n        }\r\n      }\r\n    })\r\n    createXAxisPane({ position: PanePosition.Bottom })\r\n  }\r\n\r\n  private _createPane<P extends DrawPane> (\r\n    DrawPaneClass: new (rootContainer: HTMLElement, afterElement: Nullable<HTMLElement>, chart: Chart, id: string) => P,\r\n    id: string,\r\n    options?: PaneOptions\r\n  ): P {\r\n    let index\r\n    let pane\r\n    const position = options?.position\r\n    switch (position) {\r\n      case PanePosition.Top: {\r\n        const firstPane = this._drawPanes[0]\r\n        if (isValid(firstPane)) {\r\n          pane = new DrawPaneClass(this._chartContainer, firstPane.getContainer(), this, id)\r\n          index = 0\r\n        }\r\n        break\r\n      }\r\n      case PanePosition.Bottom: { break }\r\n      default: {\r\n        for (let i = this._drawPanes.length - 1; i > -1; i--) {\r\n          const p = this._drawPanes[i]\r\n          const prevP = this._drawPanes[i - 1]\r\n          if (\r\n            p?.getOptions().position === PanePosition.Bottom &&\r\n            prevP?.getOptions().position !== PanePosition.Bottom\r\n          ) {\r\n            pane = new DrawPaneClass(this._chartContainer, p.getContainer(), this, id)\r\n            index = i\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!isValid(pane)) {\r\n      pane = new DrawPaneClass(this._chartContainer, null, this, id)\r\n    }\r\n    pane.setOptions(options ?? {})\r\n    let newIndex: number\r\n    if (isValid(index)) {\r\n      this._drawPanes.splice(index, 0, pane)\r\n      newIndex = index\r\n    } else {\r\n      this._drawPanes.push(pane)\r\n      newIndex = this._drawPanes.length - 1\r\n    }\r\n    if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n      let nextPane = this._drawPanes[newIndex + 1]\r\n      if (isValid(nextPane)) {\r\n        if (nextPane.getId() === PaneIdConstants.X_AXIS) {\r\n          nextPane = this._drawPanes[newIndex + 2]\r\n        }\r\n      }\r\n      if (isValid(nextPane)) {\r\n        let separatorPane = this._separatorPanes.get(nextPane)\r\n        if (isValid(separatorPane)) {\r\n          separatorPane.setTopPane(pane)\r\n        } else {\r\n          separatorPane = new SeparatorPane(this._chartContainer, nextPane.getContainer(), this, '', pane, nextPane)\r\n          this._separatorPanes.set(nextPane, separatorPane)\r\n        }\r\n      }\r\n      let prevPane = this._drawPanes[newIndex - 1]\r\n      if (isValid(prevPane)) {\r\n        if (prevPane.getId() === PaneIdConstants.X_AXIS) {\r\n          prevPane = this._drawPanes[newIndex - 2]\r\n        }\r\n      }\r\n      if (isValid(prevPane)) {\r\n        const separatorPane = new SeparatorPane(this._chartContainer, pane.getContainer(), this, '', prevPane, pane)\r\n        this._separatorPanes.set(pane, separatorPane)\r\n      }\r\n    }\r\n    return pane\r\n  }\r\n\r\n  private _measurePaneHeight (): void {\r\n    const totalHeight = this._container.offsetHeight\r\n    const separatorSize = this._chartStore.getStyles().separator.size\r\n    const xAxisHeight = this._xAxisPane.getAxisComponent().getAutoSize()\r\n    let paneExcludeXAxisHeight = totalHeight - xAxisHeight - this._separatorPanes.size * separatorSize\r\n    if (paneExcludeXAxisHeight < 0) {\r\n      paneExcludeXAxisHeight = 0\r\n    }\r\n    let indicatorPaneTotalHeight = 0\r\n\r\n    this._drawPanes.forEach(pane => {\r\n      if (pane.getId() !== PaneIdConstants.CANDLE && pane.getId() !== PaneIdConstants.X_AXIS) {\r\n        let paneHeight = pane.getBounding().height\r\n        const paneMinHeight = pane.getOptions().minHeight\r\n        if (paneHeight < paneMinHeight) {\r\n          paneHeight = paneMinHeight\r\n        }\r\n        if (indicatorPaneTotalHeight + paneHeight > paneExcludeXAxisHeight) {\r\n          indicatorPaneTotalHeight = paneExcludeXAxisHeight\r\n          paneHeight = Math.max(paneExcludeXAxisHeight - indicatorPaneTotalHeight, 0)\r\n        } else {\r\n          indicatorPaneTotalHeight += paneHeight\r\n        }\r\n        pane.setBounding({ height: paneHeight })\r\n      }\r\n    })\r\n    const candlePaneHeight = paneExcludeXAxisHeight - indicatorPaneTotalHeight\r\n    this._candlePane?.setBounding({ height: candlePaneHeight })\r\n    this._xAxisPane.setBounding({ height: xAxisHeight })\r\n\r\n    let top = 0\r\n    this._drawPanes.forEach(pane => {\r\n      const separatorPane = this._separatorPanes.get(pane)\r\n      if (isValid(separatorPane)) {\r\n        separatorPane.setBounding({ height: separatorSize, top })\r\n        top += separatorSize\r\n      }\r\n      pane.setBounding({ top })\r\n      top += pane.getBounding().height\r\n    })\r\n  }\r\n\r\n  private _measurePaneWidth (): void {\r\n    const styles = this._chartStore.getStyles()\r\n    const yAxisStyles = styles.yAxis\r\n    const isYAxisLeft = yAxisStyles.position === YAxisPosition.Left\r\n    const isOutside = !yAxisStyles.inside\r\n    const totalWidth = this._container.offsetWidth\r\n    let mainWidth = 0\r\n    let yAxisWidth = Number.MIN_SAFE_INTEGER\r\n    let yAxisLeft = 0\r\n    let mainLeft = 0\r\n    this._drawPanes.forEach(pane => {\r\n      if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n        yAxisWidth = Math.max(yAxisWidth, pane.getAxisComponent().getAutoSize())\r\n      }\r\n    })\r\n    if (yAxisWidth > totalWidth) {\r\n      yAxisWidth = totalWidth\r\n    }\r\n    if (isOutside) {\r\n      mainWidth = totalWidth - yAxisWidth\r\n      if (isYAxisLeft) {\r\n        yAxisLeft = 0\r\n        mainLeft = yAxisWidth\r\n      } else {\r\n        yAxisLeft = totalWidth - yAxisWidth\r\n        mainLeft = 0\r\n      }\r\n    } else {\r\n      mainWidth = totalWidth\r\n      mainLeft = 0\r\n      if (isYAxisLeft) {\r\n        yAxisLeft = 0\r\n      } else {\r\n        yAxisLeft = totalWidth - yAxisWidth\r\n      }\r\n    }\r\n\r\n    this._chartStore.getTimeScaleStore().setTotalBarSpace(mainWidth)\r\n\r\n    const paneBounding = { width: totalWidth }\r\n    const mainBounding = { width: mainWidth, left: mainLeft }\r\n    const yAxisBounding = { width: yAxisWidth, left: yAxisLeft }\r\n    const separatorFill = styles.separator.fill\r\n    let separatorBounding\r\n    if (isOutside && !separatorFill) {\r\n      separatorBounding = mainBounding\r\n    } else {\r\n      separatorBounding = paneBounding\r\n    }\r\n    this._drawPanes.forEach((pane) => {\r\n      this._separatorPanes.get(pane)?.setBounding(separatorBounding)\r\n      pane.setBounding(paneBounding, mainBounding, yAxisBounding)\r\n    })\r\n  }\r\n\r\n  private _setPaneOptions (options: PaneOptions, forceShouldAdjust: boolean): void {\r\n    if (isString(options.id)) {\r\n      const pane = this.getDrawPaneById(options.id)\r\n      let shouldMeasureHeight = false\r\n      if (pane !== null) {\r\n        let shouldAdjust = forceShouldAdjust\r\n        if (options.id !== PaneIdConstants.CANDLE && isNumber(options.height) && options.height > 0) {\r\n          const minHeight = Math.max(options.minHeight ?? pane.getOptions().minHeight, 0)\r\n          const height = Math.max(minHeight, options.height)\r\n          pane.setBounding({ height })\r\n          shouldAdjust = true\r\n          shouldMeasureHeight = true\r\n        }\r\n        pane.setOptions(options)\r\n        if (shouldAdjust) {\r\n          this.adjustPaneViewport(shouldMeasureHeight, true, true, true, true)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getDrawPaneById (paneId: string): Nullable<DrawPane<Axis>> {\r\n    if (paneId === PaneIdConstants.CANDLE) {\r\n      return this._candlePane\r\n    }\r\n    if (paneId === PaneIdConstants.X_AXIS) {\r\n      return this._xAxisPane\r\n    }\r\n    const pane = this._drawPanes.find(p => p.getId() === paneId)\r\n    return pane ?? null\r\n  }\r\n\r\n  getContainer (): HTMLElement { return this._container }\r\n\r\n  getChartStore (): ChartStore { return this._chartStore }\r\n\r\n  getCandlePane (): CandlePane { return this._candlePane }\r\n\r\n  getXAxisPane (): XAxisPane { return this._xAxisPane }\r\n\r\n  getAllDrawPanes (): DrawPane[] { return this._drawPanes }\r\n\r\n  getAllSeparatorPanes (): Map<DrawPane, SeparatorPane> { return this._separatorPanes }\r\n\r\n  adjustPaneViewport (\r\n    shouldMeasureHeight: boolean,\r\n    shouldMeasureWidth: boolean,\r\n    shouldUpdate: boolean,\r\n    shouldAdjustYAxis?: boolean,\r\n    shouldForceAdjustYAxis?: boolean\r\n  ): void {\r\n    if (shouldMeasureHeight) {\r\n      this._measurePaneHeight()\r\n    }\r\n    let forceMeasureWidth = shouldMeasureWidth\r\n    const adjustYAxis = shouldAdjustYAxis ?? false\r\n    const forceAdjustYAxis = shouldForceAdjustYAxis ?? false\r\n    if (adjustYAxis || forceAdjustYAxis) {\r\n      this._drawPanes.forEach(pane => {\r\n        const adjust = pane.getAxisComponent().buildTicks(forceAdjustYAxis)\r\n        if (!forceMeasureWidth) {\r\n          forceMeasureWidth = adjust\r\n        }\r\n      })\r\n    }\r\n    if (forceMeasureWidth) {\r\n      this._measurePaneWidth()\r\n    }\r\n    if (shouldUpdate ?? false) {\r\n      this._xAxisPane.getAxisComponent().buildTicks(true)\r\n      this.updatePane(UpdateLevel.All)\r\n    }\r\n  }\r\n\r\n  updatePane (level: UpdateLevel, paneId?: string): void {\r\n    if (isValid(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      pane?.update(level)\r\n    } else {\r\n      this._separatorPanes.forEach(pane => {\r\n        pane.update(level)\r\n      })\r\n      this._drawPanes.forEach(pane => {\r\n        pane.update(level)\r\n      })\r\n    }\r\n  }\r\n\r\n  crosshairChange (crosshair: Crosshair): void {\r\n    const actionStore = this._chartStore.getActionStore()\r\n    if (actionStore.has(ActionType.OnCrosshairChange)) {\r\n      const indicatorData = {}\r\n      this._drawPanes.forEach(pane => {\r\n        const id = pane.getId()\r\n        const paneIndicatorData = {}\r\n        const indicators = this._chartStore.getIndicatorStore().getInstances(id)\r\n        indicators.forEach(indicator => {\r\n          const result = indicator.result\r\n          paneIndicatorData[indicator.name] = result[crosshair.dataIndex ?? result.length - 1]\r\n        })\r\n        indicatorData[id] = paneIndicatorData\r\n      })\r\n      if (isString(crosshair.paneId)) {\r\n        actionStore.execute(ActionType.OnCrosshairChange, {\r\n          ...crosshair,\r\n          indicatorData\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  getDom (paneId?: string, position?: DomPosition): Nullable<HTMLElement> {\r\n    if (isString(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const pos = position ?? DomPosition.Root\r\n        switch (pos) {\r\n          case DomPosition.Root: {\r\n            return pane.getContainer()\r\n          }\r\n          case DomPosition.Main: {\r\n            return pane.getMainWidget().getContainer()\r\n          }\r\n          case DomPosition.YAxis: {\r\n            return pane.getYAxisWidget()?.getContainer() ?? null\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return this._chartContainer\r\n    }\r\n    return null\r\n  }\r\n\r\n  getSize (paneId?: string, position?: DomPosition): Nullable<Bounding> {\r\n    if (isValid(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const pos = position ?? DomPosition.Root\r\n        switch (pos) {\r\n          case DomPosition.Root: {\r\n            return pane.getBounding()\r\n          }\r\n          case DomPosition.Main: {\r\n            return pane.getMainWidget().getBounding()\r\n          }\r\n          case DomPosition.YAxis: {\r\n            return pane.getYAxisWidget()?.getBounding() ?? null\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return {\r\n        width: this._chartContainer.offsetWidth,\r\n        height: this._chartContainer.offsetHeight,\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  setStyles (styles: string | DeepPartial<Styles>): void {\r\n    this._chartStore.setOptions({ styles })\r\n    let realStyles: Nullable<DeepPartial<Styles>>\r\n    if (isString(styles)) {\r\n      realStyles = getExtensionStyles(styles)\r\n    } else {\r\n      realStyles = styles\r\n    }\r\n    if (isValid(realStyles?.yAxis?.type)) {\r\n      this._candlePane?.getAxisComponent().setAutoCalcTickFlag(true)\r\n    }\r\n    this.adjustPaneViewport(true, true, true, true, true)\r\n  }\r\n\r\n  getStyles (): Styles {\r\n    return this._chartStore.getStyles()\r\n  }\r\n\r\n  setLocale (locale: string): void {\r\n    this._chartStore.setOptions({ locale })\r\n    this.adjustPaneViewport(true, true, true, true, true)\r\n  }\r\n\r\n  getLocale (): string {\r\n    return this._chartStore.getLocale()\r\n  }\r\n\r\n  setCustomApi (customApi: Partial<CustomApi>): void {\r\n    this._chartStore.setOptions({ customApi })\r\n    this.adjustPaneViewport(true, true, true, true, true)\r\n  }\r\n\r\n  setPriceVolumePrecision (pricePrecision: number, volumePrecision: number): void {\r\n    this._chartStore.setPrecision({ price: pricePrecision, volume: volumePrecision })\r\n  }\r\n\r\n  getPriceVolumePrecision (): Precision {\r\n    return this._chartStore.getPrecision()\r\n  }\r\n\r\n  setTimezone (timezone: string): void {\r\n    this._chartStore.setOptions({ timezone })\r\n    this._xAxisPane.getAxisComponent().buildTicks(true)\r\n    this._xAxisPane.update(UpdateLevel.Drawer)\r\n  }\r\n\r\n  getTimezone (): string {\r\n    return this._chartStore.getTimeScaleStore().getTimezone()\r\n  }\r\n\r\n  setOffsetRightDistance (distance: number): void {\r\n    this._chartStore.getTimeScaleStore().setOffsetRightDistance(distance, true)\r\n  }\r\n\r\n  getOffsetRightDistance (): number {\r\n    return this._chartStore.getTimeScaleStore().getOffsetRightDistance()\r\n  }\r\n\r\n  setMaxOffsetLeftDistance (distance: number): void {\r\n    if (distance < 0) {\r\n      logWarn('setMaxOffsetLeftDistance', 'distance', 'distance must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.getTimeScaleStore().setMaxOffsetLeftDistance(distance)\r\n  }\r\n\r\n  setMaxOffsetRightDistance (distance: number): void {\r\n    if (distance < 0) {\r\n      logWarn('setMaxOffsetRightDistance', 'distance', 'distance must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.getTimeScaleStore().setMaxOffsetRightDistance(distance)\r\n  }\r\n\r\n  setLeftMinVisibleBarCount (barCount: number): void {\r\n    if (barCount < 0) {\r\n      logWarn('setLeftMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(barCount))\r\n  }\r\n\r\n  setRightMinVisibleBarCount (barCount: number): void {\r\n    if (barCount < 0) {\r\n      logWarn('setRightMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(barCount))\r\n  }\r\n\r\n  setBarSpace (space: number): void {\r\n    this._chartStore.getTimeScaleStore().setBarSpace(space)\r\n  }\r\n\r\n  getBarSpace (): number {\r\n    return this._chartStore.getTimeScaleStore().getBarSpace().bar\r\n  }\r\n\r\n  getVisibleRange (): VisibleRange {\r\n    return this._chartStore.getTimeScaleStore().getVisibleRange()\r\n  }\r\n\r\n  clearData (): void {\r\n    this._chartStore.clear()\r\n  }\r\n\r\n  getDataList (): KLineData[] {\r\n    return this._chartStore.getDataList()\r\n  }\r\n\r\n  applyNewData (dataList: KLineData[], more?: boolean, callback?: () => void): void {\r\n    this._chartStore.clear()\r\n    if (dataList.length === 0) {\r\n      this.adjustPaneViewport(false, true, true, true)\r\n    } else {\r\n      this.applyMoreData(dataList, more, callback)\r\n    }\r\n  }\r\n\r\n  applyMoreData (dataList: KLineData[], more?: boolean, callback?: () => void): void {\r\n    this._chartStore.addData(dataList, 0, more)\r\n    if (dataList.length > 0) {\r\n      this._chartStore.getIndicatorStore().calcInstance().then(\r\n        _ => {\r\n          this.adjustPaneViewport(false, true, true, true)\r\n          callback?.()\r\n        }\r\n      ).catch(_ => {})\r\n    }\r\n  }\r\n\r\n  updateData (data: KLineData, callback?: () => void): void {\r\n    const dataList = this._chartStore.getDataList()\r\n    const dataCount = dataList.length\r\n    // Determine where individual data should be added\r\n    const timestamp = data.timestamp\r\n    const lastDataTimestamp = formatValue(dataList[dataCount - 1], 'timestamp', 0) as number\r\n    if (timestamp >= lastDataTimestamp) {\r\n      let pos = dataCount\r\n      if (timestamp === lastDataTimestamp) {\r\n        pos = dataCount - 1\r\n      }\r\n      this._chartStore.addData(data, pos)\r\n      this._chartStore.getIndicatorStore().calcInstance().then(\r\n        _ => {\r\n          this.adjustPaneViewport(false, true, true, true)\r\n          callback?.()\r\n        }\r\n      ).catch(_ => {})\r\n    }\r\n  }\r\n\r\n  loadMore (cb: LoadMoreCallback): void {\r\n    this._chartStore.getTimeScaleStore().setLoadMoreCallback(cb)\r\n  }\r\n\r\n  createIndicator (value: string | IndicatorCreate, isStack?: boolean, paneOptions?: Nullable<PaneOptions>, callback?: () => void): Nullable<string> {\r\n    const indicator = isString(value) ? { name: value } : value\r\n    if (getIndicatorClass(indicator.name) === null) {\r\n      logWarn('createIndicator', 'value', 'indicator not supported, you may need to use registerIndicator to add one!!!')\r\n      return null\r\n    }\r\n\r\n    let paneId = paneOptions?.id\r\n    const currentPane = this.getDrawPaneById(paneId ?? '')\r\n    if (currentPane !== null) {\r\n      this._chartStore.getIndicatorStore().addInstance(indicator, paneId ?? '', isStack ?? false).then(_ => {\r\n        this._setPaneOptions(paneOptions ?? {}, currentPane.getAxisComponent().buildTicks(true) ?? false)\r\n      }).catch(_ => {})\r\n    } else {\r\n      paneId ??= createId(PaneIdConstants.INDICATOR)\r\n      const pane = this._createPane(IndicatorPane, paneId, paneOptions ?? {})\r\n      const height = paneOptions?.height ?? PANE_DEFAULT_HEIGHT\r\n      pane.setBounding({ height })\r\n      this._chartStore.getIndicatorStore().addInstance(indicator, paneId, isStack ?? false).finally(() => {\r\n        this.adjustPaneViewport(true, true, true, true, true)\r\n        callback?.()\r\n      })\r\n    }\r\n    return paneId ?? null\r\n  }\r\n\r\n  overrideIndicator (override: IndicatorCreate, paneId?: Nullable<string>, callback?: () => void): void {\r\n    this._chartStore.getIndicatorStore().override(override, paneId ?? null).then(\r\n      ([onlyUpdateFlag, resizeFlag]) => {\r\n        if (onlyUpdateFlag || resizeFlag) {\r\n          this.adjustPaneViewport(false, resizeFlag, true, resizeFlag)\r\n          callback?.()\r\n        }\r\n      }\r\n    ).catch(() => {})\r\n  }\r\n\r\n  getIndicatorByPaneId (paneId?: string, name?: string): Nullable<Indicator> | Nullable<Map<string, Indicator>> | Map<string, Map<string, Indicator>> {\r\n    return this._chartStore.getIndicatorStore().getInstanceByPaneId(paneId, name)\r\n  }\r\n\r\n  removeIndicator (paneId: string, name?: string): void {\r\n    const indicatorStore = this._chartStore.getIndicatorStore()\r\n    const removed = indicatorStore.removeInstance(paneId, name)\r\n    if (removed) {\r\n      let shouldMeasureHeight = false\r\n      if (paneId !== PaneIdConstants.CANDLE) {\r\n        if (!indicatorStore.hasInstances(paneId)) {\r\n          const pane = this.getDrawPaneById(paneId)\r\n          const index = this._drawPanes.findIndex(p => p.getId() === paneId)\r\n          if (pane !== null) {\r\n            shouldMeasureHeight = true\r\n            const separatorPane = this._separatorPanes.get(pane)\r\n            if (isValid(separatorPane)) {\r\n              const topPane = separatorPane?.getTopPane()\r\n              for (const item of this._separatorPanes) {\r\n                if (item[1].getTopPane().getId() === pane.getId()) {\r\n                  item[1].setTopPane(topPane)\r\n                  break\r\n                }\r\n              }\r\n              separatorPane.destroy()\r\n              this._separatorPanes.delete(pane)\r\n            }\r\n            this._drawPanes.splice(index, 1)\r\n            pane.destroy()\r\n\r\n            let firstPane = this._drawPanes[0]\r\n            if (isValid(firstPane)) {\r\n              if (firstPane.getId() === PaneIdConstants.X_AXIS) {\r\n                firstPane = this._drawPanes[1]\r\n              }\r\n            }\r\n            this._separatorPanes.get(firstPane)?.destroy()\r\n            this._separatorPanes.delete(firstPane)\r\n          }\r\n        }\r\n      }\r\n      this.adjustPaneViewport(shouldMeasureHeight, true, true, true, true)\r\n    }\r\n  }\r\n\r\n  createOverlay (value: string | OverlayCreate | Array<string | OverlayCreate>, paneId?: string): Nullable<string> | Array<Nullable<string>> {\r\n    let overlays: OverlayCreate[] = []\r\n    if (isString(value)) {\r\n      overlays = [{ name: value }]\r\n    } else if (isArray<Array<string | OverlayCreate>>(value)) {\r\n      overlays = (value as Array<string | OverlayCreate>).map((v: string | OverlayCreate) => {\r\n        if (isString(v)) {\r\n          return { name: v }\r\n        }\r\n        return v\r\n      })\r\n    } else {\r\n      const overlay = value as OverlayCreate\r\n      overlays = [overlay]\r\n    }\r\n    let appointPaneFlag = true\r\n    if (!isValid(paneId) || this.getDrawPaneById(paneId) === null) {\r\n      paneId = PaneIdConstants.CANDLE\r\n      appointPaneFlag = false\r\n    }\r\n    const ids = this._chartStore.getOverlayStore().addInstances(overlays, paneId, appointPaneFlag)\r\n    if (isArray(value)) {\r\n      return ids\r\n    }\r\n    return ids[0]\r\n  }\r\n\r\n  getOverlayById (id: string): Nullable<Overlay> {\r\n    return this._chartStore.getOverlayStore().getInstanceById(id)\r\n  }\r\n\r\n  overrideOverlay (override: Partial<OverlayCreate>): void {\r\n    this._chartStore.getOverlayStore().override(override)\r\n  }\r\n\r\n  removeOverlay (remove?: string | OverlayRemove): void {\r\n    let overlayRemove\r\n    if (isValid(remove)) {\r\n      if (isString(remove)) {\r\n        overlayRemove = { id: remove }\r\n      } else {\r\n        overlayRemove = remove\r\n      }\r\n    }\r\n    this._chartStore.getOverlayStore().removeInstance(overlayRemove)\r\n  }\r\n\r\n  setPaneOptions (options: PaneOptions): void {\r\n    this._setPaneOptions(options, false)\r\n  }\r\n\r\n  setZoomEnabled (enabled: boolean): void {\r\n    this._chartStore.getTimeScaleStore().setZoomEnabled(enabled)\r\n  }\r\n\r\n  isZoomEnabled (): boolean {\r\n    return this._chartStore.getTimeScaleStore().getZoomEnabled()\r\n  }\r\n\r\n  setScrollEnabled (enabled: boolean): void {\r\n    this._chartStore.getTimeScaleStore().setScrollEnabled(enabled)\r\n  }\r\n\r\n  isScrollEnabled (): boolean {\r\n    return this._chartStore.getTimeScaleStore().getScrollEnabled()\r\n  }\r\n\r\n  scrollByDistance (distance: number, animationDuration?: number): void {\r\n    const duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0\r\n    const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n    if (duration > 0) {\r\n      timeScaleStore.startScroll()\r\n      const startTime = new Date().getTime()\r\n      const animation: (() => void) = () => {\r\n        const progress = (new Date().getTime() - startTime) / duration\r\n        const finished = progress >= 1\r\n        const dis = finished ? distance : distance * progress\r\n        timeScaleStore.scroll(dis)\r\n        if (!finished) {\r\n          requestAnimationFrame(animation)\r\n        }\r\n      }\r\n      animation()\r\n    } else {\r\n      timeScaleStore.startScroll()\r\n      timeScaleStore.scroll(distance)\r\n    }\r\n  }\r\n\r\n  scrollToRealTime (animationDuration?: number): void {\r\n    const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n    const { bar: barSpace } = timeScaleStore.getBarSpace()\r\n    const difBarCount = timeScaleStore.getLastBarRightSideDiffBarCount() - timeScaleStore.getInitialOffsetRightDistance() / barSpace\r\n    const distance = difBarCount * barSpace\r\n    this.scrollByDistance(distance, animationDuration)\r\n  }\r\n\r\n  scrollToDataIndex (dataIndex: number, animationDuration?: number): void {\r\n    const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n    const distance = (\r\n      timeScaleStore.getLastBarRightSideDiffBarCount() + (this.getDataList().length - 1 - dataIndex)\r\n    ) * timeScaleStore.getBarSpace().bar\r\n    this.scrollByDistance(distance, animationDuration)\r\n  }\r\n\r\n  scrollToTimestamp (timestamp: number, animationDuration?: number): void {\r\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\r\n    this.scrollToDataIndex(dataIndex, animationDuration)\r\n  }\r\n\r\n  zoomAtCoordinate (scale: number, coordinate?: Coordinate, animationDuration?: number): void {\r\n    const duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0\r\n    const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n    if (duration > 0) {\r\n      const { bar: barSpace } = timeScaleStore.getBarSpace()\r\n      const scaleDataSpace = barSpace * scale\r\n      const difSpace = scaleDataSpace - barSpace\r\n      const startTime = new Date().getTime()\r\n      const animation: (() => void) = () => {\r\n        const progress = (new Date().getTime() - startTime) / duration\r\n        const finished = progress >= 1\r\n        const progressDataSpace = finished ? difSpace : difSpace * progress\r\n        timeScaleStore.zoom(progressDataSpace / barSpace, coordinate)\r\n        if (!finished) {\r\n          requestAnimationFrame(animation)\r\n        }\r\n      }\r\n      animation()\r\n    } else {\r\n      timeScaleStore.zoom(scale, coordinate)\r\n    }\r\n  }\r\n\r\n  zoomAtDataIndex (scale: number, dataIndex: number, animationDuration?: number): void {\r\n    const x = this._chartStore.getTimeScaleStore().dataIndexToCoordinate(dataIndex)\r\n    this.zoomAtCoordinate(scale, { x, y: 0 }, animationDuration)\r\n  }\r\n\r\n  zoomAtTimestamp (scale: number, timestamp: number, animationDuration?: number): void {\r\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\r\n    this.zoomAtDataIndex(scale, dataIndex, animationDuration)\r\n  }\r\n\r\n  convertToPixel (points: Partial<Point> | Array<Partial<Point>>, finder: ConvertFinder): Partial<Coordinate> | Array<Partial<Coordinate>> {\r\n    const { paneId = PaneIdConstants.CANDLE, absolute = false } = finder\r\n    let coordinates: Array<Partial<Coordinate>> = []\r\n    if (paneId !== PaneIdConstants.X_AXIS) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n        const bounding = pane.getBounding()\r\n        const ps = new Array<Partial<Point>>().concat(points)\r\n        const xAxis = this._xAxisPane.getAxisComponent()\r\n        const yAxis = pane.getAxisComponent()\r\n        coordinates = ps.map(point => {\r\n          const coordinate: Partial<Coordinate> = {}\r\n          let dataIndex = point.dataIndex\r\n          if (isNumber(point.timestamp)) {\r\n            dataIndex = timeScaleStore.timestampToDataIndex(point.timestamp)\r\n          }\r\n          if (isNumber(dataIndex)) {\r\n            coordinate.x = xAxis?.convertToPixel(dataIndex)\r\n          }\r\n          if (isNumber(point.value)) {\r\n            const y = yAxis?.convertToPixel(point.value)\r\n            coordinate.y = absolute ? bounding.top + y : y\r\n          }\r\n          return coordinate\r\n        })\r\n      }\r\n    }\r\n    return isArray(points) ? coordinates : (coordinates[0] ?? {})\r\n  }\r\n\r\n  convertFromPixel (coordinates: Array<Partial<Coordinate>>, finder: ConvertFinder): Partial<Point> | Array<Partial<Point>> {\r\n    const { paneId = PaneIdConstants.CANDLE, absolute = false } = finder\r\n    let points: Array<Partial<Point>> = []\r\n    if (paneId !== PaneIdConstants.X_AXIS) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const timeScaleStore = this._chartStore.getTimeScaleStore()\r\n        const bounding = pane.getBounding()\r\n        const cs = new Array<Partial<Coordinate>>().concat(coordinates)\r\n        const xAxis = this._xAxisPane.getAxisComponent()\r\n        const yAxis = pane.getAxisComponent()\r\n        points = cs.map(coordinate => {\r\n          const point: Partial<Point> = {}\r\n          if (isNumber(coordinate.x)) {\r\n            const dataIndex = xAxis?.convertFromPixel(coordinate.x) ?? -1\r\n            point.dataIndex = dataIndex\r\n            point.timestamp = timeScaleStore.dataIndexToTimestamp(dataIndex) ?? undefined\r\n          }\r\n          if (isNumber(coordinate.y)) {\r\n            const y = absolute ? coordinate.y - bounding.top : coordinate.y\r\n            point.value = yAxis.convertFromPixel(y)\r\n          }\r\n          return point\r\n        })\r\n      }\r\n    }\r\n    return isArray(coordinates) ? points : (points[0] ?? {})\r\n  }\r\n\r\n  executeAction (type: ActionType, data: any): void {\r\n    switch (type) {\r\n      case ActionType.OnCrosshairChange: {\r\n        const crosshair = { ...data }\r\n        crosshair.paneId = crosshair.paneId ?? PaneIdConstants.CANDLE\r\n        this._chartStore.getTooltipStore().setCrosshair(crosshair)\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  subscribeAction (type: ActionType, callback: ActionCallback): void {\r\n    this._chartStore.getActionStore().subscribe(type, callback)\r\n  }\r\n\r\n  unsubscribeAction (type: ActionType, callback?: ActionCallback): void {\r\n    this._chartStore.getActionStore().unsubscribe(type, callback)\r\n  }\r\n\r\n  getConvertPictureUrl (includeOverlay?: boolean, type?: string, backgroundColor?: string): string {\r\n    const width = this._chartContainer.offsetWidth\r\n    const height = this._chartContainer.offsetHeight\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    ctx.fillStyle = backgroundColor ?? '#FFFFFF'\r\n    ctx.fillRect(0, 0, width, height)\r\n    const overlayFlag = includeOverlay ?? false\r\n    this._drawPanes.forEach(pane => {\r\n      const separatorPane = this._separatorPanes.get(pane)\r\n      if (isValid(separatorPane)) {\r\n        const separatorBounding = separatorPane.getBounding()\r\n        ctx.drawImage(\r\n          separatorPane.getImage(overlayFlag),\r\n          separatorBounding.left, separatorBounding.top, separatorBounding.width, separatorBounding.height\r\n        )\r\n      }\r\n\r\n      const bounding = pane.getBounding()\r\n      ctx.drawImage(\r\n        pane.getImage(overlayFlag),\r\n        0, bounding.top, width, bounding.height\r\n      )\r\n    })\r\n    return canvas.toDataURL(`image/${type ?? 'jpeg'}`)\r\n  }\r\n\r\n  resize (): void {\r\n    this.adjustPaneViewport(true, true, true, true, true)\r\n  }\r\n\r\n  destroy (): void {\r\n    this._chartEvent.destroy()\r\n    this._drawPanes.forEach(pane => {\r\n      pane.destroy()\r\n    })\r\n    this._drawPanes = []\r\n    this._container.removeChild(this._chartContainer)\r\n  }\r\n}\r\n","/**\r\n *       ___           ___                   ___           ___           ___           ___           ___           ___           ___\r\n *      /\\__\\         /\\__\\      ___        /\\__\\         /\\  \\         /\\  \\         /\\__\\         /\\  \\         /\\  \\         /\\  \\\r\n *     /:/  /        /:/  /     /\\  \\      /::|  |       /::\\  \\       /::\\  \\       /:/  /        /::\\  \\       /::\\  \\        \\:\\  \\\r\n *    /:/__/        /:/  /      \\:\\  \\    /:|:|  |      /:/\\:\\  \\     /:/\\:\\  \\     /:/__/        /:/\\:\\  \\     /:/\\:\\  \\        \\:\\  \\\r\n *   /::\\__\\____   /:/  /       /::\\__\\  /:/|:|  |__   /::\\~\\:\\  \\   /:/  \\:\\  \\   /::\\  \\ ___   /::\\~\\:\\  \\   /::\\~\\:\\  \\       /::\\  \\\r\n *  /:/\\:::::\\__\\ /:/__/     __/:/\\/__/ /:/ |:| /\\__\\ /:/\\:\\ \\:\\__\\ /:/__/ \\:\\__\\ /:/\\:\\  /\\__\\ /:/\\:\\ \\:\\__\\ /:/\\:\\ \\:\\__\\     /:/\\:\\__\\\r\n *  \\/_|:|~~|~    \\:\\  \\    /\\/:/  /    \\/__|:|/:/  / \\:\\~\\:\\ \\/__/ \\:\\  \\  \\/__/ \\/__\\:\\/:/  / \\/__\\:\\/:/  / \\/_|::\\/:/  /    /:/  \\/__/\r\n *     |:|  |      \\:\\  \\   \\::/__/         |:/:/  /   \\:\\ \\:\\__\\    \\:\\  \\            \\::/  /       \\::/  /     |:|::/  /    /:/  /\r\n *     |:|  |       \\:\\  \\   \\:\\__\\         |::/  /     \\:\\ \\/__/     \\:\\  \\           /:/  /        /:/  /      |:|\\/__/     \\/__/\r\n *     |:|  |        \\:\\__\\   \\/__/         /:/  /       \\:\\__\\        \\:\\__\\         /:/  /        /:/  /       |:|  |\r\n *      \\|__|         \\/__/                 \\/__/         \\/__/         \\/__/         \\/__/         \\/__/         \\|__|\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {\r\n  LineType, PolygonType, TooltipShowRule, TooltipShowType, TooltipIconPosition,\r\n  CandleType, YAxisPosition, YAxisType\r\n} from './common/Styles'\r\nimport Nullable from './common/Nullable'\r\n\r\nimport { logError, logTag, logWarn } from './common/utils/logger'\r\n\r\nimport {\r\n  clone, merge, isString, isNumber, isValid, isObject, isArray, isFunction, isBoolean\r\n} from './common/utils/typeChecks'\r\nimport { formatValue, formatPrecision, formatBigNumber, formatDate, formatThousands } from './common/utils/format'\r\nimport { calcTextWidth } from './common/utils/canvas'\r\nimport { ActionType } from './common/Action'\r\nimport { IndicatorSeries } from './component/Indicator'\r\nimport { OverlayMode } from './component/Overlay'\r\n\r\nimport { Options, FormatDateType } from './Options'\r\nimport ChartImp, { Chart, DomPosition } from './Chart'\r\n\r\nimport { checkCoordinateOnArc, drawArc } from './extension/figure/arc'\r\nimport { checkCoordinateOnCircle, drawCircle } from './extension/figure/circle'\r\nimport {\r\n  checkCoordinateOnLine, drawLine,\r\n  getLinearYFromSlopeIntercept, getLinearSlopeIntercept, getLinearYFromCoordinates\r\n} from './extension/figure/line'\r\nimport { checkCoordinateOnPolygon, drawPolygon } from './extension/figure/polygon'\r\nimport { checkCoordinateOnRect, drawRect } from './extension/figure/rect'\r\nimport { drawRectText } from './extension/figure/rectText'\r\nimport { checkCoordinateOnText, drawText } from './extension/figure/text'\r\n\r\nimport { registerFigure, getSupportedFigures, getFigureClass } from './extension/figure/index'\r\nimport { registerIndicator, getSupportedIndicators } from './extension/indicator/index'\r\nimport { registerLocale, getSupportedLocales } from './extension/i18n/index'\r\nimport { registerOverlay, getOverlayClass, getSupportedOverlays } from './extension/overlay/index'\r\nimport { registerStyles } from './extension/styles/index'\r\n\r\nconst instances = new Map<string, ChartImp>()\r\nlet chartBaseId = 1\r\n\r\n/**\r\n * Chart version\r\n * @return {string}\r\n */\r\nfunction version (): string {\r\n  return '__VERSION__'\r\n}\r\n\r\n/**\r\n * Init chart instance\r\n * @param ds\r\n * @param options\r\n * @returns {Chart}\r\n */\r\nfunction init (ds: HTMLElement | string, options?: Options): Nullable<Chart> {\r\n  logTag()\r\n  let dom: Nullable<HTMLElement>\r\n  if (isString(ds)) {\r\n    dom = document.getElementById(ds)\r\n  } else {\r\n    dom = ds\r\n  }\r\n  if (dom === null) {\r\n    logError('', '', 'The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!')\r\n    return null\r\n  }\r\n  let chart = instances.get(dom.id)\r\n  if (isValid(chart)) {\r\n    logWarn('', '', 'The chart has been initialized on the domÔºÅÔºÅÔºÅ')\r\n    return chart\r\n  }\r\n  const id = `k_line_chart_${chartBaseId++}`\r\n  chart = new ChartImp(dom, options)\r\n  chart.id = id\r\n  dom.setAttribute('k-line-chart-id', id)\r\n  instances.set(id, chart)\r\n  return chart\r\n}\r\n\r\n/**\r\n * Destroy chart instance\r\n * @param dcs\r\n */\r\nfunction dispose (dcs: HTMLElement | Chart | string): void {\r\n  let id: Nullable<string>\r\n  if (dcs instanceof ChartImp) {\r\n    id = dcs.id\r\n  } else {\r\n    let dom: Nullable<HTMLElement>\r\n    if (isString(dcs)) {\r\n      dom = document.getElementById(dcs)\r\n    } else {\r\n      dom = dcs as HTMLElement\r\n    }\r\n    id = dom?.getAttribute('k-line-chart-id') ?? null\r\n  }\r\n  if (id !== null) {\r\n    instances.get(id)?.destroy()\r\n    instances.delete(id)\r\n  }\r\n}\r\n\r\nconst utils = {\r\n  clone,\r\n  merge,\r\n  isString,\r\n  isNumber,\r\n  isValid,\r\n  isObject,\r\n  isArray,\r\n  isFunction,\r\n  isBoolean,\r\n  formatValue,\r\n  formatPrecision,\r\n  formatBigNumber,\r\n  formatDate,\r\n  formatThousands,\r\n  calcTextWidth,\r\n  getLinearSlopeIntercept,\r\n  getLinearYFromSlopeIntercept,\r\n  getLinearYFromCoordinates,\r\n  checkCoordinateOnArc,\r\n  checkCoordinateOnCircle,\r\n  checkCoordinateOnLine,\r\n  checkCoordinateOnPolygon,\r\n  checkCoordinateOnRect,\r\n  checkCoordinateOnText,\r\n  drawArc,\r\n  drawCircle,\r\n  drawLine,\r\n  drawPolygon,\r\n  drawRect,\r\n  drawText,\r\n  drawRectText\r\n}\r\n\r\nexport {\r\n  version, init, dispose,\r\n  registerFigure, getSupportedFigures, getFigureClass,\r\n  registerIndicator, getSupportedIndicators,\r\n  registerOverlay, getSupportedOverlays, getOverlayClass,\r\n  registerLocale, getSupportedLocales,\r\n  registerStyles, utils,\r\n  LineType, PolygonType, TooltipShowRule, TooltipShowType, TooltipIconPosition,\r\n  CandleType, YAxisPosition, YAxisType, FormatDateType,\r\n  DomPosition, ActionType, IndicatorSeries, OverlayMode\r\n}\r\n"],"names":["LineType","PolygonType","TooltipShowRule","TooltipShowType","TooltipIconPosition","CandleType","YAxisPosition","YAxisType","ActionType","IndicatorSeries","OverlayMode","FormatDateType","extensions","getDistance","Action","requestAnimationFrame","CandleLastPriceLineView","YAxis","XAxis","DomPosition","getExtensionStyles"],"mappings":"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","x_google_ignoreList":[0]}